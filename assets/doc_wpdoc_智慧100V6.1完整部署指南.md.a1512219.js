import{_ as s,o as a,c as n,Q as l}from"./chunks/framework.d084db19.js";const m=JSON.parse('{"title":"智慧100V6.1完整部署指南","description":"","frontmatter":{"title":"智慧100V6.1完整部署指南","date":"2022-12-02T05:04:40.000Z"},"headers":[],"relativePath":"doc/wpdoc/智慧100V6.1完整部署指南.md","filePath":"doc/wpdoc/智慧100V6.1完整部署指南.md"}'),p={name:"doc/wpdoc/智慧100V6.1完整部署指南.md"},o=l(`<h1 id="智慧100v6-1完整部署指南" tabindex="-1">智慧100V6.1完整部署指南 <a class="header-anchor" href="#智慧100v6-1完整部署指南" aria-label="Permalink to &quot;智慧100V6.1完整部署指南&quot;">​</a></h1><ul><li><p><a href="#智慧100v61完整部署指南">智慧100V6.1完整部署指南</a></p><ul><li><p><a href="#前置声明">前置声明</a></p></li><li><p><a href="#一系统环境准备">一、系统环境准备</a></p></li><li><p><a href="#1-申请app企业名称">1. 申请APP企业名称</a></p></li><li><p><a href="#2-整理服务部署清单">2. 整理服务部署清单</a></p></li><li><p><a href="#3-磁盘分区和挂载">3. 磁盘分区和挂载</a></p></li><li><p><a href="#4-创建交换分区">4. 创建交换分区</a></p></li><li><p><a href="#5-安装内部下载工具">5. 安装内部下载工具</a></p></li><li><p><a href="#二安装基础服务">二、安装基础服务</a></p></li><li><p><a href="#1-安装jdk">1. 安装JDK</a></p></li><li><p><a href="#2-安装postgresql">2. 安装postgresql</a></p><ul><li><a href="#注意事项">注意事项</a></li></ul></li><li><p><a href="#3-安装redis">3. 安装redis</a></p></li><li><p><a href="#4-安装rabbitmq">4. 安装RabbitMQ</a></p></li><li><p><a href="#5-安装openresty">5. 安装openresty</a></p></li><li><p><a href="#6-安装nacos">6. 安装nacos</a></p></li><li><p><a href="#7-安装filebeat">7. 安装filebeat</a></p></li><li><p><a href="#8-安装apache-tomcat">8. 安装apache-tomcat</a></p></li><li><p><a href="#三业务库初始化">三、业务库初始化</a></p></li><li><p><a href="#1-apaas-数据库初始化">1. apaas 数据库初始化</a></p></li><li><p><a href="#2-数据平台数据库初始化">2. 数据平台数据库初始化</a></p></li><li><p><a href="#3-ipaas-数据库初始化">3. ipaas 数据库初始化</a></p></li><li><p><a href="#四业务服务安装">四、业务服务安装</a></p></li><li><p><a href="#前置准备工作">前置准备工作</a></p><ul><li><a href="#导入-nacos-配置">导入 nacos 配置</a></li><li><a href="#部署目录准备">部署目录准备</a></li><li><a href="#放置种子文件到特定目录">放置种子文件到特定目录</a></li><li><a href="#运维工具安装">运维工具安装</a></li><li><a href="#获取版本服务清单">获取版本服务清单</a></li></ul></li><li><p><a href="#根据服务清单一键安装所有服务">根据服务清单一键安装所有服务</a></p></li><li><p><a href="#单个业务服务安装">单个业务服务安装</a></p><ul><li><a href="#accountserv">accountserv</a></li><li><a href="#etlserv">etlserv</a></li><li><a href="#ideserv">ideserv</a></li><li><a href="#masterserv">masterserv</a></li><li><a href="#messageserv">messageserv</a></li><li><a href="#platformserv">platformserv</a></li><li><a href="#注意事项-1">注意事项</a></li><li><a href="#queueserv">queueserv</a></li><li><a href="#taskserv">taskserv</a></li><li><a href="#authserver">authserver</a></li><li><a href="#resourceconfig-service">resourceconfig-service</a></li><li><a href="#dynamic-bizengine">dynamic-bizengine</a></li><li><a href="#impexp">impexp</a></li><li><a href="#offline-engine">offline-engine</a></li><li><a href="#biengine">biengine</a></li><li><a href="#apaasadmin">apaasadmin</a></li><li><a href="#flowengine-rest">flowengine-rest</a></li><li><a href="#processdesigner">processdesigner</a></li><li><a href="#announcement-rest">announcement-rest</a></li><li><a href="#opendata">opendata</a></li><li><a href="#litheform-service">litheform-service</a></li><li><a href="#lightform-web">lightform-web</a></li><li><a href="#lightform-configuration">lightform-configuration</a></li><li><a href="#apaasweb">apaas/web</a></li><li><a href="#注意事项-2">注意事项</a></li><li><a href="#appmanager">appmanager</a></li><li><a href="#productoperation">productoperation</a></li><li><a href="#k100master">k100master</a></li><li><a href="#dym-plugin">dym-plugin</a></li><li><a href="#direport">direport</a></li><li><a href="#wechatservice">wechatservice</a></li><li><a href="#h5-app">h5-app</a></li><li><a href="#h5-ide">h5-ide</a></li><li><a href="#license-service">license-service</a></li><li><a href="#xwdatax">xwdatax</a></li><li><a href="#datamanager-admin">datamanager-admin</a></li><li><a href="#datamanager-web">datamanager-web</a></li><li><a href="#dataintegration-executor">dataintegration-executor</a></li><li><a href="#bimobileweb">bimobileweb</a></li><li><a href="#admin">admin</a></li><li><a href="#flystep">flystep</a></li><li><a href="#router">router</a></li><li><a href="#ipaasweb">ipaas/web</a></li><li><a href="#注意事项-3">注意事项</a></li></ul></li><li><p><a href="#五开户验证">五、开户验证</a></p></li><li><p><a href="#1-导入v61元数据">1. 导入V6.1元数据</a></p></li><li><p><a href="#2-开户验证">2. 开户验证</a></p></li><li><p><a href="#部署常见问题-faq">部署常见问题 FAQ</a></p></li><li><p><a href="#工具问题">工具问题</a></p><ul><li><a href="#q-svn-连接超时无法通过-svn-下载归档资源">Q: svn 连接超时，无法通过 svn 下载归档资源</a></li><li><a href="#q-svn-提示输入-root-密码">Q: svn 提示输入 root 密码</a></li><li><a href="#q-sdhelper-工具下载的安装包放在哪个位置">Q: sdhelper 工具下载的安装包放在哪个位置</a></li><li><a href="#q-sdhelper-工具是怎么做备份的服务目录下原来的文件和日志能否找回">Q: sdhelper 工具是怎么做备份的，服务目录下原来的文件和日志能否找回</a></li></ul></li><li><p><a href="#异常排查思路">异常排查思路</a></p><ul><li><a href="#q-根据服务的ip和端口如何判断对应了哪个服务">Q: 根据服务的ip和端口，如何判断对应了哪个服务</a></li><li><a href="#q-如何查看nginx日志">Q: 如何查看nginx日志</a></li><li><a href="#q-nginx路由的服务ip地址不对需要在哪里修正">Q: nginx路由的服务ip地址不对，需要在哪里修正</a></li><li><a href="#q-接口请求出错了如何确定接口请求了哪个服务">Q: 接口请求出错了，如何确定接口请求了哪个服务</a></li><li><a href="#q-如何查看服务日志">Q: 如何查看服务日志</a></li><li><a href="#q-服务启动失败如何排查">Q: 服务启动失败如何排查</a></li><li><a href="#q-根目录的磁盘满了是什么问题">Q: 根目录(/)的磁盘满了，是什么问题</a></li></ul></li><li><p><a href="#服务安装异常">服务安装异常</a></p><ul><li><a href="#q-业务服务没有正确连接上-nacos导致启动失败或者其他异常">Q: 业务服务没有正确连接上 nacos，导致启动失败或者其他异常</a></li><li><a href="#q-业务服务报错连接数据库redis超时或请求其他服务超时">Q: 业务服务报错连接数据库、redis超时，或请求其他服务超时</a></li><li><a href="#q-请求-backend-18080-端口超时">Q: 请求 backend 18080 端口超时</a></li><li><a href="#q-如何判断-backend-相关服务是否启动成功或者是否挂了">Q: 如何判断 backend 相关服务是否启动成功，或者是否挂了</a></li><li><a href="#q-请求-backend-相关服务404">Q: 请求 backend 相关服务404</a></li></ul></li><li><p><a href="#开户失败">开户失败</a></p><ul><li><a href="#q-初始化数据库失败报错缺少-pg_restore-命令">Q: 初始化数据库失败，报错缺少 pg_restore 命令</a></li><li><a href="#q-初始化数据库失败报错缺少对应种子库文件">Q: 初始化数据库失败，报错缺少对应种子库文件</a></li><li><a href="#q-初始化数据平台失败报错缺少对应种子库库文件">Q: 初始化数据平台失败，报错缺少对应种子库库文件</a></li><li><a href="#q-初始租户数据库失败报错-cannot-execute-create-schema-in-a-read-only-transaction">Q: 初始租户数据库失败，报错 &quot;cannot execute CREATE SCHEMA in a read-only transaction&quot;</a></li><li><a href="#q-platformserv-服务没连上-nacos">Q: platformserv 服务没连上 nacos</a></li></ul></li><li><p><a href="#业务错误">业务错误</a></p><ul><li><a href="#q-服务多实例部署时插入数据时生成的-id-出现冲突">Q: 服务多实例部署时，插入数据时生成的 id 出现冲突</a></li><li><a href="#q-业务接口报错缺少-st_makepoint-函数">Q: 业务接口报错缺少 <code>st_makepoint</code> 函数</a></li><li><a href="#q-已安装并启用了-postgis-插件但是业务接口报错缺少-st_distance_sphere-函数">Q: 已安装并启用了 postgis 插件，但是业务接口报错缺少 <code>st_distance_sphere</code> 函数</a></li><li><a href="#q-开户后涉及企微的相关接口会报错不可用">Q: 开户后涉及企微的相关接口会报错不可用</a></li></ul></li></ul></li></ul><h2 id="前置声明" tabindex="-1">前置声明 <a class="header-anchor" href="#前置声明" aria-label="Permalink to &quot;前置声明&quot;">​</a></h2><ol><li>本指南对应 Linux 发行版为 CentOS 7.5</li><li>本指南涉及的 Bash 命令，仅供参考。不建议直接复制执行，也无法保证兼容所有情况，请部署同学根据实际情况调整</li><li>nacos 配置务必根据实际服务部署情况进行调整</li><li>本指南指在引导部署同学从0到1部署整套智慧100服务，包括基础依赖服务。若只需要某部分服务，也可以选择性查阅</li><li><em><strong>目前存在有些华为云ip网段无法直接访问svn的情况，如果 <code>svn export</code> 或 <code>svn_exporter</code> 命令请求超时，请先在可以访问svn的机器上执行相关下载命令，再手动 <code>scp</code> 下载的内容到对应服务器上</strong></em></li></ol><h2 id="一、系统环境准备" tabindex="-1">一、系统环境准备 <a class="header-anchor" href="#一、系统环境准备" aria-label="Permalink to &quot;一、系统环境准备&quot;">​</a></h2><h3 id="_1-申请app企业名称" tabindex="-1">1. 申请APP企业名称 <a class="header-anchor" href="#_1-申请app企业名称" aria-label="Permalink to &quot;1\\. 申请APP企业名称&quot;">​</a></h3><p>我们的APP是支持多环境的，新环境的APP企业名称需要跟PMO <code>李瑞烜</code> 申请（或者找运维同事申请，根据实际情况来）。需要使用到 APP 功能可以进行申请，申请工作和环境部署互不影响，可以同时进行。</p><p>申请时需要提供以下信息：</p><ul><li>APP企业名称：<code>{按需申请}</code></li><li>业务接口地址：<code>{openresty部署服务器ip}:7000</code></li><li>IDE接口地址：<code>{openresty部署服务器ip}:8001</code></li></ul><h3 id="_2-整理服务部署清单" tabindex="-1">2. 整理服务部署清单 <a class="header-anchor" href="#_2-整理服务部署清单" aria-label="Permalink to &quot;2\\. 整理服务部署清单&quot;">​</a></h3><p>如果是多机部署的环境，在具体部署前，需要整理一份服务部署清单，单机部署的环境可以忽略此步骤。</p><p>此文档需要结合运维提供的服务器信息进行整理，具体清单内应该至少能提供以下信息：</p><ul><li>每台服务器的内网地址（配置nacos和nginx需要用到）</li><li>每台服务器计划安装哪些服务（决定了每台机器需要安装哪些基础服务和业务服务）</li></ul><p>此文档将作为后续服务部署和问题排查的指导文档，进一步可作为客户交付材料之一。</p><h3 id="_3-磁盘分区和挂载" tabindex="-1">3. 磁盘分区和挂载 <a class="header-anchor" href="#_3-磁盘分区和挂载" aria-label="Permalink to &quot;3\\. 磁盘分区和挂载&quot;">​</a></h3><blockquote><p>服务器有加购数据盘，才需要进行挂载，否则可以忽略此步骤。多机部署环境，注意每台机器都要先检查下磁盘信息。</p></blockquote><ol><li>查看磁盘信息</li></ol><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">fdisk</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-l</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">fdisk</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-l</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>下图示例中可以看到，/dev/vdb 磁盘未挂载使用</p><p><img src="http://apaas.wxchina.com:8881/wp-content/uploads/fdisk%E7%A4%BA%E4%BE%8B1.png" alt="fdisk示例1"></p><ol><li>磁盘分区</li></ol><p>如果整个磁盘一起使用，也可以不分区。需要分区可以使用 <code>fdisk</code> 命令进行操作。</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># &lt;code&gt;fdisk&lt;/code&gt; 分区操作涉及命令行交互，记住两个命令：n（新建分区）、w（保存并应用分区），其他操作看交互提示即可</span></span>
<span class="line"><span style="color:#B392F0;">fdisk</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/dev/vdb</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># &lt;code&gt;fdisk&lt;/code&gt; 分区操作涉及命令行交互，记住两个命令：n（新建分区）、w（保存并应用分区），其他操作看交互提示即可</span></span>
<span class="line"><span style="color:#6F42C1;">fdisk</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/dev/vdb</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="http://apaas.wxchina.com:8881/wp-content/uploads/fdisk%E7%A4%BA%E4%BE%8B2.png" alt="fdisk示例2"></p><ol><li>格式化分区</li></ol><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 如果执行了上面的分区命令，查看分区，将看到vdb磁盘下多了一个vdb1分区，并且没有实例化（UUID为空）</span></span>
<span class="line"><span style="color:#B392F0;">lsblk</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 对刚刚新建分区进行格式化，磁盘类型为ext4</span></span>
<span class="line"><span style="color:#B392F0;">mkfs.ext4</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/dev/vdb1</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 如果执行了上面的分区命令，查看分区，将看到vdb磁盘下多了一个vdb1分区，并且没有实例化（UUID为空）</span></span>
<span class="line"><span style="color:#6F42C1;">lsblk</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-f</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 对刚刚新建分区进行格式化，磁盘类型为ext4</span></span>
<span class="line"><span style="color:#6F42C1;">mkfs.ext4</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/dev/vdb1</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ol><li>创建目录并设置永久挂载</li></ol><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 查看设备 UUID</span></span>
<span class="line"><span style="color:#B392F0;">blkid</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">UUID</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/dev/vdb1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 修改 /etc/fstab</span></span>
<span class="line"><span style="color:#6A737D;"># ***以下UUID根据实际情况修改***</span></span>
<span class="line"><span style="color:#6A737D;"># ***磁盘挂载目录根据实际需要调整，单独部署数据库的服务器，可以优先将更大的磁盘挂载到数据存储目录。一般业务场景使用的服务器，将磁盘挂载到 /home 目录即可***</span></span>
<span class="line"><span style="color:#B392F0;">cat</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&gt;&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/etc/fstab</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;&lt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">EOF</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF;">UUID=9d87a2ea-5543-46c2-8068-492f4d73aaaa /home                   ext4    defaults        0 0</span></span>
<span class="line"><span style="color:#9ECBFF;">EOF</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 依据 /etc/fstab 的内容，自动挂载设备</span></span>
<span class="line"><span style="color:#B392F0;">mount</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-a</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 确认磁盘挂载情况</span></span>
<span class="line"><span style="color:#B392F0;">df</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-h</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 查看设备 UUID</span></span>
<span class="line"><span style="color:#6F42C1;">blkid</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">UUID</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/dev/vdb1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 修改 /etc/fstab</span></span>
<span class="line"><span style="color:#6A737D;"># ***以下UUID根据实际情况修改***</span></span>
<span class="line"><span style="color:#6A737D;"># ***磁盘挂载目录根据实际需要调整，单独部署数据库的服务器，可以优先将更大的磁盘挂载到数据存储目录。一般业务场景使用的服务器，将磁盘挂载到 /home 目录即可***</span></span>
<span class="line"><span style="color:#6F42C1;">cat</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&gt;&gt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/etc/fstab</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&lt;&lt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">EOF</span></span>
<span class="line"></span>
<span class="line"><span style="color:#032F62;">UUID=9d87a2ea-5543-46c2-8068-492f4d73aaaa /home                   ext4    defaults        0 0</span></span>
<span class="line"><span style="color:#032F62;">EOF</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 依据 /etc/fstab 的内容，自动挂载设备</span></span>
<span class="line"><span style="color:#6F42C1;">mount</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-a</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 确认磁盘挂载情况</span></span>
<span class="line"><span style="color:#6F42C1;">df</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-h</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="_4-创建交换分区" tabindex="-1">4. 创建交换分区 <a class="header-anchor" href="#_4-创建交换分区" aria-label="Permalink to &quot;4\\. 创建交换分区&quot;">​</a></h3><blockquote><p>交换分区大小，根据实际需求来创建。一般来情况，如果物理内存是16G，可以设置同等大小16G的swap空间。多机部署环境，建议每台机器都要检查下交换分区配置信息。</p></blockquote><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 先确认下内存情况，交换区没设置，默认大小为0</span></span>
<span class="line"><span style="color:#B392F0;">free</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-h</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 先关闭所有交换区</span></span>
<span class="line"><span style="color:#B392F0;">swapoff</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-a</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 设置交换区大小，此处为16G，***交换区大小根据实际情况设置***</span></span>
<span class="line"><span style="color:#B392F0;">dd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">if=/dev/zero</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">of=/var/swapfile</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">bs=</span><span style="color:#79B8FF;">1</span><span style="color:#9ECBFF;">M</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">count=</span><span style="color:#79B8FF;">16384</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 格式化为 swap 分区文件</span></span>
<span class="line"><span style="color:#B392F0;">mkswap</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/var/swapfile</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 调整为更安全的权限</span></span>
<span class="line"><span style="color:#B392F0;">chmod</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0600</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/var/swapfile</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 启用交换区</span></span>
<span class="line"><span style="color:#B392F0;">swapon</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/var/swapfile</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看交换文件 UUID</span></span>
<span class="line"><span style="color:#B392F0;">blkid</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">UUID</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/var/swapfile</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 修改 /etc/fstab</span></span>
<span class="line"><span style="color:#6A737D;"># ***以下UUID根据实际情况修改***</span></span>
<span class="line"><span style="color:#B392F0;">cat</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&gt;&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/etc/fstab</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;&lt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">EOF</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF;">UUID=88306341-9a78-41c7-9831-821cd1e51ca2 swap                   swap    defaults        0 0</span></span>
<span class="line"><span style="color:#9ECBFF;">EOF</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 确认交换区生效情况</span></span>
<span class="line"><span style="color:#B392F0;">free</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-h</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 先确认下内存情况，交换区没设置，默认大小为0</span></span>
<span class="line"><span style="color:#6F42C1;">free</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-h</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 先关闭所有交换区</span></span>
<span class="line"><span style="color:#6F42C1;">swapoff</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-a</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 设置交换区大小，此处为16G，***交换区大小根据实际情况设置***</span></span>
<span class="line"><span style="color:#6F42C1;">dd</span><span style="color:#24292E;"> </span><span style="color:#032F62;">if=/dev/zero</span><span style="color:#24292E;"> </span><span style="color:#032F62;">of=/var/swapfile</span><span style="color:#24292E;"> </span><span style="color:#032F62;">bs=</span><span style="color:#005CC5;">1</span><span style="color:#032F62;">M</span><span style="color:#24292E;"> </span><span style="color:#032F62;">count=</span><span style="color:#005CC5;">16384</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 格式化为 swap 分区文件</span></span>
<span class="line"><span style="color:#6F42C1;">mkswap</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/var/swapfile</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 调整为更安全的权限</span></span>
<span class="line"><span style="color:#6F42C1;">chmod</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0600</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/var/swapfile</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 启用交换区</span></span>
<span class="line"><span style="color:#6F42C1;">swapon</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/var/swapfile</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看交换文件 UUID</span></span>
<span class="line"><span style="color:#6F42C1;">blkid</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">UUID</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/var/swapfile</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 修改 /etc/fstab</span></span>
<span class="line"><span style="color:#6A737D;"># ***以下UUID根据实际情况修改***</span></span>
<span class="line"><span style="color:#6F42C1;">cat</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&gt;&gt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/etc/fstab</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&lt;&lt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">EOF</span></span>
<span class="line"></span>
<span class="line"><span style="color:#032F62;">UUID=88306341-9a78-41c7-9831-821cd1e51ca2 swap                   swap    defaults        0 0</span></span>
<span class="line"><span style="color:#032F62;">EOF</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 确认交换区生效情况</span></span>
<span class="line"><span style="color:#6F42C1;">free</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-h</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h3 id="_5-安装内部下载工具" tabindex="-1">5. 安装内部下载工具 <a class="header-anchor" href="#_5-安装内部下载工具" aria-label="Permalink to &quot;5\\. 安装内部下载工具&quot;">​</a></h3><blockquote><p>该工具用于改善 <code>svn export</code> 单文件下载体验，显示下载进度。如果不安装，也可以用 <code>svn export</code> 命令替代</p></blockquote><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 安装 svn 命令</span></span>
<span class="line"><span style="color:#B392F0;">yum</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-y</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">svn</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 初次使用 svn 命令，会要求输入账号密码，默认以当前系统登录用户尝试登录，会要求输入 root 用户的 svn 密码。此时，直接回车跳过即可。</span></span>
<span class="line"><span style="color:#6A737D;"># 跳过后会要求输入 svn 的用户名和密码，输入完毕提示是否保存密码，***建议选择 yes 保存密码，方便后续操作***</span></span>
<span class="line"><span style="color:#6A737D;"># </span></span>
<span class="line"><span style="color:#6A737D;"># 部署结束，可以使用以下命令清除保存的 svn 账号信息</span></span>
<span class="line"><span style="color:#6A737D;"># rm -rf ~/.subversion/auth</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 使用 svn 命令下载</span></span>
<span class="line"><span style="color:#B392F0;">mkdir</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">~/bin</span></span>
<span class="line"><span style="color:#B392F0;">svn</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E5%B7%A5%E5%85%B7/svn_exporter/svn_exporter</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">~/bin/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 设置执行权限</span></span>
<span class="line"><span style="color:#B392F0;">chmod</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">+x</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">~/bin/svn_exporter</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 添加到 PATH 并应用（可选，多数系统默认已将 ~/bin 添加到PATH，无需重复操作）</span></span>
<span class="line"><span style="color:#B392F0;">cat</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&gt;&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">~/.bash_profile</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;&lt;</span><span style="color:#E1E4E8;"> &#39;</span><span style="color:#9ECBFF;">EOF</span><span style="color:#E1E4E8;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF;">export PATH=$PATH:$HOME/bin</span></span>
<span class="line"><span style="color:#9ECBFF;">EOF</span></span>
<span class="line"><span style="color:#79B8FF;">source</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">~/.bash_profile</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 安装 svn 命令</span></span>
<span class="line"><span style="color:#6F42C1;">yum</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-y</span><span style="color:#24292E;"> </span><span style="color:#032F62;">svn</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 初次使用 svn 命令，会要求输入账号密码，默认以当前系统登录用户尝试登录，会要求输入 root 用户的 svn 密码。此时，直接回车跳过即可。</span></span>
<span class="line"><span style="color:#6A737D;"># 跳过后会要求输入 svn 的用户名和密码，输入完毕提示是否保存密码，***建议选择 yes 保存密码，方便后续操作***</span></span>
<span class="line"><span style="color:#6A737D;"># </span></span>
<span class="line"><span style="color:#6A737D;"># 部署结束，可以使用以下命令清除保存的 svn 账号信息</span></span>
<span class="line"><span style="color:#6A737D;"># rm -rf ~/.subversion/auth</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 使用 svn 命令下载</span></span>
<span class="line"><span style="color:#6F42C1;">mkdir</span><span style="color:#24292E;"> </span><span style="color:#032F62;">~/bin</span></span>
<span class="line"><span style="color:#6F42C1;">svn</span><span style="color:#24292E;"> </span><span style="color:#032F62;">export</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E5%B7%A5%E5%85%B7/svn_exporter/svn_exporter</span><span style="color:#24292E;"> </span><span style="color:#032F62;">~/bin/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 设置执行权限</span></span>
<span class="line"><span style="color:#6F42C1;">chmod</span><span style="color:#24292E;"> </span><span style="color:#032F62;">+x</span><span style="color:#24292E;"> </span><span style="color:#032F62;">~/bin/svn_exporter</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 添加到 PATH 并应用（可选，多数系统默认已将 ~/bin 添加到PATH，无需重复操作）</span></span>
<span class="line"><span style="color:#6F42C1;">cat</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&gt;&gt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">~/.bash_profile</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&lt;&lt;</span><span style="color:#24292E;"> &#39;</span><span style="color:#032F62;">EOF</span><span style="color:#24292E;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#032F62;">export PATH=$PATH:$HOME/bin</span></span>
<span class="line"><span style="color:#032F62;">EOF</span></span>
<span class="line"><span style="color:#005CC5;">source</span><span style="color:#24292E;"> </span><span style="color:#032F62;">~/.bash_profile</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h2 id="二、安装基础服务" tabindex="-1">二、安装基础服务 <a class="header-anchor" href="#二、安装基础服务" aria-label="Permalink to &quot;二、安装基础服务&quot;">​</a></h2><h3 id="_1-安装jdk" tabindex="-1">1. 安装JDK <a class="header-anchor" href="#_1-安装jdk" aria-label="Permalink to &quot;1\\. 安装JDK&quot;">​</a></h3><blockquote><p>运行java后端服务的机器，需要先安装JDK环境</p></blockquote><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 切换到临时目录进行操作</span></span>
<span class="line"><span style="color:#79B8FF;">cd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp</span></span>
<span class="line"><span style="color:#6A737D;"># 下载 rpm 包</span></span>
<span class="line"><span style="color:#B392F0;">svn_exporter</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E5%AE%89%E8%A3%85%E5%8C%85/jdk-8u351-linux-x64.rpm</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装</span></span>
<span class="line"><span style="color:#B392F0;">rpm</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-ivh</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">jdk-8u351-linux-x64.rpm</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 确认安装情况</span></span>
<span class="line"><span style="color:#B392F0;">java</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-version</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 切换到临时目录进行操作</span></span>
<span class="line"><span style="color:#005CC5;">cd</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp</span></span>
<span class="line"><span style="color:#6A737D;"># 下载 rpm 包</span></span>
<span class="line"><span style="color:#6F42C1;">svn_exporter</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E5%AE%89%E8%A3%85%E5%8C%85/jdk-8u351-linux-x64.rpm</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装</span></span>
<span class="line"><span style="color:#6F42C1;">rpm</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-ivh</span><span style="color:#24292E;"> </span><span style="color:#032F62;">jdk-8u351-linux-x64.rpm</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 确认安装情况</span></span>
<span class="line"><span style="color:#6F42C1;">java</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-version</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="_2-安装postgresql" tabindex="-1">2. 安装postgresql <a class="header-anchor" href="#_2-安装postgresql" aria-label="Permalink to &quot;2\\. 安装postgresql&quot;">​</a></h3><blockquote><p>自建数据库的机器，参考以下步骤安装 postgresql</p></blockquote><h4 id="注意事项" tabindex="-1">注意事项 <a class="header-anchor" href="#注意事项" aria-label="Permalink to &quot;注意事项&quot;">​</a></h4><ul><li>platformserv 服务部署的机器，需要安装同版本 postgresql 客户端</li><li><em><strong>智慧100推荐使用 postgresql10，高版本 postgresql 无法安装相同版本的 postgis 插件，缺失的函数可能需要额外兼容处理</strong></em></li></ul><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 安装 postgresql 服务端和客户端</span></span>
<span class="line"><span style="color:#B392F0;">sudo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">yum</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-y</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://download.postgresql.org/pub/repos/yum/reporpms/EL-7-x86_64/pgdg-redhat-repo-latest.noarch.rpm</span></span>
<span class="line"><span style="color:#B392F0;">sudo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">yum</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-y</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">postgresql10-server</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># ***以下安装步骤仅仅服务端需要执行***</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 设置并初始化数据目录</span></span>
<span class="line"><span style="color:#B392F0;">mkdir</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/home/data/pg_data</span></span>
<span class="line"><span style="color:#B392F0;">chmod</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">700</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/home/data/pg_data</span></span>
<span class="line"><span style="color:#B392F0;">chown</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">postgres:postgres</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/home/data/pg_data</span></span>
<span class="line"><span style="color:#B392F0;">sudo</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-u</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">postgres</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/usr/pgsql-10/bin/pg_ctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">initdb</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-D</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/home/data/pg_data</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 覆盖 PGDATA 环境变量</span></span>
<span class="line"><span style="color:#B392F0;">mkdir</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/etc/systemd/system/postgresql-10.service.d</span></span>
<span class="line"><span style="color:#B392F0;">cat</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/etc/systemd/system/postgresql-10.service.d/override.conf</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;&lt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">EOF</span></span>
<span class="line"><span style="color:#9ECBFF;">[Service]</span></span>
<span class="line"><span style="color:#9ECBFF;">Environment=PGDATA=/home/data/pg_data</span></span>
<span class="line"><span style="color:#9ECBFF;">EOF</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 启动服务</span></span>
<span class="line"><span style="color:#B392F0;">systemctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">start</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">postgresql-10</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 设置开机启动</span></span>
<span class="line"><span style="color:#B392F0;">systemctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">enable</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">postgresql-10</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 切换到 postgres 用户修改数据库密码</span></span>
<span class="line"><span style="color:#6A737D;"># ***数据库密码根据实际情况进行设置***</span></span>
<span class="line"><span style="color:#6A737D;"># ***此示例密码与nacos归档配置的数据库密码一致，可全局搜索此密码批量调整nacos配置***</span></span>
<span class="line"><span style="color:#B392F0;">sudo</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-u</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">postgres</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">psql</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;alter user postgres with password &#39;MuhBiyN6agQ9og4c18YM&#39;&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 开放远程访问</span></span>
<span class="line"><span style="color:#6A737D;"># 设置 listen_addresses = &#39;*&#39;</span></span>
<span class="line"><span style="color:#B392F0;">sed</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-i</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;s/#listen_addresses = &#39;localhost&#39;/listen_addresses = &#39;*&#39;/g&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/home/data/pg_data/postgresql.conf</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 开启信任连接</span></span>
<span class="line"><span style="color:#6A737D;"># 添加网络请求为信任连接</span></span>
<span class="line"><span style="color:#B392F0;">cat</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&gt;&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/home/data/pg_data/pg_hba.conf</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;&lt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">EOF</span></span>
<span class="line"><span style="color:#9ECBFF;"># Allow connections from network</span></span>
<span class="line"><span style="color:#9ECBFF;">host    all             all             0.0.0.0/0               md5</span></span>
<span class="line"><span style="color:#9ECBFF;">EOF</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 修改最大连接数</span></span>
<span class="line"><span style="color:#6A737D;"># 设置最大连接数 max_connections = 1000</span></span>
<span class="line"><span style="color:#6A737D;"># 最大连接数按需设置即可，合理使用连接池可减少连接数的使用</span></span>
<span class="line"><span style="color:#B392F0;">sed</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-i</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;s/max_connections = 100/max_connections = 1000/g&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/home/data/pg_data/postgresql.conf</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 重启服务</span></span>
<span class="line"><span style="color:#B392F0;">systemctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">restart</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">postgresql-10</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装 postgis 插件</span></span>
<span class="line"><span style="color:#B392F0;">yum</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-y</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">postgis23_10</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># postgresql13 只能安装 3.0 以上版本的 postgis，部分函数命名有调整，可能需要额外兼容处理，如 ST_Distance_Sphere 函数。兼容方式可参考文末 FAQ 部分</span></span>
<span class="line"><span style="color:#6A737D;"># yum install -y postgis30_13</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 安装 postgresql 服务端和客户端</span></span>
<span class="line"><span style="color:#6F42C1;">sudo</span><span style="color:#24292E;"> </span><span style="color:#032F62;">yum</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-y</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://download.postgresql.org/pub/repos/yum/reporpms/EL-7-x86_64/pgdg-redhat-repo-latest.noarch.rpm</span></span>
<span class="line"><span style="color:#6F42C1;">sudo</span><span style="color:#24292E;"> </span><span style="color:#032F62;">yum</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-y</span><span style="color:#24292E;"> </span><span style="color:#032F62;">postgresql10-server</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># ***以下安装步骤仅仅服务端需要执行***</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 设置并初始化数据目录</span></span>
<span class="line"><span style="color:#6F42C1;">mkdir</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/home/data/pg_data</span></span>
<span class="line"><span style="color:#6F42C1;">chmod</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">700</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/home/data/pg_data</span></span>
<span class="line"><span style="color:#6F42C1;">chown</span><span style="color:#24292E;"> </span><span style="color:#032F62;">postgres:postgres</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/home/data/pg_data</span></span>
<span class="line"><span style="color:#6F42C1;">sudo</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-u</span><span style="color:#24292E;"> </span><span style="color:#032F62;">postgres</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/usr/pgsql-10/bin/pg_ctl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">initdb</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-D</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/home/data/pg_data</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 覆盖 PGDATA 环境变量</span></span>
<span class="line"><span style="color:#6F42C1;">mkdir</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/etc/systemd/system/postgresql-10.service.d</span></span>
<span class="line"><span style="color:#6F42C1;">cat</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/etc/systemd/system/postgresql-10.service.d/override.conf</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&lt;&lt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">EOF</span></span>
<span class="line"><span style="color:#032F62;">[Service]</span></span>
<span class="line"><span style="color:#032F62;">Environment=PGDATA=/home/data/pg_data</span></span>
<span class="line"><span style="color:#032F62;">EOF</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 启动服务</span></span>
<span class="line"><span style="color:#6F42C1;">systemctl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">start</span><span style="color:#24292E;"> </span><span style="color:#032F62;">postgresql-10</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 设置开机启动</span></span>
<span class="line"><span style="color:#6F42C1;">systemctl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">enable</span><span style="color:#24292E;"> </span><span style="color:#032F62;">postgresql-10</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 切换到 postgres 用户修改数据库密码</span></span>
<span class="line"><span style="color:#6A737D;"># ***数据库密码根据实际情况进行设置***</span></span>
<span class="line"><span style="color:#6A737D;"># ***此示例密码与nacos归档配置的数据库密码一致，可全局搜索此密码批量调整nacos配置***</span></span>
<span class="line"><span style="color:#6F42C1;">sudo</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-u</span><span style="color:#24292E;"> </span><span style="color:#032F62;">postgres</span><span style="color:#24292E;"> </span><span style="color:#032F62;">psql</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;alter user postgres with password &#39;MuhBiyN6agQ9og4c18YM&#39;&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 开放远程访问</span></span>
<span class="line"><span style="color:#6A737D;"># 设置 listen_addresses = &#39;*&#39;</span></span>
<span class="line"><span style="color:#6F42C1;">sed</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-i</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;s/#listen_addresses = &#39;localhost&#39;/listen_addresses = &#39;*&#39;/g&quot;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/home/data/pg_data/postgresql.conf</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 开启信任连接</span></span>
<span class="line"><span style="color:#6A737D;"># 添加网络请求为信任连接</span></span>
<span class="line"><span style="color:#6F42C1;">cat</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&gt;&gt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/home/data/pg_data/pg_hba.conf</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&lt;&lt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">EOF</span></span>
<span class="line"><span style="color:#032F62;"># Allow connections from network</span></span>
<span class="line"><span style="color:#032F62;">host    all             all             0.0.0.0/0               md5</span></span>
<span class="line"><span style="color:#032F62;">EOF</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 修改最大连接数</span></span>
<span class="line"><span style="color:#6A737D;"># 设置最大连接数 max_connections = 1000</span></span>
<span class="line"><span style="color:#6A737D;"># 最大连接数按需设置即可，合理使用连接池可减少连接数的使用</span></span>
<span class="line"><span style="color:#6F42C1;">sed</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-i</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;s/max_connections = 100/max_connections = 1000/g&#39;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/home/data/pg_data/postgresql.conf</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 重启服务</span></span>
<span class="line"><span style="color:#6F42C1;">systemctl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">restart</span><span style="color:#24292E;"> </span><span style="color:#032F62;">postgresql-10</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装 postgis 插件</span></span>
<span class="line"><span style="color:#6F42C1;">yum</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-y</span><span style="color:#24292E;"> </span><span style="color:#032F62;">postgis23_10</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># postgresql13 只能安装 3.0 以上版本的 postgis，部分函数命名有调整，可能需要额外兼容处理，如 ST_Distance_Sphere 函数。兼容方式可参考文末 FAQ 部分</span></span>
<span class="line"><span style="color:#6A737D;"># yum install -y postgis30_13</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br></div></div><h3 id="_3-安装redis" tabindex="-1">3. 安装redis <a class="header-anchor" href="#_3-安装redis" aria-label="Permalink to &quot;3\\. 安装redis&quot;">​</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 安装依赖</span></span>
<span class="line"><span style="color:#B392F0;">yum</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-y</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">gcc</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 获取安装包</span></span>
<span class="line"><span style="color:#79B8FF;">cd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp</span></span>
<span class="line"><span style="color:#B392F0;">wget</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://download.redis.io/releases/redis-6.2.7.tar.gz</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 解压并安装</span></span>
<span class="line"><span style="color:#B392F0;">tar</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-xvf</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">redis-6.2.7.tar.gz</span></span>
<span class="line"><span style="color:#79B8FF;">cd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">redis-6.2.7</span></span>
<span class="line"><span style="color:#B392F0;">make</span><span style="color:#E1E4E8;"> &amp;&amp; </span><span style="color:#B392F0;">make</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 配置 apaas redis</span></span>
<span class="line"><span style="color:#B392F0;">mkdir</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/etc/redis</span></span>
<span class="line"><span style="color:#B392F0;">cp</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">./redis.conf</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/etc/redis/</span></span>
<span class="line"><span style="color:#6A737D;"># 调整配置文件</span></span>
<span class="line"><span style="color:#6A737D;"># 注释掉 bind 127.0.0.1 -::1</span></span>
<span class="line"><span style="color:#B392F0;">sed</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-i</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;s/bind 127.0.0.1 -::1/#bind 127.0.0.1 -::1/g&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/etc/redis/redis.conf</span></span>
<span class="line"><span style="color:#6A737D;"># 设置 protected-mode no</span></span>
<span class="line"><span style="color:#B392F0;">sed</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-i</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;s/protected-mode yes/protected-mode no/g&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/etc/redis/redis.conf</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 配置 systemd</span></span>
<span class="line"><span style="color:#B392F0;">cat</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/lib/systemd/system/redis.service</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;&lt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">EOF</span></span>
<span class="line"><span style="color:#9ECBFF;">[Unit]</span></span>
<span class="line"><span style="color:#9ECBFF;">Description=Redis Server 6.2.7</span></span>
<span class="line"><span style="color:#9ECBFF;">After=network.target</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF;">[Service]</span></span>
<span class="line"><span style="color:#9ECBFF;">ExecStart=/usr/local/bin/redis-server /etc/redis/redis.conf</span></span>
<span class="line"><span style="color:#9ECBFF;">ExecStop=/usr/local/bin/redis-cli -h 127.0.0.1 -p 6379 shutdown</span></span>
<span class="line"><span style="color:#9ECBFF;">User=root</span></span>
<span class="line"><span style="color:#9ECBFF;">Group=root</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF;">[Install]</span></span>
<span class="line"><span style="color:#9ECBFF;">WantedBy=multi-user.target</span></span>
<span class="line"><span style="color:#9ECBFF;">EOF</span></span>
<span class="line"><span style="color:#6A737D;"># 开机启动</span></span>
<span class="line"><span style="color:#B392F0;">systemctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">enable</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">redis</span></span>
<span class="line"><span style="color:#6A737D;"># 启动</span></span>
<span class="line"><span style="color:#B392F0;">systemctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">start</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">redis</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 安装依赖</span></span>
<span class="line"><span style="color:#6F42C1;">yum</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-y</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span><span style="color:#24292E;"> </span><span style="color:#032F62;">gcc</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 获取安装包</span></span>
<span class="line"><span style="color:#005CC5;">cd</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp</span></span>
<span class="line"><span style="color:#6F42C1;">wget</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://download.redis.io/releases/redis-6.2.7.tar.gz</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 解压并安装</span></span>
<span class="line"><span style="color:#6F42C1;">tar</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-xvf</span><span style="color:#24292E;"> </span><span style="color:#032F62;">redis-6.2.7.tar.gz</span></span>
<span class="line"><span style="color:#005CC5;">cd</span><span style="color:#24292E;"> </span><span style="color:#032F62;">redis-6.2.7</span></span>
<span class="line"><span style="color:#6F42C1;">make</span><span style="color:#24292E;"> &amp;&amp; </span><span style="color:#6F42C1;">make</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 配置 apaas redis</span></span>
<span class="line"><span style="color:#6F42C1;">mkdir</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/etc/redis</span></span>
<span class="line"><span style="color:#6F42C1;">cp</span><span style="color:#24292E;"> </span><span style="color:#032F62;">./redis.conf</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/etc/redis/</span></span>
<span class="line"><span style="color:#6A737D;"># 调整配置文件</span></span>
<span class="line"><span style="color:#6A737D;"># 注释掉 bind 127.0.0.1 -::1</span></span>
<span class="line"><span style="color:#6F42C1;">sed</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-i</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;s/bind 127.0.0.1 -::1/#bind 127.0.0.1 -::1/g&#39;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/etc/redis/redis.conf</span></span>
<span class="line"><span style="color:#6A737D;"># 设置 protected-mode no</span></span>
<span class="line"><span style="color:#6F42C1;">sed</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-i</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;s/protected-mode yes/protected-mode no/g&#39;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/etc/redis/redis.conf</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 配置 systemd</span></span>
<span class="line"><span style="color:#6F42C1;">cat</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/lib/systemd/system/redis.service</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&lt;&lt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">EOF</span></span>
<span class="line"><span style="color:#032F62;">[Unit]</span></span>
<span class="line"><span style="color:#032F62;">Description=Redis Server 6.2.7</span></span>
<span class="line"><span style="color:#032F62;">After=network.target</span></span>
<span class="line"></span>
<span class="line"><span style="color:#032F62;">[Service]</span></span>
<span class="line"><span style="color:#032F62;">ExecStart=/usr/local/bin/redis-server /etc/redis/redis.conf</span></span>
<span class="line"><span style="color:#032F62;">ExecStop=/usr/local/bin/redis-cli -h 127.0.0.1 -p 6379 shutdown</span></span>
<span class="line"><span style="color:#032F62;">User=root</span></span>
<span class="line"><span style="color:#032F62;">Group=root</span></span>
<span class="line"></span>
<span class="line"><span style="color:#032F62;">[Install]</span></span>
<span class="line"><span style="color:#032F62;">WantedBy=multi-user.target</span></span>
<span class="line"><span style="color:#032F62;">EOF</span></span>
<span class="line"><span style="color:#6A737D;"># 开机启动</span></span>
<span class="line"><span style="color:#6F42C1;">systemctl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">enable</span><span style="color:#24292E;"> </span><span style="color:#032F62;">redis</span></span>
<span class="line"><span style="color:#6A737D;"># 启动</span></span>
<span class="line"><span style="color:#6F42C1;">systemctl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">start</span><span style="color:#24292E;"> </span><span style="color:#032F62;">redis</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><h3 id="_4-安装rabbitmq" tabindex="-1">4. 安装RabbitMQ <a class="header-anchor" href="#_4-安装rabbitmq" aria-label="Permalink to &quot;4\\. 安装RabbitMQ&quot;">​</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># erlang 安装</span></span>
<span class="line"><span style="color:#B392F0;">yum</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-y</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">gcc</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#B392F0;">yum</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-y</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ncurses-devel</span></span>
<span class="line"><span style="color:#B392F0;">yum</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-y</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">openssl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">openssl-devel</span></span>
<span class="line"><span style="color:#B392F0;">yum</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-y</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">socat</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 从 svn 下载安装包</span></span>
<span class="line"><span style="color:#79B8FF;">cd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp</span></span>
<span class="line"><span style="color:#B392F0;">svn_exporter</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E5%AE%89%E8%A3%85%E5%8C%85/otp_src_22.0.tar.gz</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 解压并安装</span></span>
<span class="line"><span style="color:#B392F0;">tar</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-xvf</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">otp_src_22.0.tar.gz</span></span>
<span class="line"><span style="color:#79B8FF;">cd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">otp_src_22.0</span></span>
<span class="line"><span style="color:#B392F0;">./configure</span></span>
<span class="line"><span style="color:#B392F0;">make</span><span style="color:#E1E4E8;"> &amp;&amp; </span><span style="color:#B392F0;">make</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 修改环境变量</span></span>
<span class="line"><span style="color:#B392F0;">cat</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&gt;&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/etc/profile</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;&lt;</span><span style="color:#E1E4E8;"> &#39;</span><span style="color:#9ECBFF;">EOF</span><span style="color:#E1E4E8;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF;">export PATH=$PATH:/usr/local/lib/erlang/bin</span></span>
<span class="line"><span style="color:#9ECBFF;">EOF</span></span>
<span class="line"><span style="color:#79B8FF;">source</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/etc/profile</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 下载并安装 rabbitmq</span></span>
<span class="line"><span style="color:#79B8FF;">cd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp</span></span>
<span class="line"><span style="color:#B392F0;">svn_exporter</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E5%AE%89%E8%A3%85%E5%8C%85/rabbitmq-server-3.7.17-1.el7.noarch.rpm</span></span>
<span class="line"><span style="color:#B392F0;">rpm</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-ivh</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--nodeps</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">rabbitmq-server-3.7.17-1.el7.noarch.rpm</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># hostname 为数字时启动 rabbitmq 将会失败，这时需要修改 hostname 为其他名字。/etc/hosts 按需修改。以下示例仅供参考</span></span>
<span class="line"><span style="color:#6A737D;"># hostnamectl set-hostname backend1</span></span>
<span class="line"><span style="color:#6A737D;"># sed -i &#39;s/127.0.0.1\\t0001\\t0001/127.0.0.1\\tbackend1\\tbackend1/g&#39; /etc/hosts</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 启动服务</span></span>
<span class="line"><span style="color:#B392F0;">systemctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">start</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">rabbitmq-server</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 启用 rabbitmq_management 插件</span></span>
<span class="line"><span style="color:#B392F0;">rabbitmq-plugins</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">enable</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">rabbitmq_management</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 配置 rabbitmq</span></span>
<span class="line"><span style="color:#6A737D;">#   新增用户</span></span>
<span class="line"><span style="color:#B392F0;">rabbitmqctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">add_user</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ipaas</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ipaas</span></span>
<span class="line"><span style="color:#6A737D;">#   配置角色</span></span>
<span class="line"><span style="color:#B392F0;">rabbitmqctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">set_user_tags</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ipaas</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">administrator</span></span>
<span class="line"><span style="color:#6A737D;">#   配置权限</span></span>
<span class="line"><span style="color:#B392F0;">rabbitmqctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">set_permissions</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;/&#39;</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">ipaas</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;.*&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;.*&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;.*&#39;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># erlang 安装</span></span>
<span class="line"><span style="color:#6F42C1;">yum</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-y</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span><span style="color:#24292E;"> </span><span style="color:#032F62;">gcc</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#6F42C1;">yum</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-y</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ncurses-devel</span></span>
<span class="line"><span style="color:#6F42C1;">yum</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-y</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span><span style="color:#24292E;"> </span><span style="color:#032F62;">openssl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">openssl-devel</span></span>
<span class="line"><span style="color:#6F42C1;">yum</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-y</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span><span style="color:#24292E;"> </span><span style="color:#032F62;">socat</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 从 svn 下载安装包</span></span>
<span class="line"><span style="color:#005CC5;">cd</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp</span></span>
<span class="line"><span style="color:#6F42C1;">svn_exporter</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E5%AE%89%E8%A3%85%E5%8C%85/otp_src_22.0.tar.gz</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 解压并安装</span></span>
<span class="line"><span style="color:#6F42C1;">tar</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-xvf</span><span style="color:#24292E;"> </span><span style="color:#032F62;">otp_src_22.0.tar.gz</span></span>
<span class="line"><span style="color:#005CC5;">cd</span><span style="color:#24292E;"> </span><span style="color:#032F62;">otp_src_22.0</span></span>
<span class="line"><span style="color:#6F42C1;">./configure</span></span>
<span class="line"><span style="color:#6F42C1;">make</span><span style="color:#24292E;"> &amp;&amp; </span><span style="color:#6F42C1;">make</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 修改环境变量</span></span>
<span class="line"><span style="color:#6F42C1;">cat</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&gt;&gt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/etc/profile</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&lt;&lt;</span><span style="color:#24292E;"> &#39;</span><span style="color:#032F62;">EOF</span><span style="color:#24292E;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#032F62;">export PATH=$PATH:/usr/local/lib/erlang/bin</span></span>
<span class="line"><span style="color:#032F62;">EOF</span></span>
<span class="line"><span style="color:#005CC5;">source</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/etc/profile</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 下载并安装 rabbitmq</span></span>
<span class="line"><span style="color:#005CC5;">cd</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp</span></span>
<span class="line"><span style="color:#6F42C1;">svn_exporter</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E5%AE%89%E8%A3%85%E5%8C%85/rabbitmq-server-3.7.17-1.el7.noarch.rpm</span></span>
<span class="line"><span style="color:#6F42C1;">rpm</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-ivh</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--nodeps</span><span style="color:#24292E;"> </span><span style="color:#032F62;">rabbitmq-server-3.7.17-1.el7.noarch.rpm</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># hostname 为数字时启动 rabbitmq 将会失败，这时需要修改 hostname 为其他名字。/etc/hosts 按需修改。以下示例仅供参考</span></span>
<span class="line"><span style="color:#6A737D;"># hostnamectl set-hostname backend1</span></span>
<span class="line"><span style="color:#6A737D;"># sed -i &#39;s/127.0.0.1\\t0001\\t0001/127.0.0.1\\tbackend1\\tbackend1/g&#39; /etc/hosts</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 启动服务</span></span>
<span class="line"><span style="color:#6F42C1;">systemctl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">start</span><span style="color:#24292E;"> </span><span style="color:#032F62;">rabbitmq-server</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 启用 rabbitmq_management 插件</span></span>
<span class="line"><span style="color:#6F42C1;">rabbitmq-plugins</span><span style="color:#24292E;"> </span><span style="color:#032F62;">enable</span><span style="color:#24292E;"> </span><span style="color:#032F62;">rabbitmq_management</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 配置 rabbitmq</span></span>
<span class="line"><span style="color:#6A737D;">#   新增用户</span></span>
<span class="line"><span style="color:#6F42C1;">rabbitmqctl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">add_user</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ipaas</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ipaas</span></span>
<span class="line"><span style="color:#6A737D;">#   配置角色</span></span>
<span class="line"><span style="color:#6F42C1;">rabbitmqctl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">set_user_tags</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ipaas</span><span style="color:#24292E;"> </span><span style="color:#032F62;">administrator</span></span>
<span class="line"><span style="color:#6A737D;">#   配置权限</span></span>
<span class="line"><span style="color:#6F42C1;">rabbitmqctl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">set_permissions</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;/&#39;</span><span style="color:#24292E;">  </span><span style="color:#032F62;">ipaas</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;.*&#39;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;.*&#39;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;.*&#39;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br></div></div><h3 id="_5-安装openresty" tabindex="-1">5. 安装openresty <a class="header-anchor" href="#_5-安装openresty" aria-label="Permalink to &quot;5\\. 安装openresty&quot;">​</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#79B8FF;">cd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp</span></span>
<span class="line"><span style="color:#B392F0;">wget</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://openresty.org/package/centos/openresty.repo</span></span>
<span class="line"><span style="color:#B392F0;">sudo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">mv</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">openresty.repo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/etc/yum.repos.d/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">sudo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">yum</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">check-update</span></span>
<span class="line"><span style="color:#B392F0;">sudo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">yum</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-y</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">openresty</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 从 svn 归档应用配置</span></span>
<span class="line"><span style="color:#6A737D;"># /usr/local/share/lua/</span></span>
<span class="line"><span style="color:#B392F0;">svn_exporter</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/openresty/lua.zip</span></span>
<span class="line"><span style="color:#B392F0;">unzip</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-d</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/usr/local/share/</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">lua.zip</span></span>
<span class="line"><span style="color:#6A737D;"># lualib/resty/</span></span>
<span class="line"><span style="color:#B392F0;">svn_exporter</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/openresty/lualib/resty/http.lua</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/usr/local/openresty/lualib/resty/</span></span>
<span class="line"><span style="color:#B392F0;">svn_exporter</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/openresty/lualib/resty/http_headers.lua</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/usr/local/openresty/lualib/resty/</span></span>
<span class="line"><span style="color:#B392F0;">svn_exporter</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/openresty/lualib/resty/jit-uuid.lua</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/usr/local/openresty/lualib/resty/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># nginx.conf 和 script 目录下的配置，归档的为智慧100开发环境配置，不同环境会有差异，以下命令仅供参考</span></span>
<span class="line"><span style="color:#6A737D;"># 实际部署时，请将归档下载到本地后按需调整之后再同步到服务器上</span></span>
<span class="line"><span style="color:#6A737D;"># ***一般来说，智慧100 web前端，智慧100开发环境是部署在 7000 端口，实施环境是部署在 17000 端口，注意按需调整***</span></span>
<span class="line"><span style="color:#6A737D;"># nginx.conf</span></span>
<span class="line"><span style="color:#B392F0;">svn_exporter</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/openresty/nginx.conf</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/usr/local/openresty/nginx/conf/</span></span>
<span class="line"><span style="color:#6A737D;"># script/</span></span>
<span class="line"><span style="color:#B392F0;">svn_exporter</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E7%A8%8B%E5%BA%8F%E5%8C%85/nginx/scripts.zip</span></span>
<span class="line"><span style="color:#B392F0;">unzip</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-d</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/usr/local/openresty/nginx/</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">scripts.zip</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 启动 openresty</span></span>
<span class="line"><span style="color:#B392F0;">openresty</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#005CC5;">cd</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp</span></span>
<span class="line"><span style="color:#6F42C1;">wget</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://openresty.org/package/centos/openresty.repo</span></span>
<span class="line"><span style="color:#6F42C1;">sudo</span><span style="color:#24292E;"> </span><span style="color:#032F62;">mv</span><span style="color:#24292E;"> </span><span style="color:#032F62;">openresty.repo</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/etc/yum.repos.d/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">sudo</span><span style="color:#24292E;"> </span><span style="color:#032F62;">yum</span><span style="color:#24292E;"> </span><span style="color:#032F62;">check-update</span></span>
<span class="line"><span style="color:#6F42C1;">sudo</span><span style="color:#24292E;"> </span><span style="color:#032F62;">yum</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-y</span><span style="color:#24292E;"> </span><span style="color:#032F62;">openresty</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 从 svn 归档应用配置</span></span>
<span class="line"><span style="color:#6A737D;"># /usr/local/share/lua/</span></span>
<span class="line"><span style="color:#6F42C1;">svn_exporter</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/openresty/lua.zip</span></span>
<span class="line"><span style="color:#6F42C1;">unzip</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-d</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/usr/local/share/</span><span style="color:#24292E;"> </span><span style="color:#032F62;">lua.zip</span></span>
<span class="line"><span style="color:#6A737D;"># lualib/resty/</span></span>
<span class="line"><span style="color:#6F42C1;">svn_exporter</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/openresty/lualib/resty/http.lua</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/usr/local/openresty/lualib/resty/</span></span>
<span class="line"><span style="color:#6F42C1;">svn_exporter</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/openresty/lualib/resty/http_headers.lua</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/usr/local/openresty/lualib/resty/</span></span>
<span class="line"><span style="color:#6F42C1;">svn_exporter</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/openresty/lualib/resty/jit-uuid.lua</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/usr/local/openresty/lualib/resty/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># nginx.conf 和 script 目录下的配置，归档的为智慧100开发环境配置，不同环境会有差异，以下命令仅供参考</span></span>
<span class="line"><span style="color:#6A737D;"># 实际部署时，请将归档下载到本地后按需调整之后再同步到服务器上</span></span>
<span class="line"><span style="color:#6A737D;"># ***一般来说，智慧100 web前端，智慧100开发环境是部署在 7000 端口，实施环境是部署在 17000 端口，注意按需调整***</span></span>
<span class="line"><span style="color:#6A737D;"># nginx.conf</span></span>
<span class="line"><span style="color:#6F42C1;">svn_exporter</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/openresty/nginx.conf</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/usr/local/openresty/nginx/conf/</span></span>
<span class="line"><span style="color:#6A737D;"># script/</span></span>
<span class="line"><span style="color:#6F42C1;">svn_exporter</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E7%A8%8B%E5%BA%8F%E5%8C%85/nginx/scripts.zip</span></span>
<span class="line"><span style="color:#6F42C1;">unzip</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-d</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/usr/local/openresty/nginx/</span><span style="color:#24292E;"> </span><span style="color:#032F62;">scripts.zip</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 启动 openresty</span></span>
<span class="line"><span style="color:#6F42C1;">openresty</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h3 id="_6-安装nacos" tabindex="-1">6. 安装nacos <a class="header-anchor" href="#_6-安装nacos" aria-label="Permalink to &quot;6\\. 安装nacos&quot;">​</a></h3><blockquote><p>依赖 jdk 环境</p></blockquote><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 下载并安装</span></span>
<span class="line"><span style="color:#79B8FF;">cd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp</span></span>
<span class="line"><span style="color:#B392F0;">svn_exporter</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E5%AE%89%E8%A3%85%E5%8C%85/nacos-server-1.4.2.tar.gz</span></span>
<span class="line"><span style="color:#B392F0;">tar</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-xzvf</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nacos-server-1.4.2.tar.gz</span></span>
<span class="line"><span style="color:#B392F0;">mkdir</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/home/apaas/nacos</span></span>
<span class="line"><span style="color:#B392F0;">mv</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nacos</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/home/apaas/nacos/</span></span>
<span class="line"><span style="color:#79B8FF;">cd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/home/apaas/nacos/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 从归档获取启动脚本</span></span>
<span class="line"><span style="color:#B392F0;">svn_exporter</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/nacos/NACOS_operate.sh</span></span>
<span class="line"><span style="color:#B392F0;">chmod</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">+x</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">NACOS_operate.sh</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 启动服务</span></span>
<span class="line"><span style="color:#B392F0;">./NACOS_operate.sh</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">start</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 从 svn 下载 nacos 归档信息，解压后按需调整配置信息，然后重新打包后在web界面导入</span></span>
<span class="line"><span style="color:#6A737D;"># nacos 配置归档地址：https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E7%A8%8B%E5%BA%8F%E5%8C%85/nacos/nacos_config_export_20221123.zip</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 下载并安装</span></span>
<span class="line"><span style="color:#005CC5;">cd</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp</span></span>
<span class="line"><span style="color:#6F42C1;">svn_exporter</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E5%AE%89%E8%A3%85%E5%8C%85/nacos-server-1.4.2.tar.gz</span></span>
<span class="line"><span style="color:#6F42C1;">tar</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-xzvf</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nacos-server-1.4.2.tar.gz</span></span>
<span class="line"><span style="color:#6F42C1;">mkdir</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/home/apaas/nacos</span></span>
<span class="line"><span style="color:#6F42C1;">mv</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nacos</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/home/apaas/nacos/</span></span>
<span class="line"><span style="color:#005CC5;">cd</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/home/apaas/nacos/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 从归档获取启动脚本</span></span>
<span class="line"><span style="color:#6F42C1;">svn_exporter</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/nacos/NACOS_operate.sh</span></span>
<span class="line"><span style="color:#6F42C1;">chmod</span><span style="color:#24292E;"> </span><span style="color:#032F62;">+x</span><span style="color:#24292E;"> </span><span style="color:#032F62;">NACOS_operate.sh</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 启动服务</span></span>
<span class="line"><span style="color:#6F42C1;">./NACOS_operate.sh</span><span style="color:#24292E;"> </span><span style="color:#032F62;">start</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 从 svn 下载 nacos 归档信息，解压后按需调整配置信息，然后重新打包后在web界面导入</span></span>
<span class="line"><span style="color:#6A737D;"># nacos 配置归档地址：https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E7%A8%8B%E5%BA%8F%E5%8C%85/nacos/nacos_config_export_20221123.zip</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="_7-安装filebeat" tabindex="-1">7. 安装filebeat <a class="header-anchor" href="#_7-安装filebeat" aria-label="Permalink to &quot;7\\. 安装filebeat&quot;">​</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 下载并安装</span></span>
<span class="line"><span style="color:#79B8FF;">cd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp</span></span>
<span class="line"><span style="color:#B392F0;">wget</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://artifacts.elastic.co/downloads/beats/filebeat/filebeat-8.0.0-linux-x86_64.tar.gz</span></span>
<span class="line"><span style="color:#B392F0;">mkdir</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/home/filebeat/</span></span>
<span class="line"><span style="color:#B392F0;">tar</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-xzvf</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">filebeat-8.0.0-linux-x86_64.tar.gz</span></span>
<span class="line"><span style="color:#B392F0;">mv</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">filebeat-8.0.0-linux-x86_64</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/home/filebeat/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 配置</span></span>
<span class="line"><span style="color:#79B8FF;">cd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/home/filebeat/filebeat-8.0.0-linux-x86_64/</span></span>
<span class="line"><span style="color:#6A737D;"># 将启动脚本拷贝到安装目录</span></span>
<span class="line"><span style="color:#B392F0;">svn_exporter</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/filebeat/start.sh</span></span>
<span class="line"><span style="color:#6A737D;"># 将配置文件覆盖到安装目录</span></span>
<span class="line"><span style="color:#B392F0;">svn_exporter</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/filebeat/filebeat.yml</span></span>
<span class="line"><span style="color:#6A737D;"># 修改filebeat.yml，将最后一行的client_id修改为本机ip</span></span>
<span class="line"><span style="color:#B392F0;">sed</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-i</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;s/client_id: 172.16.3.111/client_id: $(</span><span style="color:#B392F0;">curl</span><span style="color:#9ECBFF;"> ifconfig.me)/g&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">filebeat.yml</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 启动</span></span>
<span class="line"><span style="color:#B392F0;">sh</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">./start.sh</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 下载并安装</span></span>
<span class="line"><span style="color:#005CC5;">cd</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp</span></span>
<span class="line"><span style="color:#6F42C1;">wget</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://artifacts.elastic.co/downloads/beats/filebeat/filebeat-8.0.0-linux-x86_64.tar.gz</span></span>
<span class="line"><span style="color:#6F42C1;">mkdir</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/home/filebeat/</span></span>
<span class="line"><span style="color:#6F42C1;">tar</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-xzvf</span><span style="color:#24292E;"> </span><span style="color:#032F62;">filebeat-8.0.0-linux-x86_64.tar.gz</span></span>
<span class="line"><span style="color:#6F42C1;">mv</span><span style="color:#24292E;"> </span><span style="color:#032F62;">filebeat-8.0.0-linux-x86_64</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/home/filebeat/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 配置</span></span>
<span class="line"><span style="color:#005CC5;">cd</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/home/filebeat/filebeat-8.0.0-linux-x86_64/</span></span>
<span class="line"><span style="color:#6A737D;"># 将启动脚本拷贝到安装目录</span></span>
<span class="line"><span style="color:#6F42C1;">svn_exporter</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/filebeat/start.sh</span></span>
<span class="line"><span style="color:#6A737D;"># 将配置文件覆盖到安装目录</span></span>
<span class="line"><span style="color:#6F42C1;">svn_exporter</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/filebeat/filebeat.yml</span></span>
<span class="line"><span style="color:#6A737D;"># 修改filebeat.yml，将最后一行的client_id修改为本机ip</span></span>
<span class="line"><span style="color:#6F42C1;">sed</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-i</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;s/client_id: 172.16.3.111/client_id: $(</span><span style="color:#6F42C1;">curl</span><span style="color:#032F62;"> ifconfig.me)/g&quot;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">filebeat.yml</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 启动</span></span>
<span class="line"><span style="color:#6F42C1;">sh</span><span style="color:#24292E;"> </span><span style="color:#032F62;">./start.sh</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="_8-安装apache-tomcat" tabindex="-1">8. 安装apache-tomcat <a class="header-anchor" href="#_8-安装apache-tomcat" aria-label="Permalink to &quot;8\\. 安装apache-tomcat&quot;">​</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 切换到临时目录操作</span></span>
<span class="line"><span style="color:#79B8FF;">cd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp</span></span>
<span class="line"><span style="color:#6A737D;"># 下载包并解压到特定位置</span></span>
<span class="line"><span style="color:#B392F0;">svn_exporter</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E5%AE%89%E8%A3%85%E5%8C%85/apache-tomcat-8.5.83.tar.gz</span></span>
<span class="line"><span style="color:#B392F0;">tar</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-xvf</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">apache-tomcat-8.5.83.tar.gz</span></span>
<span class="line"><span style="color:#B392F0;">mkdir</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/home/apaas/backend</span></span>
<span class="line"><span style="color:#B392F0;">mv</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">apache-tomcat-8.5.83</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/home/apaas/backend/apache-tomcat</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 下载运维脚本</span></span>
<span class="line"><span style="color:#B392F0;">svn_exporter</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/apache-tomcat/BACKEND_operate.sh</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/home/apaas/backend/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 覆盖 server.xml（改端口）</span></span>
<span class="line"><span style="color:#B392F0;">svn_exporter</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/apache-tomcat/conf/server.xml</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/home/apaas/backend/apache-tomcat/conf/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 设置 jvm 参数</span></span>
<span class="line"><span style="color:#6A737D;"># 以下代码在 &quot;# OS specific support.  $var _must_ be set to either true or false.&quot; 行之前（即脚本实际逻辑执行前）插入一行 JVM 参数设置</span></span>
<span class="line"><span style="color:#B392F0;">sed</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-i</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;/^# OS specific support.  $var _must_ be set to either true or false.$/i JAVA_OPTS=&quot;-Xms4096m -Xmx5120m -noverify -XX:TieredStopAtLevel=1 -Dspring.jmx.enabled=false -Djava.security.egd=file:\\/dev\\/.\\/urandom&quot;\\n&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/home/apaas/backend/apache-tomcat/bin/catalina.sh</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 设置运维脚本执行权限</span></span>
<span class="line"><span style="color:#79B8FF;">cd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/home/apaas/backend</span></span>
<span class="line"><span style="color:#B392F0;">chmod</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">+x</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">BACKEND_operate.sh</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 启动</span></span>
<span class="line"><span style="color:#B392F0;">./BACKEND_operate.sh</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">start</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 切换到临时目录操作</span></span>
<span class="line"><span style="color:#005CC5;">cd</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp</span></span>
<span class="line"><span style="color:#6A737D;"># 下载包并解压到特定位置</span></span>
<span class="line"><span style="color:#6F42C1;">svn_exporter</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E5%AE%89%E8%A3%85%E5%8C%85/apache-tomcat-8.5.83.tar.gz</span></span>
<span class="line"><span style="color:#6F42C1;">tar</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-xvf</span><span style="color:#24292E;"> </span><span style="color:#032F62;">apache-tomcat-8.5.83.tar.gz</span></span>
<span class="line"><span style="color:#6F42C1;">mkdir</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/home/apaas/backend</span></span>
<span class="line"><span style="color:#6F42C1;">mv</span><span style="color:#24292E;"> </span><span style="color:#032F62;">apache-tomcat-8.5.83</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/home/apaas/backend/apache-tomcat</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 下载运维脚本</span></span>
<span class="line"><span style="color:#6F42C1;">svn_exporter</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/apache-tomcat/BACKEND_operate.sh</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/home/apaas/backend/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 覆盖 server.xml（改端口）</span></span>
<span class="line"><span style="color:#6F42C1;">svn_exporter</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/apache-tomcat/conf/server.xml</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/home/apaas/backend/apache-tomcat/conf/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 设置 jvm 参数</span></span>
<span class="line"><span style="color:#6A737D;"># 以下代码在 &quot;# OS specific support.  $var _must_ be set to either true or false.&quot; 行之前（即脚本实际逻辑执行前）插入一行 JVM 参数设置</span></span>
<span class="line"><span style="color:#6F42C1;">sed</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-i</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;/^# OS specific support.  $var _must_ be set to either true or false.$/i JAVA_OPTS=&quot;-Xms4096m -Xmx5120m -noverify -XX:TieredStopAtLevel=1 -Dspring.jmx.enabled=false -Djava.security.egd=file:\\/dev\\/.\\/urandom&quot;\\n&#39;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/home/apaas/backend/apache-tomcat/bin/catalina.sh</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 设置运维脚本执行权限</span></span>
<span class="line"><span style="color:#005CC5;">cd</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/home/apaas/backend</span></span>
<span class="line"><span style="color:#6F42C1;">chmod</span><span style="color:#24292E;"> </span><span style="color:#032F62;">+x</span><span style="color:#24292E;"> </span><span style="color:#032F62;">BACKEND_operate.sh</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 启动</span></span>
<span class="line"><span style="color:#6F42C1;">./BACKEND_operate.sh</span><span style="color:#24292E;"> </span><span style="color:#032F62;">start</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h2 id="三、业务库初始化" tabindex="-1">三、业务库初始化 <a class="header-anchor" href="#三、业务库初始化" aria-label="Permalink to &quot;三、业务库初始化&quot;">​</a></h2><h3 id="_1-apaas-数据库初始化" tabindex="-1">1. apaas 数据库初始化 <a class="header-anchor" href="#_1-apaas-数据库初始化" aria-label="Permalink to &quot;1\\. apaas 数据库初始化&quot;">​</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 从 svn 拉取初始化数据</span></span>
<span class="line"><span style="color:#79B8FF;">cd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp</span></span>
<span class="line"><span style="color:#B392F0;">svn_exporter</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%9D%E5%A7%8B%E5%8C%96/apaas/xw_platform_20221127.dump</span></span>
<span class="line"><span style="color:#B392F0;">svn_exporter</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%9D%E5%A7%8B%E5%8C%96/apaas/xw_metadata_schema_20221122.dump</span></span>
<span class="line"><span style="color:#B392F0;">svn_exporter</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%9D%E5%A7%8B%E5%8C%96/apaas/xw_quartz_schema_20221122.dump</span></span>
<span class="line"><span style="color:#B392F0;">svn_exporter</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%9D%E5%A7%8B%E5%8C%96/apaas/xw_operationplatform_20221120.dump</span></span>
<span class="line"><span style="color:#B392F0;">svn_exporter</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%9D%E5%A7%8B%E5%8C%96/apaas/di_quartz_schema_20221122.dump</span></span>
<span class="line"><span style="color:#B392F0;">svn_exporter</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%9D%E5%A7%8B%E5%8C%96/apaas/xw_metadata_pl_propertytype.sql</span></span>
<span class="line"><span style="color:#B392F0;">svn_exporter</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%9D%E5%A7%8B%E5%8C%96/apaas/xw_metadata_init_data_20221127.sql</span></span>
<span class="line"><span style="color:#B392F0;">svn_exporter</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%9D%E5%A7%8B%E5%8C%96/apaas/xw_metadata_meta_model_v61.sql</span></span>
<span class="line"><span style="color:#B392F0;">svn_exporter</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%9D%E5%A7%8B%E5%8C%96/apaas/xw_metadata_pl_pagewidget_v61.sql</span></span>
<span class="line"><span style="color:#B392F0;">svn_exporter</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%9D%E5%A7%8B%E5%8C%96/apaas/xw_metadata_bi_board_v61.sql</span></span>
<span class="line"><span style="color:#B392F0;">svn_exporter</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%9D%E5%A7%8B%E5%8C%96/apaas/di_quartz_init_v61.sql</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># ***以下操作仅为单机部署示例，多机部署时，数据库地址和端口需根据实际部署情况调整***</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 创建数据库</span></span>
<span class="line"><span style="color:#B392F0;">sudo</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-u</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">postgres</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">createdb</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-h</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">localhost</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">5432</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-O</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">postgres</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">xw_platform</span></span>
<span class="line"><span style="color:#B392F0;">sudo</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-u</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">postgres</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">createdb</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-h</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">localhost</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">5432</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-O</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">postgres</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">xw_metadata</span></span>
<span class="line"><span style="color:#B392F0;">sudo</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-u</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">postgres</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">createdb</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-h</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">localhost</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">5432</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-O</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">postgres</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">xw_quartz</span></span>
<span class="line"><span style="color:#B392F0;">sudo</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-u</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">postgres</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">createdb</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-h</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">localhost</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">5432</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-O</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">postgres</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">xw_operationplatform</span></span>
<span class="line"><span style="color:#B392F0;">sudo</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-u</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">postgres</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">createdb</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-h</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">localhost</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">5432</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-O</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">postgres</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">di_quartz</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 初始化数据库</span></span>
<span class="line"><span style="color:#B392F0;">pg_restore</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-h</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">localhost</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">5432</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-U</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">postgres</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-d</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">xw_platform</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-F</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">c</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-v</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">xw_platform_20221127.dump</span></span>
<span class="line"><span style="color:#B392F0;">pg_restore</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-h</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">localhost</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">5432</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-U</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">postgres</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-d</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">xw_metadata</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-F</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">c</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-v</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">xw_metadata_schema_20221122.dump</span></span>
<span class="line"><span style="color:#B392F0;">pg_restore</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-h</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">localhost</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">5432</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-U</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">postgres</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-d</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">xw_quartz</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-F</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">c</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-v</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">xw_quartz_schema_20221122.dump</span></span>
<span class="line"><span style="color:#B392F0;">pg_restore</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-h</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">localhost</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">5432</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-U</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">postgres</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-d</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">xw_operationplatform</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-F</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">c</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-v</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">xw_operationplatform_20221120.dump</span></span>
<span class="line"><span style="color:#B392F0;">pg_restore</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-h</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">localhost</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">5432</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-U</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">postgres</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-d</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">di_quartz</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-F</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">c</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-v</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">di_quartz_schema_20221122.dump</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 初始化元数据库 pl_propertytype 表数据</span></span>
<span class="line"><span style="color:#B392F0;">psql</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-h</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">localhost</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">5432</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-U</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">postgres</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-w</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-d</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">xw_metadata</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">xw_metadata_pl_propertytype.sql</span></span>
<span class="line"><span style="color:#6A737D;"># 初始化元数据库的一些基础数据</span></span>
<span class="line"><span style="color:#B392F0;">psql</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-h</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">localhost</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">5432</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-U</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">postgres</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-w</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-d</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">xw_metadata</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">xw_metadata_init_data_20221127.sql</span></span>
<span class="line"><span style="color:#6A737D;"># 插入v61元数据 metamodel</span></span>
<span class="line"><span style="color:#B392F0;">psql</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-h</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">localhost</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">5432</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-U</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">postgres</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-w</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-d</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">xw_metadata</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">xw_metadata_meta_model_v61.sql</span></span>
<span class="line"><span style="color:#6A737D;"># 插入v61 UI控件元数据</span></span>
<span class="line"><span style="color:#B392F0;">psql</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-h</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">localhost</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">5432</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-U</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">postgres</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-w</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-d</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">xw_metadata</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">xw_metadata_pl_pagewidget_v61.sql</span></span>
<span class="line"><span style="color:#6A737D;"># 插入v61 报表看板元数据</span></span>
<span class="line"><span style="color:#B392F0;">psql</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-h</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">localhost</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">5432</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-U</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">postgres</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-w</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-d</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">xw_metadata</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">xw_metadata_bi_board_v61.sql</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 导入产品元数据</span></span>
<span class="line"><span style="color:#6A737D;"># ***待业务服务安装完毕，在IDE v2.9上进行导入***</span></span>
<span class="line"><span style="color:#6A737D;"># 元数据下载地址：https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%9D%E5%A7%8B%E5%8C%96/apaas/MetaModel-2022-11-23.zip</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 初始化 v61 di调度模版</span></span>
<span class="line"><span style="color:#B392F0;">psql</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-h</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">localhost</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">5432</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-U</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">postgres</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-w</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-d</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">di_quartz</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">di_quartz_init_v61.sql</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 从 svn 拉取初始化数据</span></span>
<span class="line"><span style="color:#005CC5;">cd</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp</span></span>
<span class="line"><span style="color:#6F42C1;">svn_exporter</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%9D%E5%A7%8B%E5%8C%96/apaas/xw_platform_20221127.dump</span></span>
<span class="line"><span style="color:#6F42C1;">svn_exporter</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%9D%E5%A7%8B%E5%8C%96/apaas/xw_metadata_schema_20221122.dump</span></span>
<span class="line"><span style="color:#6F42C1;">svn_exporter</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%9D%E5%A7%8B%E5%8C%96/apaas/xw_quartz_schema_20221122.dump</span></span>
<span class="line"><span style="color:#6F42C1;">svn_exporter</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%9D%E5%A7%8B%E5%8C%96/apaas/xw_operationplatform_20221120.dump</span></span>
<span class="line"><span style="color:#6F42C1;">svn_exporter</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%9D%E5%A7%8B%E5%8C%96/apaas/di_quartz_schema_20221122.dump</span></span>
<span class="line"><span style="color:#6F42C1;">svn_exporter</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%9D%E5%A7%8B%E5%8C%96/apaas/xw_metadata_pl_propertytype.sql</span></span>
<span class="line"><span style="color:#6F42C1;">svn_exporter</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%9D%E5%A7%8B%E5%8C%96/apaas/xw_metadata_init_data_20221127.sql</span></span>
<span class="line"><span style="color:#6F42C1;">svn_exporter</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%9D%E5%A7%8B%E5%8C%96/apaas/xw_metadata_meta_model_v61.sql</span></span>
<span class="line"><span style="color:#6F42C1;">svn_exporter</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%9D%E5%A7%8B%E5%8C%96/apaas/xw_metadata_pl_pagewidget_v61.sql</span></span>
<span class="line"><span style="color:#6F42C1;">svn_exporter</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%9D%E5%A7%8B%E5%8C%96/apaas/xw_metadata_bi_board_v61.sql</span></span>
<span class="line"><span style="color:#6F42C1;">svn_exporter</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%9D%E5%A7%8B%E5%8C%96/apaas/di_quartz_init_v61.sql</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># ***以下操作仅为单机部署示例，多机部署时，数据库地址和端口需根据实际部署情况调整***</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 创建数据库</span></span>
<span class="line"><span style="color:#6F42C1;">sudo</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-u</span><span style="color:#24292E;"> </span><span style="color:#032F62;">postgres</span><span style="color:#24292E;"> </span><span style="color:#032F62;">createdb</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-h</span><span style="color:#24292E;"> </span><span style="color:#032F62;">localhost</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">5432</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-O</span><span style="color:#24292E;"> </span><span style="color:#032F62;">postgres</span><span style="color:#24292E;"> </span><span style="color:#032F62;">xw_platform</span></span>
<span class="line"><span style="color:#6F42C1;">sudo</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-u</span><span style="color:#24292E;"> </span><span style="color:#032F62;">postgres</span><span style="color:#24292E;"> </span><span style="color:#032F62;">createdb</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-h</span><span style="color:#24292E;"> </span><span style="color:#032F62;">localhost</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">5432</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-O</span><span style="color:#24292E;"> </span><span style="color:#032F62;">postgres</span><span style="color:#24292E;"> </span><span style="color:#032F62;">xw_metadata</span></span>
<span class="line"><span style="color:#6F42C1;">sudo</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-u</span><span style="color:#24292E;"> </span><span style="color:#032F62;">postgres</span><span style="color:#24292E;"> </span><span style="color:#032F62;">createdb</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-h</span><span style="color:#24292E;"> </span><span style="color:#032F62;">localhost</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">5432</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-O</span><span style="color:#24292E;"> </span><span style="color:#032F62;">postgres</span><span style="color:#24292E;"> </span><span style="color:#032F62;">xw_quartz</span></span>
<span class="line"><span style="color:#6F42C1;">sudo</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-u</span><span style="color:#24292E;"> </span><span style="color:#032F62;">postgres</span><span style="color:#24292E;"> </span><span style="color:#032F62;">createdb</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-h</span><span style="color:#24292E;"> </span><span style="color:#032F62;">localhost</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">5432</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-O</span><span style="color:#24292E;"> </span><span style="color:#032F62;">postgres</span><span style="color:#24292E;"> </span><span style="color:#032F62;">xw_operationplatform</span></span>
<span class="line"><span style="color:#6F42C1;">sudo</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-u</span><span style="color:#24292E;"> </span><span style="color:#032F62;">postgres</span><span style="color:#24292E;"> </span><span style="color:#032F62;">createdb</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-h</span><span style="color:#24292E;"> </span><span style="color:#032F62;">localhost</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">5432</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-O</span><span style="color:#24292E;"> </span><span style="color:#032F62;">postgres</span><span style="color:#24292E;"> </span><span style="color:#032F62;">di_quartz</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 初始化数据库</span></span>
<span class="line"><span style="color:#6F42C1;">pg_restore</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-h</span><span style="color:#24292E;"> </span><span style="color:#032F62;">localhost</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">5432</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-U</span><span style="color:#24292E;"> </span><span style="color:#032F62;">postgres</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-d</span><span style="color:#24292E;"> </span><span style="color:#032F62;">xw_platform</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-F</span><span style="color:#24292E;"> </span><span style="color:#032F62;">c</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-v</span><span style="color:#24292E;"> </span><span style="color:#032F62;">xw_platform_20221127.dump</span></span>
<span class="line"><span style="color:#6F42C1;">pg_restore</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-h</span><span style="color:#24292E;"> </span><span style="color:#032F62;">localhost</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">5432</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-U</span><span style="color:#24292E;"> </span><span style="color:#032F62;">postgres</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-d</span><span style="color:#24292E;"> </span><span style="color:#032F62;">xw_metadata</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-F</span><span style="color:#24292E;"> </span><span style="color:#032F62;">c</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-v</span><span style="color:#24292E;"> </span><span style="color:#032F62;">xw_metadata_schema_20221122.dump</span></span>
<span class="line"><span style="color:#6F42C1;">pg_restore</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-h</span><span style="color:#24292E;"> </span><span style="color:#032F62;">localhost</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">5432</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-U</span><span style="color:#24292E;"> </span><span style="color:#032F62;">postgres</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-d</span><span style="color:#24292E;"> </span><span style="color:#032F62;">xw_quartz</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-F</span><span style="color:#24292E;"> </span><span style="color:#032F62;">c</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-v</span><span style="color:#24292E;"> </span><span style="color:#032F62;">xw_quartz_schema_20221122.dump</span></span>
<span class="line"><span style="color:#6F42C1;">pg_restore</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-h</span><span style="color:#24292E;"> </span><span style="color:#032F62;">localhost</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">5432</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-U</span><span style="color:#24292E;"> </span><span style="color:#032F62;">postgres</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-d</span><span style="color:#24292E;"> </span><span style="color:#032F62;">xw_operationplatform</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-F</span><span style="color:#24292E;"> </span><span style="color:#032F62;">c</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-v</span><span style="color:#24292E;"> </span><span style="color:#032F62;">xw_operationplatform_20221120.dump</span></span>
<span class="line"><span style="color:#6F42C1;">pg_restore</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-h</span><span style="color:#24292E;"> </span><span style="color:#032F62;">localhost</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">5432</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-U</span><span style="color:#24292E;"> </span><span style="color:#032F62;">postgres</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-d</span><span style="color:#24292E;"> </span><span style="color:#032F62;">di_quartz</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-F</span><span style="color:#24292E;"> </span><span style="color:#032F62;">c</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-v</span><span style="color:#24292E;"> </span><span style="color:#032F62;">di_quartz_schema_20221122.dump</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 初始化元数据库 pl_propertytype 表数据</span></span>
<span class="line"><span style="color:#6F42C1;">psql</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-h</span><span style="color:#24292E;"> </span><span style="color:#032F62;">localhost</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">5432</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-U</span><span style="color:#24292E;"> </span><span style="color:#032F62;">postgres</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-w</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-d</span><span style="color:#24292E;"> </span><span style="color:#032F62;">xw_metadata</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-f</span><span style="color:#24292E;"> </span><span style="color:#032F62;">xw_metadata_pl_propertytype.sql</span></span>
<span class="line"><span style="color:#6A737D;"># 初始化元数据库的一些基础数据</span></span>
<span class="line"><span style="color:#6F42C1;">psql</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-h</span><span style="color:#24292E;"> </span><span style="color:#032F62;">localhost</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">5432</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-U</span><span style="color:#24292E;"> </span><span style="color:#032F62;">postgres</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-w</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-d</span><span style="color:#24292E;"> </span><span style="color:#032F62;">xw_metadata</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-f</span><span style="color:#24292E;"> </span><span style="color:#032F62;">xw_metadata_init_data_20221127.sql</span></span>
<span class="line"><span style="color:#6A737D;"># 插入v61元数据 metamodel</span></span>
<span class="line"><span style="color:#6F42C1;">psql</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-h</span><span style="color:#24292E;"> </span><span style="color:#032F62;">localhost</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">5432</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-U</span><span style="color:#24292E;"> </span><span style="color:#032F62;">postgres</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-w</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-d</span><span style="color:#24292E;"> </span><span style="color:#032F62;">xw_metadata</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-f</span><span style="color:#24292E;"> </span><span style="color:#032F62;">xw_metadata_meta_model_v61.sql</span></span>
<span class="line"><span style="color:#6A737D;"># 插入v61 UI控件元数据</span></span>
<span class="line"><span style="color:#6F42C1;">psql</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-h</span><span style="color:#24292E;"> </span><span style="color:#032F62;">localhost</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">5432</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-U</span><span style="color:#24292E;"> </span><span style="color:#032F62;">postgres</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-w</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-d</span><span style="color:#24292E;"> </span><span style="color:#032F62;">xw_metadata</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-f</span><span style="color:#24292E;"> </span><span style="color:#032F62;">xw_metadata_pl_pagewidget_v61.sql</span></span>
<span class="line"><span style="color:#6A737D;"># 插入v61 报表看板元数据</span></span>
<span class="line"><span style="color:#6F42C1;">psql</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-h</span><span style="color:#24292E;"> </span><span style="color:#032F62;">localhost</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">5432</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-U</span><span style="color:#24292E;"> </span><span style="color:#032F62;">postgres</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-w</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-d</span><span style="color:#24292E;"> </span><span style="color:#032F62;">xw_metadata</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-f</span><span style="color:#24292E;"> </span><span style="color:#032F62;">xw_metadata_bi_board_v61.sql</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 导入产品元数据</span></span>
<span class="line"><span style="color:#6A737D;"># ***待业务服务安装完毕，在IDE v2.9上进行导入***</span></span>
<span class="line"><span style="color:#6A737D;"># 元数据下载地址：https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%9D%E5%A7%8B%E5%8C%96/apaas/MetaModel-2022-11-23.zip</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 初始化 v61 di调度模版</span></span>
<span class="line"><span style="color:#6F42C1;">psql</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-h</span><span style="color:#24292E;"> </span><span style="color:#032F62;">localhost</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">5432</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-U</span><span style="color:#24292E;"> </span><span style="color:#032F62;">postgres</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-w</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-d</span><span style="color:#24292E;"> </span><span style="color:#032F62;">di_quartz</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-f</span><span style="color:#24292E;"> </span><span style="color:#032F62;">di_quartz_init_v61.sql</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br></div></div><h3 id="_2-数据平台数据库初始化" tabindex="-1">2. 数据平台数据库初始化 <a class="header-anchor" href="#_2-数据平台数据库初始化" aria-label="Permalink to &quot;2\\. 数据平台数据库初始化&quot;">​</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 从 svn 拉取初始化数据</span></span>
<span class="line"><span style="color:#79B8FF;">cd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp</span></span>
<span class="line"><span style="color:#B392F0;">svn_exporter</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%9D%E5%A7%8B%E5%8C%96/dataplatform/xw_dataplatform_schema_20221123.dump</span></span>
<span class="line"><span style="color:#B392F0;">svn_exporter</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%9D%E5%A7%8B%E5%8C%96/dataplatform/xw_dataplatform_init_data_20221123.sql</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 创建数据库</span></span>
<span class="line"><span style="color:#B392F0;">sudo</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-u</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">postgres</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">createdb</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-h</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">localhost</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">5432</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-O</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">postgres</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">xw_dataplatform</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 初始化数据库表结构</span></span>
<span class="line"><span style="color:#B392F0;">pg_restore</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-h</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">localhost</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">5432</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-U</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">postgres</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-d</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">xw_dataplatform</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-F</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">c</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-v</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">xw_dataplatform_schema_20221123.dump</span></span>
<span class="line"><span style="color:#6A737D;"># 初始化基础数据</span></span>
<span class="line"><span style="color:#B392F0;">psql</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-h</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">localhost</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">5432</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-U</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">postgres</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-w</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-d</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">xw_dataplatform</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">xw_dataplatform_init_data_20221123.sql</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 从 svn 拉取初始化数据</span></span>
<span class="line"><span style="color:#005CC5;">cd</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp</span></span>
<span class="line"><span style="color:#6F42C1;">svn_exporter</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%9D%E5%A7%8B%E5%8C%96/dataplatform/xw_dataplatform_schema_20221123.dump</span></span>
<span class="line"><span style="color:#6F42C1;">svn_exporter</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%9D%E5%A7%8B%E5%8C%96/dataplatform/xw_dataplatform_init_data_20221123.sql</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 创建数据库</span></span>
<span class="line"><span style="color:#6F42C1;">sudo</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-u</span><span style="color:#24292E;"> </span><span style="color:#032F62;">postgres</span><span style="color:#24292E;"> </span><span style="color:#032F62;">createdb</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-h</span><span style="color:#24292E;"> </span><span style="color:#032F62;">localhost</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">5432</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-O</span><span style="color:#24292E;"> </span><span style="color:#032F62;">postgres</span><span style="color:#24292E;"> </span><span style="color:#032F62;">xw_dataplatform</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 初始化数据库表结构</span></span>
<span class="line"><span style="color:#6F42C1;">pg_restore</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-h</span><span style="color:#24292E;"> </span><span style="color:#032F62;">localhost</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">5432</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-U</span><span style="color:#24292E;"> </span><span style="color:#032F62;">postgres</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-d</span><span style="color:#24292E;"> </span><span style="color:#032F62;">xw_dataplatform</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-F</span><span style="color:#24292E;"> </span><span style="color:#032F62;">c</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-v</span><span style="color:#24292E;"> </span><span style="color:#032F62;">xw_dataplatform_schema_20221123.dump</span></span>
<span class="line"><span style="color:#6A737D;"># 初始化基础数据</span></span>
<span class="line"><span style="color:#6F42C1;">psql</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-h</span><span style="color:#24292E;"> </span><span style="color:#032F62;">localhost</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">5432</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-U</span><span style="color:#24292E;"> </span><span style="color:#032F62;">postgres</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-w</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-d</span><span style="color:#24292E;"> </span><span style="color:#032F62;">xw_dataplatform</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-f</span><span style="color:#24292E;"> </span><span style="color:#032F62;">xw_dataplatform_init_data_20221123.sql</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="_3-ipaas-数据库初始化" tabindex="-1">3. ipaas 数据库初始化 <a class="header-anchor" href="#_3-ipaas-数据库初始化" aria-label="Permalink to &quot;3\\. ipaas 数据库初始化&quot;">​</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># svn 拉取初始化数据</span></span>
<span class="line"><span style="color:#79B8FF;">cd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp</span></span>
<span class="line"><span style="color:#B392F0;">svn_exporter</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%9D%E5%A7%8B%E5%8C%96/ipaas/xw_ipaas_2022112301.sql</span></span>
<span class="line"><span style="color:#B392F0;">svn_exporter</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%9D%E5%A7%8B%E5%8C%96/ipaas/xw_ipaas_plugin_2022112301.sql</span></span>
<span class="line"><span style="color:#B392F0;">svn_exporter</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%9D%E5%A7%8B%E5%8C%96/ipaas/xw_ipaas_quartz_2022112301.sql</span></span>
<span class="line"><span style="color:#B392F0;">svn_exporter</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%9D%E5%A7%8B%E5%8C%96/ipaas/ipaas_init_v61.sql</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 创建数据库</span></span>
<span class="line"><span style="color:#B392F0;">sudo</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-u</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">postgres</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">createdb</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-h</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">localhost</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">5432</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-O</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">postgres</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">xw_ipaas</span></span>
<span class="line"><span style="color:#B392F0;">sudo</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-u</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">postgres</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">createdb</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-h</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">localhost</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">5432</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-O</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">postgres</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">xw_ipaas_plugin</span></span>
<span class="line"><span style="color:#B392F0;">sudo</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-u</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">postgres</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">createdb</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-h</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">localhost</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">5432</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-O</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">postgres</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">xw_ipaas_quartz</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 初始化数据库</span></span>
<span class="line"><span style="color:#B392F0;">psql</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-h</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">localhost</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">5432</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-U</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">postgres</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-w</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-d</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">xw_ipaas</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">xw_ipaas_2022112301.sql</span></span>
<span class="line"><span style="color:#B392F0;">psql</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-h</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">localhost</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">5432</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-U</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">postgres</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-w</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-d</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">xw_ipaas_plugin</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">xw_ipaas_plugin_2022112301.sql</span></span>
<span class="line"><span style="color:#B392F0;">psql</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-h</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">localhost</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">5432</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-U</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">postgres</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-w</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-d</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">xw_ipaas_quartz</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">xw_ipaas_quartz_2022112301.sql</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 插入v6.1版本数据</span></span>
<span class="line"><span style="color:#B392F0;">psql</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-h</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">localhost</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">5432</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-U</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">postgres</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-w</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-d</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">xw_ipaas</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ipaas_init_v61.sql</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># svn 拉取初始化数据</span></span>
<span class="line"><span style="color:#005CC5;">cd</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp</span></span>
<span class="line"><span style="color:#6F42C1;">svn_exporter</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%9D%E5%A7%8B%E5%8C%96/ipaas/xw_ipaas_2022112301.sql</span></span>
<span class="line"><span style="color:#6F42C1;">svn_exporter</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%9D%E5%A7%8B%E5%8C%96/ipaas/xw_ipaas_plugin_2022112301.sql</span></span>
<span class="line"><span style="color:#6F42C1;">svn_exporter</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%9D%E5%A7%8B%E5%8C%96/ipaas/xw_ipaas_quartz_2022112301.sql</span></span>
<span class="line"><span style="color:#6F42C1;">svn_exporter</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%9D%E5%A7%8B%E5%8C%96/ipaas/ipaas_init_v61.sql</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 创建数据库</span></span>
<span class="line"><span style="color:#6F42C1;">sudo</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-u</span><span style="color:#24292E;"> </span><span style="color:#032F62;">postgres</span><span style="color:#24292E;"> </span><span style="color:#032F62;">createdb</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-h</span><span style="color:#24292E;"> </span><span style="color:#032F62;">localhost</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">5432</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-O</span><span style="color:#24292E;"> </span><span style="color:#032F62;">postgres</span><span style="color:#24292E;"> </span><span style="color:#032F62;">xw_ipaas</span></span>
<span class="line"><span style="color:#6F42C1;">sudo</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-u</span><span style="color:#24292E;"> </span><span style="color:#032F62;">postgres</span><span style="color:#24292E;"> </span><span style="color:#032F62;">createdb</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-h</span><span style="color:#24292E;"> </span><span style="color:#032F62;">localhost</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">5432</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-O</span><span style="color:#24292E;"> </span><span style="color:#032F62;">postgres</span><span style="color:#24292E;"> </span><span style="color:#032F62;">xw_ipaas_plugin</span></span>
<span class="line"><span style="color:#6F42C1;">sudo</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-u</span><span style="color:#24292E;"> </span><span style="color:#032F62;">postgres</span><span style="color:#24292E;"> </span><span style="color:#032F62;">createdb</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-h</span><span style="color:#24292E;"> </span><span style="color:#032F62;">localhost</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">5432</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-O</span><span style="color:#24292E;"> </span><span style="color:#032F62;">postgres</span><span style="color:#24292E;"> </span><span style="color:#032F62;">xw_ipaas_quartz</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 初始化数据库</span></span>
<span class="line"><span style="color:#6F42C1;">psql</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-h</span><span style="color:#24292E;"> </span><span style="color:#032F62;">localhost</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">5432</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-U</span><span style="color:#24292E;"> </span><span style="color:#032F62;">postgres</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-w</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-d</span><span style="color:#24292E;"> </span><span style="color:#032F62;">xw_ipaas</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-f</span><span style="color:#24292E;"> </span><span style="color:#032F62;">xw_ipaas_2022112301.sql</span></span>
<span class="line"><span style="color:#6F42C1;">psql</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-h</span><span style="color:#24292E;"> </span><span style="color:#032F62;">localhost</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">5432</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-U</span><span style="color:#24292E;"> </span><span style="color:#032F62;">postgres</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-w</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-d</span><span style="color:#24292E;"> </span><span style="color:#032F62;">xw_ipaas_plugin</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-f</span><span style="color:#24292E;"> </span><span style="color:#032F62;">xw_ipaas_plugin_2022112301.sql</span></span>
<span class="line"><span style="color:#6F42C1;">psql</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-h</span><span style="color:#24292E;"> </span><span style="color:#032F62;">localhost</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">5432</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-U</span><span style="color:#24292E;"> </span><span style="color:#032F62;">postgres</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-w</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-d</span><span style="color:#24292E;"> </span><span style="color:#032F62;">xw_ipaas_quartz</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-f</span><span style="color:#24292E;"> </span><span style="color:#032F62;">xw_ipaas_quartz_2022112301.sql</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 插入v6.1版本数据</span></span>
<span class="line"><span style="color:#6F42C1;">psql</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-h</span><span style="color:#24292E;"> </span><span style="color:#032F62;">localhost</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">5432</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-U</span><span style="color:#24292E;"> </span><span style="color:#032F62;">postgres</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-w</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-d</span><span style="color:#24292E;"> </span><span style="color:#032F62;">xw_ipaas</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-f</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ipaas_init_v61.sql</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h2 id="四、业务服务安装" tabindex="-1">四、业务服务安装 <a class="header-anchor" href="#四、业务服务安装" aria-label="Permalink to &quot;四、业务服务安装&quot;">​</a></h2><h3 id="前置准备工作" tabindex="-1">前置准备工作 <a class="header-anchor" href="#前置准备工作" aria-label="Permalink to &quot;前置准备工作&quot;">​</a></h3><h4 id="导入-nacos-配置" tabindex="-1">导入 nacos 配置 <a class="header-anchor" href="#导入-nacos-配置" aria-label="Permalink to &quot;导入 nacos 配置&quot;">​</a></h4><ol><li>下载 nacos 归档配置，svn 地址为 <a href="https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E7%A8%8B%E5%BA%8F%E5%8C%85/nacos/nacos_config_export_20221123.zip" target="_blank" rel="noreferrer">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E7%A8%8B%E5%BA%8F%E5%8C%85/nacos/nacos_config_export_20221123.zip</a></li><li>解压配置文件后，可以使用 vscode 或其他现代编辑器打开</li><li>根据实际环境部署情况，全局搜索以下信息，进行批量替换： <ol><li><code>MuhBiyN6agQ9og4c18YM</code> =&gt; 替换为数据库实际设置的密码</li><li><code>127.0.0.1:5432</code> =&gt; 替换为实际数据库部署服务器的内网ip和端口</li><li><code>127.0.0.1:7000</code> =&gt; 替换ip为实际openresty部署服务器的内网ip</li><li><code>127.0.0.1:18080</code> =&gt; 替换ip为实际backend服务部署服务器的内网ip</li><li><code>127.0.0.1:16789</code> =&gt; 替换ip为实际openresty部署服务器的内网ip</li></ol></li><li>下载V6.1服务清单，svn 地址为 <a href="https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E6%96%87%E6%A1%A3%E6%95%B4%E7%90%86/%E6%99%BA%E6%85%A7100V6.1%E6%9C%8D%E5%8A%A1%E6%B8%85%E5%8D%95.xlsx" target="_blank" rel="noreferrer">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E6%96%87%E6%A1%A3%E6%95%B4%E7%90%86/%E6%99%BA%E6%85%A7100V6.1%E6%9C%8D%E5%8A%A1%E6%B8%85%E5%8D%95.xlsx</a></li><li>nacos 配置文件里，全局搜索 <code>127.0.0.1</code>，根据服务清单上的端口，将其余ip替换为对应服务部署服务器的内网ip。配置里 6379 端口对应ip替换为 redis 部署服务器内网ip，ip和端口根据部署情况按需调整</li><li>重新打包配置为 zip 文件，注意打包层级与格式。MacOS 系统打包后可能要额外将隐藏文件 <code>__MACOSX</code>、<code>.DS_Store</code> 删除</li><li>在浏览器访问 <code>{openresty服务器外网ip}:7000/nacos</code> 地址，将配置导入</li><li><em><strong>以上替换不能保证覆盖到所有配置项，服务部署后发现有漏了的配置，可以再进行补充调整</strong></em></li></ol><h4 id="部署目录准备" tabindex="-1">部署目录准备 <a class="header-anchor" href="#部署目录准备" aria-label="Permalink to &quot;部署目录准备&quot;">​</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 创建服务根目录</span></span>
<span class="line"><span style="color:#B392F0;">mkdir</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/home/apaas/</span></span>
<span class="line"><span style="color:#B392F0;">mkdir</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/home/apaas/backend</span></span>
<span class="line"><span style="color:#B392F0;">mkdir</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/home/dataplatform</span></span>
<span class="line"><span style="color:#B392F0;">mkdir</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/home/ipaas</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 根据服务部署情况，在各类根目录放置spring配置文件</span></span>
<span class="line"><span style="color:#6A737D;"># ***nacos地址请根据实际部署情况调整***</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># /home/apaas/ 目录下的服务默认读取此配置</span></span>
<span class="line"><span style="color:#B392F0;">cat</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/home/apaas/application.properties</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;&lt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">EOF</span></span>
<span class="line"><span style="color:#9ECBFF;">nacos.server-addr=127.0.0.1:8848</span></span>
<span class="line"><span style="color:#9ECBFF;">EOF</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># /home/apaas/backend/ 内的服务默认读取此配置</span></span>
<span class="line"><span style="color:#B392F0;">cat</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/home/apaas/backend/apache-tomcat/bin/application.properties</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;&lt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">EOF</span></span>
<span class="line"><span style="color:#9ECBFF;">nacos.server-addr=127.0.0.1:8848</span></span>
<span class="line"><span style="color:#9ECBFF;">nacos.namespace=</span></span>
<span class="line"><span style="color:#9ECBFF;">nacos.endpoint=</span></span>
<span class="line"><span style="color:#9ECBFF;">nacos.access-key=</span></span>
<span class="line"><span style="color:#9ECBFF;">nacos.secret-key=</span></span>
<span class="line"><span style="color:#9ECBFF;">EOF</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># /home/dataplatform/ 目录下的服务默认读取此配置（具体读取配置路径根据服务部署脚本来，实际逻辑会有出入，不一定会用到此配置）</span></span>
<span class="line"><span style="color:#B392F0;">cat</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/home/dataplatform/application.properties</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;&lt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">EOF</span></span>
<span class="line"><span style="color:#9ECBFF;">nacos.server-addr=127.0.0.1:8848</span></span>
<span class="line"><span style="color:#9ECBFF;">EOF</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># /home/ipaas/ 目录下的服务默认读取此配置</span></span>
<span class="line"><span style="color:#B392F0;">cat</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/home/ipaas/application.yml</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;&lt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">EOF</span></span>
<span class="line"><span style="color:#9ECBFF;">spring:</span></span>
<span class="line"><span style="color:#9ECBFF;">  main:</span></span>
<span class="line"><span style="color:#9ECBFF;">    allow-circular-references: true</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF;">nacos:</span></span>
<span class="line"><span style="color:#9ECBFF;">  config:</span></span>
<span class="line"><span style="color:#9ECBFF;">     enabled: true</span></span>
<span class="line"><span style="color:#9ECBFF;">  discovery:</span></span>
<span class="line"><span style="color:#9ECBFF;">     enabled: false</span></span>
<span class="line"><span style="color:#9ECBFF;">     namespace: public</span></span>
<span class="line"><span style="color:#9ECBFF;">     group: ipaas</span></span>
<span class="line"><span style="color:#9ECBFF;">  server-addr: 127.0.0.1:8848</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF;">flystepserver:</span></span>
<span class="line"><span style="color:#9ECBFF;">    icc:</span></span>
<span class="line"><span style="color:#9ECBFF;">      enabled: false</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF;">core:</span></span>
<span class="line"><span style="color:#9ECBFF;"> config:</span></span>
<span class="line"><span style="color:#9ECBFF;">   logType: SLS</span></span>
<span class="line"><span style="color:#9ECBFF;">EOF</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 创建服务根目录</span></span>
<span class="line"><span style="color:#6F42C1;">mkdir</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/home/apaas/</span></span>
<span class="line"><span style="color:#6F42C1;">mkdir</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/home/apaas/backend</span></span>
<span class="line"><span style="color:#6F42C1;">mkdir</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/home/dataplatform</span></span>
<span class="line"><span style="color:#6F42C1;">mkdir</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/home/ipaas</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 根据服务部署情况，在各类根目录放置spring配置文件</span></span>
<span class="line"><span style="color:#6A737D;"># ***nacos地址请根据实际部署情况调整***</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># /home/apaas/ 目录下的服务默认读取此配置</span></span>
<span class="line"><span style="color:#6F42C1;">cat</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/home/apaas/application.properties</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&lt;&lt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">EOF</span></span>
<span class="line"><span style="color:#032F62;">nacos.server-addr=127.0.0.1:8848</span></span>
<span class="line"><span style="color:#032F62;">EOF</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># /home/apaas/backend/ 内的服务默认读取此配置</span></span>
<span class="line"><span style="color:#6F42C1;">cat</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/home/apaas/backend/apache-tomcat/bin/application.properties</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&lt;&lt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">EOF</span></span>
<span class="line"><span style="color:#032F62;">nacos.server-addr=127.0.0.1:8848</span></span>
<span class="line"><span style="color:#032F62;">nacos.namespace=</span></span>
<span class="line"><span style="color:#032F62;">nacos.endpoint=</span></span>
<span class="line"><span style="color:#032F62;">nacos.access-key=</span></span>
<span class="line"><span style="color:#032F62;">nacos.secret-key=</span></span>
<span class="line"><span style="color:#032F62;">EOF</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># /home/dataplatform/ 目录下的服务默认读取此配置（具体读取配置路径根据服务部署脚本来，实际逻辑会有出入，不一定会用到此配置）</span></span>
<span class="line"><span style="color:#6F42C1;">cat</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/home/dataplatform/application.properties</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&lt;&lt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">EOF</span></span>
<span class="line"><span style="color:#032F62;">nacos.server-addr=127.0.0.1:8848</span></span>
<span class="line"><span style="color:#032F62;">EOF</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># /home/ipaas/ 目录下的服务默认读取此配置</span></span>
<span class="line"><span style="color:#6F42C1;">cat</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/home/ipaas/application.yml</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&lt;&lt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">EOF</span></span>
<span class="line"><span style="color:#032F62;">spring:</span></span>
<span class="line"><span style="color:#032F62;">  main:</span></span>
<span class="line"><span style="color:#032F62;">    allow-circular-references: true</span></span>
<span class="line"></span>
<span class="line"><span style="color:#032F62;">nacos:</span></span>
<span class="line"><span style="color:#032F62;">  config:</span></span>
<span class="line"><span style="color:#032F62;">     enabled: true</span></span>
<span class="line"><span style="color:#032F62;">  discovery:</span></span>
<span class="line"><span style="color:#032F62;">     enabled: false</span></span>
<span class="line"><span style="color:#032F62;">     namespace: public</span></span>
<span class="line"><span style="color:#032F62;">     group: ipaas</span></span>
<span class="line"><span style="color:#032F62;">  server-addr: 127.0.0.1:8848</span></span>
<span class="line"></span>
<span class="line"><span style="color:#032F62;">flystepserver:</span></span>
<span class="line"><span style="color:#032F62;">    icc:</span></span>
<span class="line"><span style="color:#032F62;">      enabled: false</span></span>
<span class="line"></span>
<span class="line"><span style="color:#032F62;">core:</span></span>
<span class="line"><span style="color:#032F62;"> config:</span></span>
<span class="line"><span style="color:#032F62;">   logType: SLS</span></span>
<span class="line"><span style="color:#032F62;">EOF</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br></div></div><h4 id="放置种子文件到特定目录" tabindex="-1">放置种子文件到特定目录 <a class="header-anchor" href="#放置种子文件到特定目录" aria-label="Permalink to &quot;放置种子文件到特定目录&quot;">​</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 从 svn 下载租户种子库文件</span></span>
<span class="line"><span style="color:#6A737D;"># 种子文件放置位置可在 nacos 中配置（tenant.db.datapath）</span></span>
<span class="line"><span style="color:#6A737D;"># 实施环境一般配置路径为 /home/apaas/backend/dbs/</span></span>
<span class="line"><span style="color:#B392F0;">svn_exporter</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E7%A8%8B%E5%BA%8F%E5%8C%85/dbs/db_100000000000000061.backup</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/home/apaas/backend/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 从 svn 下载数据平台种子文件</span></span>
<span class="line"><span style="color:#6A737D;"># 种子文件放置位置可在 nacos 中配置（tenant.dp.datapath）</span></span>
<span class="line"><span style="color:#6A737D;"># 一般配置路径为 /home/dataplatform/backend</span></span>
<span class="line"><span style="color:#B392F0;">mkdir</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/home/dataplatform/backend</span></span>
<span class="line"><span style="color:#B392F0;">svn_exporter</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E7%A8%8B%E5%BA%8F%E5%8C%85/dbs/init_tenant_dp_100000000000000061.sql</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/home/dataplatform/backend/</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 从 svn 下载租户种子库文件</span></span>
<span class="line"><span style="color:#6A737D;"># 种子文件放置位置可在 nacos 中配置（tenant.db.datapath）</span></span>
<span class="line"><span style="color:#6A737D;"># 实施环境一般配置路径为 /home/apaas/backend/dbs/</span></span>
<span class="line"><span style="color:#6F42C1;">svn_exporter</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E7%A8%8B%E5%BA%8F%E5%8C%85/dbs/db_100000000000000061.backup</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/home/apaas/backend/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 从 svn 下载数据平台种子文件</span></span>
<span class="line"><span style="color:#6A737D;"># 种子文件放置位置可在 nacos 中配置（tenant.dp.datapath）</span></span>
<span class="line"><span style="color:#6A737D;"># 一般配置路径为 /home/dataplatform/backend</span></span>
<span class="line"><span style="color:#6F42C1;">mkdir</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/home/dataplatform/backend</span></span>
<span class="line"><span style="color:#6F42C1;">svn_exporter</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E7%A8%8B%E5%BA%8F%E5%8C%85/dbs/init_tenant_dp_100000000000000061.sql</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/home/dataplatform/backend/</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="运维工具安装" tabindex="-1">运维工具安装 <a class="header-anchor" href="#运维工具安装" aria-label="Permalink to &quot;运维工具安装&quot;">​</a></h4><blockquote><p><code>sdhelper</code> 是基于 svn 归档来对服务进行安装和升级的辅助工具，支持从 svn 拉取安装包、备份服务、安装服务、回滚服务、查看服务状态等常用操作，具体用法可以使用 <code>sdhelper --help</code> 查看</p></blockquote><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 安装 sdhelper</span></span>
<span class="line"><span style="color:#6A737D;"># ***该工具依赖于 svn_exporter***</span></span>
<span class="line"><span style="color:#B392F0;">svn_exporter</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E5%B7%A5%E5%85%B7/service_deployment_helper/sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">~/bin/</span></span>
<span class="line"><span style="color:#B392F0;">chmod</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">+x</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">~/bin/sdhelper</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看工具使用说明</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--help</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 安装 sdhelper</span></span>
<span class="line"><span style="color:#6A737D;"># ***该工具依赖于 svn_exporter***</span></span>
<span class="line"><span style="color:#6F42C1;">svn_exporter</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E5%B7%A5%E5%85%B7/service_deployment_helper/sdhelper</span><span style="color:#24292E;"> </span><span style="color:#032F62;">~/bin/</span></span>
<span class="line"><span style="color:#6F42C1;">chmod</span><span style="color:#24292E;"> </span><span style="color:#032F62;">+x</span><span style="color:#24292E;"> </span><span style="color:#032F62;">~/bin/sdhelper</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看工具使用说明</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--help</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="获取版本服务清单" tabindex="-1">获取版本服务清单 <a class="header-anchor" href="#获取版本服务清单" aria-label="Permalink to &quot;获取版本服务清单&quot;">​</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 获取部署清单</span></span>
<span class="line"><span style="color:#B392F0;">svn_exporter</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E5%B7%A5%E5%85%B7/service_deployment_helper/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 注意此版本清单，web服务部署在 /home/apaas/web 目录，对应 openresty 监听端口为 7000，与一般实施环境部署目录不同</span></span>
<span class="line"><span style="color:#6A737D;"># ***如果是实施环境升级智慧100v6.1，需要把 web 服务部署到 /home/apaas/websmart 目录，对应 openresty 监听端口为 17000***</span></span>
<span class="line"><span style="color:#6A737D;"># 部署到 /home/apaas/websmart 目录，可以参考以下命令移除 &quot;# dirname: websmart&quot; 配置的注释，也可以手动调整部署清单配置</span></span>
<span class="line"><span style="color:#6A737D;"># sed -i &quot;s/# dirname: websmart/dirname: websmart/g&quot; /tmp/deployment_v61.yaml</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 获取部署清单</span></span>
<span class="line"><span style="color:#6F42C1;">svn_exporter</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E5%B7%A5%E5%85%B7/service_deployment_helper/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 注意此版本清单，web服务部署在 /home/apaas/web 目录，对应 openresty 监听端口为 7000，与一般实施环境部署目录不同</span></span>
<span class="line"><span style="color:#6A737D;"># ***如果是实施环境升级智慧100v6.1，需要把 web 服务部署到 /home/apaas/websmart 目录，对应 openresty 监听端口为 17000***</span></span>
<span class="line"><span style="color:#6A737D;"># 部署到 /home/apaas/websmart 目录，可以参考以下命令移除 &quot;# dirname: websmart&quot; 配置的注释，也可以手动调整部署清单配置</span></span>
<span class="line"><span style="color:#6A737D;"># sed -i &quot;s/# dirname: websmart/dirname: websmart/g&quot; /tmp/deployment_v61.yaml</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="根据服务清单一键安装所有服务" tabindex="-1">根据服务清单一键安装所有服务 <a class="header-anchor" href="#根据服务清单一键安装所有服务" aria-label="Permalink to &quot;根据服务清单一键安装所有服务&quot;">​</a></h3><blockquote><p>一键安装所有服务，<em><strong>仅适用单机部署情况</strong></em>。如需多机部署，请参考后文的单个业务服务安装部分</p></blockquote><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 全新环境安装 datamanager-admin 后，需要替换掉 application.yml 的数据连接配置后重启</span></span>
<span class="line"><span style="color:#6A737D;"># 非首次部署 datamanager-admin 时无需执行此步骤</span></span>
<span class="line"><span style="color:#6A737D;"># ***数据库连接信息请根据实际部署情况调整***</span></span>
<span class="line"><span style="color:#B392F0;">sed</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-i</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;s/172.16.0.150:15432/127.0.0.1:5432/g&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/home/dataplatform/datamanager-admin/application.yml</span></span>
<span class="line"><span style="color:#B392F0;">sed</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-i</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;s/password: csb123456/password: MuhBiyN6agQ9og4c18YM/g&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/home/dataplatform/datamanager-admin/application.yml</span></span>
<span class="line"><span style="color:#B392F0;">sed</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-i</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;s/172.16.0.126:15432/127.0.0.1:5432/g&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/home/dataplatform/datamanager-admin/application.yml</span></span>
<span class="line"><span style="color:#B392F0;">sed</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-i</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;s/dbPassword: csb123456/dbPassword: MuhBiyN6agQ9og4c18YM/g&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/home/dataplatform/datamanager-admin/application.yml</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">datamanager-admin</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">restart</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看 jar 服务状态</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">status</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># jar 服务全部启动正常后，建议重启一下 backend 服务</span></span>
<span class="line"><span style="color:#79B8FF;">cd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/home/apaas/backend</span><span style="color:#E1E4E8;"> &amp;&amp; </span><span style="color:#B392F0;">./BACKEND_operate.sh</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">restart</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#032F62;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 全新环境安装 datamanager-admin 后，需要替换掉 application.yml 的数据连接配置后重启</span></span>
<span class="line"><span style="color:#6A737D;"># 非首次部署 datamanager-admin 时无需执行此步骤</span></span>
<span class="line"><span style="color:#6A737D;"># ***数据库连接信息请根据实际部署情况调整***</span></span>
<span class="line"><span style="color:#6F42C1;">sed</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-i</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;s/172.16.0.150:15432/127.0.0.1:5432/g&quot;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/home/dataplatform/datamanager-admin/application.yml</span></span>
<span class="line"><span style="color:#6F42C1;">sed</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-i</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;s/password: csb123456/password: MuhBiyN6agQ9og4c18YM/g&quot;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/home/dataplatform/datamanager-admin/application.yml</span></span>
<span class="line"><span style="color:#6F42C1;">sed</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-i</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;s/172.16.0.126:15432/127.0.0.1:5432/g&quot;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/home/dataplatform/datamanager-admin/application.yml</span></span>
<span class="line"><span style="color:#6F42C1;">sed</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-i</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;s/dbPassword: csb123456/dbPassword: MuhBiyN6agQ9og4c18YM/g&quot;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/home/dataplatform/datamanager-admin/application.yml</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">datamanager-admin</span><span style="color:#24292E;"> </span><span style="color:#032F62;">restart</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看 jar 服务状态</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#032F62;">status</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># jar 服务全部启动正常后，建议重启一下 backend 服务</span></span>
<span class="line"><span style="color:#005CC5;">cd</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/home/apaas/backend</span><span style="color:#24292E;"> &amp;&amp; </span><span style="color:#6F42C1;">./BACKEND_operate.sh</span><span style="color:#24292E;"> </span><span style="color:#032F62;">restart</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h3 id="单个业务服务安装" tabindex="-1">单个业务服务安装 <a class="header-anchor" href="#单个业务服务安装" aria-label="Permalink to &quot;单个业务服务安装&quot;">​</a></h3><h4 id="accountserv" tabindex="-1">accountserv <a class="header-anchor" href="#accountserv" aria-label="Permalink to &quot;accountserv&quot;">​</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">accountserv</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">accountserv</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">accountserv</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看日志观察是否正常启动</span></span>
<span class="line"><span style="color:#B392F0;">tail</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/home/apaas/backend/apache-tomcat/logs/accountserv/debug.log</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">accountserv</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">accountserv</span><span style="color:#24292E;"> </span><span style="color:#032F62;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">accountserv</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看日志观察是否正常启动</span></span>
<span class="line"><span style="color:#6F42C1;">tail</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-f</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/home/apaas/backend/apache-tomcat/logs/accountserv/debug.log</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="etlserv" tabindex="-1">etlserv <a class="header-anchor" href="#etlserv" aria-label="Permalink to &quot;etlserv&quot;">​</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">etlserv</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">etlserv</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">etlserv</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看日志观察是否正常启动</span></span>
<span class="line"><span style="color:#B392F0;">tail</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/home/apaas/backend/apache-tomcat/logs/etlserv/debug.log</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">etlserv</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">etlserv</span><span style="color:#24292E;"> </span><span style="color:#032F62;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">etlserv</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看日志观察是否正常启动</span></span>
<span class="line"><span style="color:#6F42C1;">tail</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-f</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/home/apaas/backend/apache-tomcat/logs/etlserv/debug.log</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="ideserv" tabindex="-1">ideserv <a class="header-anchor" href="#ideserv" aria-label="Permalink to &quot;ideserv&quot;">​</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ideserv</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ideserv</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ideserv</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看日志观察是否正常启动</span></span>
<span class="line"><span style="color:#B392F0;">tail</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/home/apaas/backend/apache-tomcat/logs/ideserv/debug.log</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ideserv</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ideserv</span><span style="color:#24292E;"> </span><span style="color:#032F62;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ideserv</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看日志观察是否正常启动</span></span>
<span class="line"><span style="color:#6F42C1;">tail</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-f</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/home/apaas/backend/apache-tomcat/logs/ideserv/debug.log</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="masterserv" tabindex="-1">masterserv <a class="header-anchor" href="#masterserv" aria-label="Permalink to &quot;masterserv&quot;">​</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">masterserv</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">masterserv</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">masterserv</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看日志观察是否正常启动</span></span>
<span class="line"><span style="color:#B392F0;">tail</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/home/apaas/backend/apache-tomcat/logs/masterserv/debug.log</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">masterserv</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">masterserv</span><span style="color:#24292E;"> </span><span style="color:#032F62;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">masterserv</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看日志观察是否正常启动</span></span>
<span class="line"><span style="color:#6F42C1;">tail</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-f</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/home/apaas/backend/apache-tomcat/logs/masterserv/debug.log</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="messageserv" tabindex="-1">messageserv <a class="header-anchor" href="#messageserv" aria-label="Permalink to &quot;messageserv&quot;">​</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">messageserv</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">messageserv</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">messageserv</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看日志观察是否正常启动</span></span>
<span class="line"><span style="color:#B392F0;">tail</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/home/apaas/backend/apache-tomcat/logs/messageserv/debug.log</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">messageserv</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">messageserv</span><span style="color:#24292E;"> </span><span style="color:#032F62;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">messageserv</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看日志观察是否正常启动</span></span>
<span class="line"><span style="color:#6F42C1;">tail</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-f</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/home/apaas/backend/apache-tomcat/logs/messageserv/debug.log</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="platformserv" tabindex="-1">platformserv <a class="header-anchor" href="#platformserv" aria-label="Permalink to &quot;platformserv&quot;">​</a></h4><h5 id="注意事项-1" tabindex="-1">注意事项 <a class="header-anchor" href="#注意事项-1" aria-label="Permalink to &quot;注意事项&quot;">​</a></h5><ul><li>此服务所在机器，需要安装 postgresql 客户端以执行开户</li><li>postgresql 执行目录可在 nacos 中进行配置（tenant.db.binpath）</li><li>租户种子文件目录可在 nacos 中进行配置（tenant.db.datapath）</li><li>数据平台种子文件可在 nacos 中进行配置（tenant.dp.datapath）</li><li><em><strong>目前在 PeM5 环境，此服务无法连接 nacos 获取配置，需要特殊处理，具体参考文末 FAQ 部分</strong></em></li></ul><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">platformserv</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">platformserv</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">platformserv</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看日志观察是否正常启动</span></span>
<span class="line"><span style="color:#B392F0;">tail</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/home/apaas/backend/apache-tomcat/logs/platformserv/debug.log</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">platformserv</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">platformserv</span><span style="color:#24292E;"> </span><span style="color:#032F62;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">platformserv</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看日志观察是否正常启动</span></span>
<span class="line"><span style="color:#6F42C1;">tail</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-f</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/home/apaas/backend/apache-tomcat/logs/platformserv/debug.log</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="queueserv" tabindex="-1">queueserv <a class="header-anchor" href="#queueserv" aria-label="Permalink to &quot;queueserv&quot;">​</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">queueserv</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">queueserv</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">queueserv</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看日志观察是否正常启动</span></span>
<span class="line"><span style="color:#B392F0;">tail</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/home/apaas/backend/apache-tomcat/logs/queueserv/debug.log</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">queueserv</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">queueserv</span><span style="color:#24292E;"> </span><span style="color:#032F62;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">queueserv</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看日志观察是否正常启动</span></span>
<span class="line"><span style="color:#6F42C1;">tail</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-f</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/home/apaas/backend/apache-tomcat/logs/queueserv/debug.log</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="taskserv" tabindex="-1">taskserv <a class="header-anchor" href="#taskserv" aria-label="Permalink to &quot;taskserv&quot;">​</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">taskserv</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">taskserv</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">taskserv</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看日志观察是否正常启动</span></span>
<span class="line"><span style="color:#B392F0;">tail</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/home/apaas/backend/apache-tomcat/logs/taskserv/debug.log</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">taskserv</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">taskserv</span><span style="color:#24292E;"> </span><span style="color:#032F62;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">taskserv</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看日志观察是否正常启动</span></span>
<span class="line"><span style="color:#6F42C1;">tail</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-f</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/home/apaas/backend/apache-tomcat/logs/taskserv/debug.log</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="authserver" tabindex="-1">authserver <a class="header-anchor" href="#authserver" aria-label="Permalink to &quot;authserver&quot;">​</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">authserver</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">authserver</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">authserver</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看服务启动状态</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">authserver</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">status</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">authserver</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">authserver</span><span style="color:#24292E;"> </span><span style="color:#032F62;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">authserver</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看服务启动状态</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">authserver</span><span style="color:#24292E;"> </span><span style="color:#032F62;">status</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="resourceconfig-service" tabindex="-1">resourceconfig-service <a class="header-anchor" href="#resourceconfig-service" aria-label="Permalink to &quot;resourceconfig-service&quot;">​</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">resourceconfig-service</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">resourceconfig-service</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">resourceconfig-service</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看服务启动状态</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">resourceconfig-service</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">status</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">resourceconfig-service</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">resourceconfig-service</span><span style="color:#24292E;"> </span><span style="color:#032F62;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">resourceconfig-service</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看服务启动状态</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">resourceconfig-service</span><span style="color:#24292E;"> </span><span style="color:#032F62;">status</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="dynamic-bizengine" tabindex="-1">dynamic-bizengine <a class="header-anchor" href="#dynamic-bizengine" aria-label="Permalink to &quot;dynamic-bizengine&quot;">​</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dynamic-bizengine</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dynamic-bizengine</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dynamic-bizengine</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看服务启动状态</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dynamic-bizengine</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">status</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">dynamic-bizengine</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">dynamic-bizengine</span><span style="color:#24292E;"> </span><span style="color:#032F62;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">dynamic-bizengine</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看服务启动状态</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">dynamic-bizengine</span><span style="color:#24292E;"> </span><span style="color:#032F62;">status</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="impexp" tabindex="-1">impexp <a class="header-anchor" href="#impexp" aria-label="Permalink to &quot;impexp&quot;">​</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">impexp</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">impexp</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">impexp</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看服务启动状态</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">impexp</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">status</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">impexp</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">impexp</span><span style="color:#24292E;"> </span><span style="color:#032F62;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">impexp</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看服务启动状态</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">impexp</span><span style="color:#24292E;"> </span><span style="color:#032F62;">status</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="offline-engine" tabindex="-1">offline-engine <a class="header-anchor" href="#offline-engine" aria-label="Permalink to &quot;offline-engine&quot;">​</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">offline-engine</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">offline-engine</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">offline-engine</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看服务启动状态</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">offline-engine</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">status</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">offline-engine</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">offline-engine</span><span style="color:#24292E;"> </span><span style="color:#032F62;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">offline-engine</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看服务启动状态</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">offline-engine</span><span style="color:#24292E;"> </span><span style="color:#032F62;">status</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="biengine" tabindex="-1">biengine <a class="header-anchor" href="#biengine" aria-label="Permalink to &quot;biengine&quot;">​</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">biengine</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">biengine</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">biengine</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看服务启动状态</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">biengine</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">status</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">biengine</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">biengine</span><span style="color:#24292E;"> </span><span style="color:#032F62;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">biengine</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看服务启动状态</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">biengine</span><span style="color:#24292E;"> </span><span style="color:#032F62;">status</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="apaasadmin" tabindex="-1">apaasadmin <a class="header-anchor" href="#apaasadmin" aria-label="Permalink to &quot;apaasadmin&quot;">​</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">apaasadmin</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">apaasadmin</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">apaasadmin</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看服务启动状态</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">apaasadmin</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">status</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">apaasadmin</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">apaasadmin</span><span style="color:#24292E;"> </span><span style="color:#032F62;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">apaasadmin</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看服务启动状态</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">apaasadmin</span><span style="color:#24292E;"> </span><span style="color:#032F62;">status</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="flowengine-rest" tabindex="-1">flowengine-rest <a class="header-anchor" href="#flowengine-rest" aria-label="Permalink to &quot;flowengine-rest&quot;">​</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">flowengine-rest</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">flowengine-rest</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">flowengine-rest</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看服务启动状态</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">flowengine-rest</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">status</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">flowengine-rest</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">flowengine-rest</span><span style="color:#24292E;"> </span><span style="color:#032F62;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">flowengine-rest</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看服务启动状态</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">flowengine-rest</span><span style="color:#24292E;"> </span><span style="color:#032F62;">status</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="processdesigner" tabindex="-1">processdesigner <a class="header-anchor" href="#processdesigner" aria-label="Permalink to &quot;processdesigner&quot;">​</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">processdesigner</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">processdesigner</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">processdesigner</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">processdesigner</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">processdesigner</span><span style="color:#24292E;"> </span><span style="color:#032F62;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">processdesigner</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="announcement-rest" tabindex="-1">announcement-rest <a class="header-anchor" href="#announcement-rest" aria-label="Permalink to &quot;announcement-rest&quot;">​</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">announcement-rest</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">announcement-rest</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">announcement-rest</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看服务启动状态</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">announcement-rest</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">status</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">announcement-rest</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">announcement-rest</span><span style="color:#24292E;"> </span><span style="color:#032F62;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">announcement-rest</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看服务启动状态</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">announcement-rest</span><span style="color:#24292E;"> </span><span style="color:#032F62;">status</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="opendata" tabindex="-1">opendata <a class="header-anchor" href="#opendata" aria-label="Permalink to &quot;opendata&quot;">​</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">opendata</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">opendata</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">opendata</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看服务启动状态</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">opendata</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">status</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">opendata</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">opendata</span><span style="color:#24292E;"> </span><span style="color:#032F62;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">opendata</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看服务启动状态</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">opendata</span><span style="color:#24292E;"> </span><span style="color:#032F62;">status</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="litheform-service" tabindex="-1">litheform-service <a class="header-anchor" href="#litheform-service" aria-label="Permalink to &quot;litheform-service&quot;">​</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">litheform-service</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">litheform-service</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">litheform-service</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看服务启动状态</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">litheform-service</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">status</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">litheform-service</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">litheform-service</span><span style="color:#24292E;"> </span><span style="color:#032F62;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">litheform-service</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看服务启动状态</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">litheform-service</span><span style="color:#24292E;"> </span><span style="color:#032F62;">status</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="lightform-web" tabindex="-1">lightform-web <a class="header-anchor" href="#lightform-web" aria-label="Permalink to &quot;lightform-web&quot;">​</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">lightform-web</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">lightform-web</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">lightform-web</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">lightform-web</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">lightform-web</span><span style="color:#24292E;"> </span><span style="color:#032F62;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">lightform-web</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="lightform-configuration" tabindex="-1">lightform-configuration <a class="header-anchor" href="#lightform-configuration" aria-label="Permalink to &quot;lightform-configuration&quot;">​</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">lightform-configuration</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">lightform-configuration</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">lightform-configuration</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">lightform-configuration</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">lightform-configuration</span><span style="color:#24292E;"> </span><span style="color:#032F62;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">lightform-configuration</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="apaas-web" tabindex="-1">apaas/web <a class="header-anchor" href="#apaas-web" aria-label="Permalink to &quot;apaas/web&quot;">​</a></h4><h5 id="注意事项-2" tabindex="-1">注意事项 <a class="header-anchor" href="#注意事项-2" aria-label="Permalink to &quot;注意事项&quot;">​</a></h5><ul><li>由于 <code>/home/apaas</code> 目录和 <code>/home/ipaas</code> 目录下都有一个 web 服务，所以这两个服务安装时要一定要加上前缀。注意要使用 <code>-s apaas/web</code> 安装此服务，而不是 <code>-s web</code></li><li>实施环境此服务安装于 /home/apaas/websmart 目录，对应 17000 端口。智慧100环境此服务安装于 /home/apaas/web 目录，对应 7000 端口。安装此服务时需要额外注意</li></ul><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 归档的服务部署清单配置文件中将此服务安装于 /home/apaas/web 目录，若需安装到到 /home/apaas/websmart 目录，可以参考以下命令移除 &quot;# dirname: websmart&quot; 配置的注释，也可以手动调整部署清单配置</span></span>
<span class="line"><span style="color:#6A737D;"># sed -i &quot;s/# dirname: websmart/dirname: websmart/g&quot; /tmp/deployment_v61.yaml</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">apaas/web</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">apaas/web</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">apaas/web</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 归档的服务部署清单配置文件中将此服务安装于 /home/apaas/web 目录，若需安装到到 /home/apaas/websmart 目录，可以参考以下命令移除 &quot;# dirname: websmart&quot; 配置的注释，也可以手动调整部署清单配置</span></span>
<span class="line"><span style="color:#6A737D;"># sed -i &quot;s/# dirname: websmart/dirname: websmart/g&quot; /tmp/deployment_v61.yaml</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">apaas/web</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">apaas/web</span><span style="color:#24292E;"> </span><span style="color:#032F62;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">apaas/web</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="appmanager" tabindex="-1">appmanager <a class="header-anchor" href="#appmanager" aria-label="Permalink to &quot;appmanager&quot;">​</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">appmanager</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">appmanager</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">appmanager</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">appmanager</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">appmanager</span><span style="color:#24292E;"> </span><span style="color:#032F62;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">appmanager</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="productoperation" tabindex="-1">productoperation <a class="header-anchor" href="#productoperation" aria-label="Permalink to &quot;productoperation&quot;">​</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">productoperation</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">productoperation</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">productoperation</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">productoperation</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">productoperation</span><span style="color:#24292E;"> </span><span style="color:#032F62;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">productoperation</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="k100master" tabindex="-1">k100master <a class="header-anchor" href="#k100master" aria-label="Permalink to &quot;k100master&quot;">​</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">k100master</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">k100master</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">k100master</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">k100master</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">k100master</span><span style="color:#24292E;"> </span><span style="color:#032F62;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">k100master</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="dym-plugin" tabindex="-1">dym-plugin <a class="header-anchor" href="#dym-plugin" aria-label="Permalink to &quot;dym-plugin&quot;">​</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dym-plugin</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dym-plugin</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dym-plugin</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看服务启动状态</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dym-plugin</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">status</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">dym-plugin</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">dym-plugin</span><span style="color:#24292E;"> </span><span style="color:#032F62;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">dym-plugin</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看服务启动状态</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">dym-plugin</span><span style="color:#24292E;"> </span><span style="color:#032F62;">status</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="direport" tabindex="-1">direport <a class="header-anchor" href="#direport" aria-label="Permalink to &quot;direport&quot;">​</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">direport</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">direport</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">direport</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看服务启动状态</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">direport</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">status</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">direport</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">direport</span><span style="color:#24292E;"> </span><span style="color:#032F62;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">direport</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看服务启动状态</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">direport</span><span style="color:#24292E;"> </span><span style="color:#032F62;">status</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="wechatservice" tabindex="-1">wechatservice <a class="header-anchor" href="#wechatservice" aria-label="Permalink to &quot;wechatservice&quot;">​</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">wechatservice</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">wechatservice</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">wechatservice</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看服务启动状态</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">wechatservice</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">status</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">wechatservice</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">wechatservice</span><span style="color:#24292E;"> </span><span style="color:#032F62;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">wechatservice</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看服务启动状态</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">wechatservice</span><span style="color:#24292E;"> </span><span style="color:#032F62;">status</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="h5-app" tabindex="-1">h5-app <a class="header-anchor" href="#h5-app" aria-label="Permalink to &quot;h5-app&quot;">​</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">h5-app</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">h5-app</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">h5-app</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">h5-app</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">h5-app</span><span style="color:#24292E;"> </span><span style="color:#032F62;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">h5-app</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="h5-ide" tabindex="-1">h5-ide <a class="header-anchor" href="#h5-ide" aria-label="Permalink to &quot;h5-ide&quot;">​</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">h5-ide</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">h5-ide</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">h5-ide</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">h5-ide</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">h5-ide</span><span style="color:#24292E;"> </span><span style="color:#032F62;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">h5-ide</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="license-service" tabindex="-1">license-service <a class="header-anchor" href="#license-service" aria-label="Permalink to &quot;license-service&quot;">​</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">license-service</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">license-service</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">license-service</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看服务启动状态</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">license-service</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">status</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">license-service</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">license-service</span><span style="color:#24292E;"> </span><span style="color:#032F62;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">license-service</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看服务启动状态</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">license-service</span><span style="color:#24292E;"> </span><span style="color:#032F62;">status</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="xwdatax" tabindex="-1">xwdatax <a class="header-anchor" href="#xwdatax" aria-label="Permalink to &quot;xwdatax&quot;">​</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">xwdatax</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">xwdatax</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">xwdatax</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">xwdatax</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">xwdatax</span><span style="color:#24292E;"> </span><span style="color:#032F62;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">xwdatax</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="datamanager-admin" tabindex="-1">datamanager-admin <a class="header-anchor" href="#datamanager-admin" aria-label="Permalink to &quot;datamanager-admin&quot;">​</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">datamanager-admin</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">datamanager-admin</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">datamanager-admin</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># ***归档包包含 application.yml 文件，首次安装时，需手动替换配置中的连接信息，后重启服务***</span></span>
<span class="line"><span style="color:#6A737D;"># ***数据库连接信息请根据实际部署情况调整***</span></span>
<span class="line"><span style="color:#B392F0;">sed</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-i</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;s/172.16.0.150:15432/127.0.0.1:5432/g&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/home/dataplatform/datamanager-admin/application.yml</span></span>
<span class="line"><span style="color:#B392F0;">sed</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-i</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;s/password: csb123456/password: MuhBiyN6agQ9og4c18YM/g&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/home/dataplatform/datamanager-admin/application.yml</span></span>
<span class="line"><span style="color:#B392F0;">sed</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-i</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;s/172.16.0.126:15432/127.0.0.1:5432/g&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/home/dataplatform/datamanager-admin/application.yml</span></span>
<span class="line"><span style="color:#B392F0;">sed</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-i</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;s/dbPassword: csb123456/dbPassword: MuhBiyN6agQ9og4c18YM/g&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/home/dataplatform/datamanager-admin/application.yml</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">datamanager-admin</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">restart</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看服务启动状态</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">datamanager-admin</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">status</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">datamanager-admin</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">datamanager-admin</span><span style="color:#24292E;"> </span><span style="color:#032F62;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">datamanager-admin</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># ***归档包包含 application.yml 文件，首次安装时，需手动替换配置中的连接信息，后重启服务***</span></span>
<span class="line"><span style="color:#6A737D;"># ***数据库连接信息请根据实际部署情况调整***</span></span>
<span class="line"><span style="color:#6F42C1;">sed</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-i</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;s/172.16.0.150:15432/127.0.0.1:5432/g&quot;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/home/dataplatform/datamanager-admin/application.yml</span></span>
<span class="line"><span style="color:#6F42C1;">sed</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-i</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;s/password: csb123456/password: MuhBiyN6agQ9og4c18YM/g&quot;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/home/dataplatform/datamanager-admin/application.yml</span></span>
<span class="line"><span style="color:#6F42C1;">sed</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-i</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;s/172.16.0.126:15432/127.0.0.1:5432/g&quot;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/home/dataplatform/datamanager-admin/application.yml</span></span>
<span class="line"><span style="color:#6F42C1;">sed</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-i</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;s/dbPassword: csb123456/dbPassword: MuhBiyN6agQ9og4c18YM/g&quot;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/home/dataplatform/datamanager-admin/application.yml</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">datamanager-admin</span><span style="color:#24292E;"> </span><span style="color:#032F62;">restart</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看服务启动状态</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">datamanager-admin</span><span style="color:#24292E;"> </span><span style="color:#032F62;">status</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h4 id="datamanager-web" tabindex="-1">datamanager-web <a class="header-anchor" href="#datamanager-web" aria-label="Permalink to &quot;datamanager-web&quot;">​</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">datamanager-web</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">datamanager-web</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">datamanager-web</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">datamanager-web</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">datamanager-web</span><span style="color:#24292E;"> </span><span style="color:#032F62;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">datamanager-web</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="dataintegration-executor" tabindex="-1">dataintegration-executor <a class="header-anchor" href="#dataintegration-executor" aria-label="Permalink to &quot;dataintegration-executor&quot;">​</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dataintegration-executor</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dataintegration-executor</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dataintegration-executor</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看服务启动状态</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dataintegration-executor</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">status</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">dataintegration-executor</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">dataintegration-executor</span><span style="color:#24292E;"> </span><span style="color:#032F62;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">dataintegration-executor</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看服务启动状态</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">dataintegration-executor</span><span style="color:#24292E;"> </span><span style="color:#032F62;">status</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="bimobileweb" tabindex="-1">bimobileweb <a class="header-anchor" href="#bimobileweb" aria-label="Permalink to &quot;bimobileweb&quot;">​</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">bimobileweb</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">bimobileweb</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">bimobileweb</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">bimobileweb</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">bimobileweb</span><span style="color:#24292E;"> </span><span style="color:#032F62;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">bimobileweb</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="admin" tabindex="-1">admin <a class="header-anchor" href="#admin" aria-label="Permalink to &quot;admin&quot;">​</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">admin</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">admin</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">admin</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看服务启动状态</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">admin</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">status</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">admin</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">admin</span><span style="color:#24292E;"> </span><span style="color:#032F62;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">admin</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看服务启动状态</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">admin</span><span style="color:#24292E;"> </span><span style="color:#032F62;">status</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="flystep" tabindex="-1">flystep <a class="header-anchor" href="#flystep" aria-label="Permalink to &quot;flystep&quot;">​</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">flystep</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">flystep</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">flystep</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看服务启动状态</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">flystep</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">status</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">flystep</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">flystep</span><span style="color:#24292E;"> </span><span style="color:#032F62;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">flystep</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看服务启动状态</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">flystep</span><span style="color:#24292E;"> </span><span style="color:#032F62;">status</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="router" tabindex="-1">router <a class="header-anchor" href="#router" aria-label="Permalink to &quot;router&quot;">​</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">router</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">router</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">router</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看服务启动状态</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">router</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">status</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">router</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">router</span><span style="color:#24292E;"> </span><span style="color:#032F62;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">router</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看服务启动状态</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">router</span><span style="color:#24292E;"> </span><span style="color:#032F62;">status</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="ipaas-web" tabindex="-1">ipaas/web <a class="header-anchor" href="#ipaas-web" aria-label="Permalink to &quot;ipaas/web&quot;">​</a></h4><h5 id="注意事项-3" tabindex="-1">注意事项 <a class="header-anchor" href="#注意事项-3" aria-label="Permalink to &quot;注意事项&quot;">​</a></h5><ul><li>由于 <code>/home/apaas</code> 目录和 <code>/home/ipaas</code> 目录下都有一个 web 服务，所以这两个服务安装时要一定要加上前缀。注意要使用 <code>-s ipaas/web</code> 安装此服务，而不是 <code>-s web</code></li></ul><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ipaas/web</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ipaas/web</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#B392F0;">sdhelper</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/tmp/deployment_v61.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ipaas/web</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 拉取清单程序包</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ipaas/web</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 备份清单所有服务（全新环境无需做备份）</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ipaas/web</span><span style="color:#24292E;"> </span><span style="color:#032F62;">backup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 安装服务</span></span>
<span class="line"><span style="color:#6F42C1;">sdhelper</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/tmp/deployment_v61.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ipaas/web</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="五、开户验证" tabindex="-1">五、开户验证 <a class="header-anchor" href="#五、开户验证" aria-label="Permalink to &quot;五、开户验证&quot;">​</a></h2><h3 id="_1-导入v6-1元数据" tabindex="-1">1. 导入V6.1元数据 <a class="header-anchor" href="#_1-导入v6-1元数据" aria-label="Permalink to &quot;1\\. 导入V6.1元数据&quot;">​</a></h3><ol><li>下载 v2.9 版本IDE <ul><li>MacOS版本：<a href="https://xwsvn.wxchina.com/apaas/IDE/V2.9MAC/aPaaS-IDE-V2.9.16-darwin-x64.zip" target="_blank" rel="noreferrer">https://xwsvn.wxchina.com/apaas/IDE/V2.9MAC/aPaaS-IDE-V2.9.16-darwin-x64.zip</a></li><li>Windows版本：<a href="https://xwsvn.wxchina.com/apaas/IDE/V2.9Win/aPaaS-IDE-V2.9.16-win32-x64.zip" target="_blank" rel="noreferrer">https://xwsvn.wxchina.com/apaas/IDE/V2.9Win/aPaaS-IDE-V2.9.16-win32-x64.zip</a></li></ul></li><li>安装IDE后进入，添加新环境信息 <ul><li>配置服务地址：<code>http://{openresty部署服务器外网ip}:8001</code></li><li>业务服务地址：<code>http://{openresty部署服务器外网ip}:7000</code></li></ul></li><li>选择新建的环境信息，使用自己的开发账号登录（账号可在产品运营平台创建，注册后主要要设置为<code>产品开发</code>角色）</li><li>下载元数据归档，svn 地址为 <a href="https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%9D%E5%A7%8B%E5%8C%96/apaas/MetaModel-2022-11-23.zip" target="_blank" rel="noreferrer">https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E8%BF%90%E7%BB%B4%E4%BA%A4%E4%BB%98%E5%8C%85/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%9D%E5%A7%8B%E5%8C%96/apaas/MetaModel-2022-11-23.zip</a></li><li>点击左上角 <code>产品管理</code> -&gt; <code>导入</code>，选择下载的元数据压缩包进行导入</li><li>导入完毕后，如果存在部分 SQL 导入失败，会提示下载失败的 SQL，请下载保存。保存后解压文件，在本地数据库客户端连接 <code>xw_metadata</code> 数据库，手动尝试导入失败的SQL（部分SQL可能因为引号问题，会插入失败，可以尝试调整SQL后再次插入）</li></ol><h3 id="_2-开户验证" tabindex="-1">2. 开户验证 <a class="header-anchor" href="#_2-开户验证" aria-label="Permalink to &quot;2\\. 开户验证&quot;">​</a></h3><ol><li>浏览器进入产品运营平台，地址为：<code>http://{openresty部署服务器外网ip}:9018</code></li><li>使用账号 <code>tantan</code> 登录，密码为 <code>tantan123456</code></li><li>点击 <code>新建企业</code>，填写配置信息后完成创建</li><li>点击 <code>快捷开户</code>，填写配置信息后点击 <code>开户</code></li><li>等待开户完成（若步骤执行失败，可以到服务端看日志进行排查，常见问题可参考文末 FAQ 部分）</li><li>开户完成后租户默认为随机密码。可以点击 <code>管理员账号管理</code> 新增一个管理员账号，密码默认为 <code>123456</code></li><li>浏览器进入智慧100 web 页面，地址为：<code>http://{openresty部署服务器外网ip}:7000</code></li><li>使用新建的管理员账号登录系统，进行常规功能验证（遇到报错，可以到后端根据日志排查，常见问题可以参考文末 FAQ 部分）</li><li>验证无误则恭喜开户成功！🎉</li></ol><h2 id="部署常见问题-faq" tabindex="-1">部署常见问题 FAQ <a class="header-anchor" href="#部署常见问题-faq" aria-label="Permalink to &quot;部署常见问题 FAQ&quot;">​</a></h2><h3 id="工具问题" tabindex="-1">工具问题 <a class="header-anchor" href="#工具问题" aria-label="Permalink to &quot;工具问题&quot;">​</a></h3><h4 id="q-svn-连接超时-无法通过-svn-下载归档资源" tabindex="-1">Q: svn 连接超时，无法通过 svn 下载归档资源 <a class="header-anchor" href="#q-svn-连接超时-无法通过-svn-下载归档资源" aria-label="Permalink to &quot;Q: svn 连接超时，无法通过 svn 下载归档资源&quot;">​</a></h4><p>A: 目前发现部分华为云服务器ip网段对 xwsvn.wxchina.com 的请求被拒绝，这种情况无法直接通过 svn 下载对应对资源。可以在本地或者任何可以访问 svn 的机器上执行对应下载命令，然后通过 scp 或者其他方式将资源上传到服务器上。</p><h4 id="q-svn-提示输入-root-密码" tabindex="-1">Q: svn 提示输入 root 密码 <a class="header-anchor" href="#q-svn-提示输入-root-密码" aria-label="Permalink to &quot;Q: svn 提示输入 root 密码&quot;">​</a></h4><p>A: 未指定用户名时，svn 默认尝试以系统当前登录用户作为用户名进行登录。一般我们的 svn 账号都不是 root，这个时候直接回车跳过即可。跳过后会提示输入用户名和密码，此时再根据自身 svn 账号密码输入即可。svn 登录成功后会提示是否保存密码，建议选择 yes 保存密码，方便进行后续资源的下载。环境部署完成后，若想移除保存的 svn 密码，可以执行 <code>rm -rf ~/.subversion/auth</code> 清除保存的密码信息。</p><h4 id="q-sdhelper-工具下载的安装包放在哪个位置" tabindex="-1">Q: sdhelper 工具下载的安装包放在哪个位置 <a class="header-anchor" href="#q-sdhelper-工具下载的安装包放在哪个位置" aria-label="Permalink to &quot;Q: sdhelper 工具下载的安装包放在哪个位置&quot;">​</a></h4><p>A: 安装包下载位置可以通过配置文件 <code>deployment_v61.yaml</code> 中的 <code>deploy_home.package</code> 选项进行调整。目前归档的配置，此选项设置为 <code>/home/apaas/service_deployment_package</code>，因为在多数实施环境，数据盘挂载在 <code>/home/apaas</code> 目录，磁盘空间不会太紧张。若服务器无法直接访问 svn，可以在其他机器上执行 <code>pull</code> 命令进行下载，下载完成后，再通过 <code>scp</code> 命令或其他方式将此目录同步到服务器上。</p><h4 id="q-sdhelper-工具是怎么做备份的-服务目录下原来的文件和日志能否找回" tabindex="-1">Q: sdhelper 工具是怎么做备份的，服务目录下原来的文件和日志能否找回 <a class="header-anchor" href="#q-sdhelper-工具是怎么做备份的-服务目录下原来的文件和日志能否找回" aria-label="Permalink to &quot;Q: sdhelper 工具是怎么做备份的，服务目录下原来的文件和日志能否找回&quot;">​</a></h4><p>A: 为了维持服务目录的干净整洁，sdhelper 备份时，会将整个服务目录压缩，以 <code>{服务目录名}.{日期}.tar.gz</code> 的命名格式，保存在配置文件 <code>deploy_home.backup</code> 选项设定的目录里。归档的 <code>deployment_v61.yaml</code> 文件此选项设置为 <code>/home/apaas/service_deployment_backup</code>。安装服务时，会将原服务目录整个清空，然后再用服务归档安装包初始化服务目录。若需要找回原服务目录下的文件，可以根据日期从备份文件中找回。如果有某些文件，安装时确认需要做保留，可以在 <code>deployment_v61.yaml</code> 中配置对应服务的的 <code>keeps</code> 选项，此数组定义的文件会在服务安装时自动做保留。</p><h3 id="异常排查思路" tabindex="-1">异常排查思路 <a class="header-anchor" href="#异常排查思路" aria-label="Permalink to &quot;异常排查思路&quot;">​</a></h3><h4 id="q-根据服务的ip和端口-如何判断对应了哪个服务" tabindex="-1">Q: 根据服务的ip和端口，如何判断对应了哪个服务 <a class="header-anchor" href="#q-根据服务的ip和端口-如何判断对应了哪个服务" aria-label="Permalink to &quot;Q: 根据服务的ip和端口，如何判断对应了哪个服务&quot;">​</a></h4><p>A: 有几个判断思路供参考：</p><ul><li>多机部署的环境，请结合前面整理的 <a href="#2-整理服务部署清单">服务部署清单</a> 查看具体的ip和端口对应哪个服务</li><li>单机部署的环境，如果没有整理服务部署清单，可以根据 <a href="https://xwsvn.wxchina.com/doc1/zhihui100/V6.1/%E6%96%87%E6%A1%A3%E6%95%B4%E7%90%86/%E6%99%BA%E6%85%A7100V6.1%E6%9C%8D%E5%8A%A1%E6%B8%85%E5%8D%95.xlsx" target="_blank" rel="noreferrer">智慧100V6.1服务清单</a> 里面的端口进行判断</li><li>如果是客户端请求提供的ip和端口，一般对应的是路由网关服务 openresty，不是具体业务服务的ip和端口，可以通过 nginx 日志进一步判断具体业务服务</li></ul><h4 id="q-如何查看nginx日志" tabindex="-1">Q: 如何查看nginx日志 <a class="header-anchor" href="#q-如何查看nginx日志" aria-label="Permalink to &quot;Q: 如何查看nginx日志&quot;">​</a></h4><p>A: 参考思路：</p><ol><li>多机部署的环境，请先确定部署 openresty 或者 nginx 服务的具体机器。单机部署的环境可以忽略此步骤</li><li>登录服务器后可以使用 <code>tail -f /usr/local/openresty/nginx/logs/access.log</code> 或相似命令滚动查看路由访问日志</li><li>从接口请求的访问日志中可以判断请求路由的上游地址（后端服务ip和端口），进而判断具体路由到的业务服务</li><li>从前端静态资源的访问日志中可以判断请求状态码（具体静态资源位置需到nginx配置中具体查看）</li></ol><h4 id="q-nginx路由的服务ip地址不对-需要在哪里修正" tabindex="-1">Q: nginx路由的服务ip地址不对，需要在哪里修正 <a class="header-anchor" href="#q-nginx路由的服务ip地址不对-需要在哪里修正" aria-label="Permalink to &quot;Q: nginx路由的服务ip地址不对，需要在哪里修正&quot;">​</a></h4><p>A: 参考思路：</p><ul><li>在路由服务所在机器的 <code>/usr/local/openresty/nginx/scripts/config/all_upstream.conf</code> 文件，可以配置大部分服务的上游地址</li><li>部分路由的上游地址不够规范，需要在 <code>/usr/local/openresty/nginx/conf/nginx.conf</code> 中进行配置</li><li>一般来说，多机部署环境都需要检查和调整以上文件，把没部署在路由服务相同机器上的服务地址改为具体内网ip地址</li></ul><h4 id="q-接口请求出错了-如何确定接口请求了哪个服务" tabindex="-1">Q: 接口请求出错了，如何确定接口请求了哪个服务 <a class="header-anchor" href="#q-接口请求出错了-如何确定接口请求了哪个服务" aria-label="Permalink to &quot;Q: 接口请求出错了，如何确定接口请求了哪个服务&quot;">​</a></h4><p>A: 有几个判断思路供参考：</p><ul><li>根据当前使用的业务功能判断（不一定可靠）</li><li>根据请求接口路径名进行分析判断（不一定可靠）</li><li>如果是服务间请求，一般不经过路由网关，可以根据请求端口和ip进行判断（可靠）</li><li>如果是客户端请求（或者经过路由转发的服务间请求），一般会经过路由网关，可以从nginx日志查看具体的服务路由端口和ip，进而进行判断（可靠）</li></ul><h4 id="q-如何查看服务日志" tabindex="-1">Q: 如何查看服务日志 <a class="header-anchor" href="#q-如何查看服务日志" aria-label="Permalink to &quot;Q: 如何查看服务日志&quot;">​</a></h4><p>A: 参考思路：</p><ol><li>首先从运维处获得服务器密码，登入服务器</li><li>结合服务部署清单、智慧100V6.1服务清单或 <code>deployment_v61.yaml</code> 配置文件，确认服务安装目录</li><li>进入服务目录使用 <code>tail</code> 或 <code>less</code> 等命令查看 <code>logs/debug.log</code> 或者 <code>logs/error.log</code> 等文件</li></ol><h4 id="q-服务启动失败如何排查" tabindex="-1">Q: 服务启动失败如何排查 <a class="header-anchor" href="#q-服务启动失败如何排查" aria-label="Permalink to &quot;Q: 服务启动失败如何排查&quot;">​</a></h4><p>A: 参考思路：</p><ol><li>根据日志，判断 nacos 连接是否正常，如果连不上nacos，请参考 <a href="#q-platformserv-服务没连上-nacos">Q: platformserv 服务没连上 nacos</a></li><li>根据日志，判断是哪个 nacos 配置有异常，导致了报错，并检查 nacos 配置（可以导出nacos配置后全局关键字查找）</li><li>部分服务未接入nacos（如一站式报表平台相关服务），请检查 spring 配置文件是否配置正确</li><li>请检查服务资源是否充足，比如磁盘资源是否足够，内存资源是否足够</li><li>业务问题需根据服务日志具体排查</li></ol><h4 id="q-根目录-的磁盘满了-是什么问题" tabindex="-1">Q: 根目录(/)的磁盘满了，是什么问题 <a class="header-anchor" href="#q-根目录-的磁盘满了-是什么问题" aria-label="Permalink to &quot;Q: 根目录(/)的磁盘满了，是什么问题&quot;">​</a></h4><p>A: 参考思路：</p><ul><li>请确认是否挂载了数据盘</li><li>请确认数据盘挂载目录是否正确，能覆盖部署服务的安装路径</li><li>请检查 nginx 日志文件是否过大，导致根目录满了。如果是此问题，可以通过配置日志切分和滚动清除解决</li><li>请扫描是否有其他特别的大文件占用了空间</li><li>若排除以上问题，请联系运维同事进行扩容</li></ul><h3 id="服务安装异常" tabindex="-1">服务安装异常 <a class="header-anchor" href="#服务安装异常" aria-label="Permalink to &quot;服务安装异常&quot;">​</a></h3><h4 id="q-业务服务没有正确连接上-nacos-导致启动失败或者其他异常" tabindex="-1">Q: 业务服务没有正确连接上 nacos，导致启动失败或者其他异常 <a class="header-anchor" href="#q-业务服务没有正确连接上-nacos-导致启动失败或者其他异常" aria-label="Permalink to &quot;Q: 业务服务没有正确连接上 nacos，导致启动失败或者其他异常&quot;">​</a></h4><p>A: 请检查以下配置文件是否存在，并且 nacos 地址和端口配置正确</p><ul><li><code>/home/apaas/application.properties</code></li><li><code>/home/apaas/backend/apache-tomcat/bin/application.properties</code></li><li><code>/home/dataplatform/application.properties</code>（可选）</li><li><code>/home/ipaas/application.yml</code></li></ul><h4 id="q-业务服务报错连接数据库、redis超时-或请求其他服务超时" tabindex="-1">Q: 业务服务报错连接数据库、redis超时，或请求其他服务超时 <a class="header-anchor" href="#q-业务服务报错连接数据库、redis超时-或请求其他服务超时" aria-label="Permalink to &quot;Q: 业务服务报错连接数据库、redis超时，或请求其他服务超时&quot;">​</a></h4><p>A: 根据日志判断请求地址、端口或密码是否有误，如果有误，可以将nacos配置导出，全局搜索快速定位到配置位置，并进行修正</p><h4 id="q-请求-backend-18080-端口超时" tabindex="-1">Q: 请求 backend 18080 端口超时 <a class="header-anchor" href="#q-请求-backend-18080-端口超时" aria-label="Permalink to &quot;Q: 请求 backend 18080 端口超时&quot;">​</a></h4><p>A: apache-tomcat 默认监听端口为 8080，需要修改，请检查配置文件 /home/apaas/backend/apache-tomcat/conf/server.xml 的端口设置是否正确</p><h4 id="q-如何判断-backend-相关服务是否启动成功-或者是否挂了" tabindex="-1">Q: 如何判断 backend 相关服务是否启动成功，或者是否挂了 <a class="header-anchor" href="#q-如何判断-backend-相关服务是否启动成功-或者是否挂了" aria-label="Permalink to &quot;Q: 如何判断 backend 相关服务是否启动成功，或者是否挂了&quot;">​</a></h4><p>A: 思路如下：</p><ul><li>使用 backend 服务运维脚本启动 tomcat 完成后，需要进入 <code>/home/apaas/backend/apache-tomcat/logs</code> 目录查看具体每个服务的日志是否有写入，是否有刷出 spring 启动成功的日志，从而判断 backend 相关服务是否启动成功。</li><li>如果某个服务的最新日志停留在一个较早时间，可以初步判断该服务已经挂了，需要对 backend 服务进行重启。</li><li>ideserv 服务需要特别关注一下，如果 backend 启动后服务没刷日志，需要尝试再次重启 backend 服务，直到日志正常输出，并最终输出 spring 启动成功信息。</li><li><code>/home/apaas/backend/apache-tomcat/bin/catalina.sh</code> 文件中可以设置 jvm 参数，调大堆内存，可以一定程度让 backend 服务启动更加顺畅。</li></ul><h4 id="q-请求-backend-相关服务404" tabindex="-1">Q: 请求 backend 相关服务404 <a class="header-anchor" href="#q-请求-backend-相关服务404" aria-label="Permalink to &quot;Q: 请求 backend 相关服务404&quot;">​</a></h4><p>A: 若一切配置正常，请观察 backend 相关服务的日志是否有正常输出，若新无日志输出，可能相关服务挂了，请重启 backend 服务后再尝试观察日志</p><h3 id="开户失败" tabindex="-1">开户失败 <a class="header-anchor" href="#开户失败" aria-label="Permalink to &quot;开户失败&quot;">​</a></h3><h4 id="q-初始化数据库失败-报错缺少-pg-restore-命令" tabindex="-1">Q: 初始化数据库失败，报错缺少 pg_restore 命令 <a class="header-anchor" href="#q-初始化数据库失败-报错缺少-pg-restore-命令" aria-label="Permalink to &quot;Q: 初始化数据库失败，报错缺少 pg\\_restore 命令&quot;">​</a></h4><p>A: platformserv 所在机器需要安装 postgresql 客户端，同时确保 nacos 配置 {tenant.db.binpath} 路径设置正确</p><h4 id="q-初始化数据库失败-报错缺少对应种子库文件" tabindex="-1">Q: 初始化数据库失败，报错缺少对应种子库文件 <a class="header-anchor" href="#q-初始化数据库失败-报错缺少对应种子库文件" aria-label="Permalink to &quot;Q: 初始化数据库失败，报错缺少对应种子库文件&quot;">​</a></h4><p>A: 请确保租户种子库文件已放置于 platformserv 所在服务器上，并且 nacos 配置 {tenant.db.datapath} 路径设置正确</p><h4 id="q-初始化数据平台失败-报错缺少对应种子库库文件" tabindex="-1">Q: 初始化数据平台失败，报错缺少对应种子库库文件 <a class="header-anchor" href="#q-初始化数据平台失败-报错缺少对应种子库库文件" aria-label="Permalink to &quot;Q: 初始化数据平台失败，报错缺少对应种子库库文件&quot;">​</a></h4><p>A: 请确保数据平台种子库文件已放置于 platformserv 所在服务器上，并且 nacos 配置 {tenant.dp.datapath} 路径设置正确</p><h4 id="q-初始租户数据库失败-报错-cannot-execute-create-schema-in-a-read-only-transaction" tabindex="-1">Q: 初始租户数据库失败，报错 &quot;cannot execute CREATE SCHEMA in a read-only transaction&quot; <a class="header-anchor" href="#q-初始租户数据库失败-报错-cannot-execute-create-schema-in-a-read-only-transaction" aria-label="Permalink to &quot;Q: 初始租户数据库失败，报错 &quot;cannot execute CREATE SCHEMA in a read-only transaction&quot;&quot;">​</a></h4><p>A: 请检查 nacos 数据库主从配置是否设置错误</p><h4 id="q-platformserv-服务没连上-nacos" tabindex="-1">Q: platformserv 服务没连上 nacos <a class="header-anchor" href="#q-platformserv-服务没连上-nacos" aria-label="Permalink to &quot;Q: platformserv 服务没连上 nacos&quot;">​</a></h4><p>A: <em><strong>目前在 PeM5 实施环境，存在此问题</strong></em>。部署完 platformserv 服务后，需要进入 webapps 的 platformserv 目录内，<em><strong>手动修改 application.properties 配置文件，调整为正确的参数后重启 tomcat</strong></em>。全新环境一般不会有此问题。</p><h3 id="业务错误" tabindex="-1">业务错误 <a class="header-anchor" href="#业务错误" aria-label="Permalink to &quot;业务错误&quot;">​</a></h3><h4 id="q-服务多实例部署时-插入数据时生成的-id-出现冲突" tabindex="-1">Q: 服务多实例部署时，插入数据时生成的 id 出现冲突 <a class="header-anchor" href="#q-服务多实例部署时-插入数据时生成的-id-出现冲突" aria-label="Permalink to &quot;Q: 服务多实例部署时，插入数据时生成的 id 出现冲突&quot;">​</a></h4><p>A: 目前采用雪花算法生成 id，不同服务实例需要确保 <code>datacenterid</code> 和 <code>workerid</code> 参数使用不同的组合，同时服务器时间需要确保已校准。可手动修改下服务的启动脚本 <code>deploy.sh</code>，添加不同的启动参数 <code>-Did.workerid=1 -Did.datacenterid=1</code> 来避免生成的 id 冲突的问题</p><h4 id="q-业务接口报错缺少-st-makepoint-函数" tabindex="-1">Q: 业务接口报错缺少 <code>st_makepoint</code> 函数 <a class="header-anchor" href="#q-业务接口报错缺少-st-makepoint-函数" aria-label="Permalink to &quot;Q: 业务接口报错缺少 \`st_makepoint\` 函数&quot;">​</a></h4><p>A: 数据库未安装 postgis 插件导致，需要安装 postgis 插件。已开通的租户，需要在租户库执行以下命令</p><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">CREATE</span><span style="color:#E1E4E8;"> EXTENSION </span><span style="color:#F97583;">IF</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">NOT</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">EXISTS</span><span style="color:#E1E4E8;"> postgis </span><span style="color:#F97583;">WITH</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">SCHEMA</span><span style="color:#E1E4E8;"> public;</span></span>
<span class="line"><span style="color:#E1E4E8;">COMMENT </span><span style="color:#F97583;">ON</span><span style="color:#E1E4E8;"> EXTENSION postgis </span><span style="color:#F97583;">IS</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;PostGIS geometry, geography, and raster spatial types and functions&#39;</span><span style="color:#E1E4E8;">;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">CREATE</span><span style="color:#24292E;"> EXTENSION </span><span style="color:#D73A49;">IF</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">NOT</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">EXISTS</span><span style="color:#24292E;"> postgis </span><span style="color:#D73A49;">WITH</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">SCHEMA</span><span style="color:#24292E;"> public;</span></span>
<span class="line"><span style="color:#24292E;">COMMENT </span><span style="color:#D73A49;">ON</span><span style="color:#24292E;"> EXTENSION postgis </span><span style="color:#D73A49;">IS</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;PostGIS geometry, geography, and raster spatial types and functions&#39;</span><span style="color:#24292E;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="q-已安装并启用了-postgis-插件-但是业务接口报错缺少-st-distance-sphere-函数" tabindex="-1">Q: 已安装并启用了 postgis 插件，但是业务接口报错缺少 <code>st_distance_sphere</code> 函数 <a class="header-anchor" href="#q-已安装并启用了-postgis-插件-但是业务接口报错缺少-st-distance-sphere-函数" aria-label="Permalink to &quot;Q: 已安装并启用了 postgis 插件，但是业务接口报错缺少 \`st_distance_sphere\` 函数&quot;">​</a></h4><p>A: 如果是 postgres 13，postgis 插件最低支持版本为 3.0，<code>st_distance_sphere</code> 函数已更名为 <code>st_distancesphere</code>，添加以下函数进行兼容</p><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">create</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">st_distance_sphere</span><span style="color:#E1E4E8;">(geom1 </span><span style="color:#F97583;">geometry</span><span style="color:#E1E4E8;">, geom2 </span><span style="color:#F97583;">geometry</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">returns</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">double precision</span></span>
<span class="line"><span style="color:#E1E4E8;">    immutable</span></span>
<span class="line"><span style="color:#E1E4E8;">    strict</span></span>
<span class="line"><span style="color:#E1E4E8;">    cost </span><span style="color:#79B8FF;">300</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">language</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">sql</span></span>
<span class="line"><span style="color:#F97583;">as</span></span>
<span class="line"><span style="color:#E1E4E8;">$$</span></span>
<span class="line"><span style="color:#F97583;">SELECT</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">public</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">_postgis_deprecate</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;ST_Distance_Sphere&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;ST_DistanceSphere&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;2.2.0&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#F97583;">SELECT</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">public</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">ST_DistanceSphere</span><span style="color:#E1E4E8;">($</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">,$</span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">$$;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">alter</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> st_distance_sphere(</span><span style="color:#F97583;">geometry</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">geometry</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">owner</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">to</span><span style="color:#E1E4E8;"> postgres;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">create</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">st_distance_sphere</span><span style="color:#24292E;">(geom1 </span><span style="color:#D73A49;">geometry</span><span style="color:#24292E;">, geom2 </span><span style="color:#D73A49;">geometry</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">returns</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">double precision</span></span>
<span class="line"><span style="color:#24292E;">    immutable</span></span>
<span class="line"><span style="color:#24292E;">    strict</span></span>
<span class="line"><span style="color:#24292E;">    cost </span><span style="color:#005CC5;">300</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">language</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">sql</span></span>
<span class="line"><span style="color:#D73A49;">as</span></span>
<span class="line"><span style="color:#24292E;">$$</span></span>
<span class="line"><span style="color:#D73A49;">SELECT</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">public</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">_postgis_deprecate</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;ST_Distance_Sphere&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;ST_DistanceSphere&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;2.2.0&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#D73A49;">SELECT</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">public</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">ST_DistanceSphere</span><span style="color:#24292E;">($</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">,$</span><span style="color:#005CC5;">2</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">$$;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">alter</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">function</span><span style="color:#24292E;"> st_distance_sphere(</span><span style="color:#D73A49;">geometry</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">geometry</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">owner</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">to</span><span style="color:#24292E;"> postgres;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="q-开户后涉及企微的相关接口会报错不可用" tabindex="-1">Q: 开户后涉及企微的相关接口会报错不可用 <a class="header-anchor" href="#q-开户后涉及企微的相关接口会报错不可用" aria-label="Permalink to &quot;Q: 开户后涉及企微的相关接口会报错不可用&quot;">​</a></h4><p>A: 需要先注册企微后，在企业微信中授权登录使用完整功能</p>`,240),e=[o];function c(r,t,y,E,i,F){return a(),n("div",null,e)}const b=s(p,[["render",c]]);export{m as __pageData,b as default};
