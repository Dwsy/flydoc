import{_ as e,o as t,c as l,Q as i}from"./chunks/framework.aac09c5f.js";const u=JSON.parse('{"title":"手机端消息推送验证及处理方案","description":"","frontmatter":{"title":"手机端消息推送验证及处理方案","date":"2020-05-11T13:48:56.000Z"},"headers":[],"relativePath":"doc/wpdoc/手机端消息推送验证及处理方案.md","filePath":"doc/wpdoc/手机端消息推送验证及处理方案.md"}'),o={name:"doc/wpdoc/手机端消息推送验证及处理方案.md"},r=i('<p>此功能需要更新web端至web V9.2.0及以上、APP端至9.0.0rc9及以上、messageserv（消息服务）至2.7.0及以上</p><h1 id="手机端消息推送验证及处理方案" tabindex="-1">手机端消息推送验证及处理方案 <a class="header-anchor" href="#手机端消息推送验证及处理方案" aria-label="Permalink to &quot;手机端消息推送验证及处理方案&quot;">​</a></h1><h2 id="推送是否生效验证方法" tabindex="-1">推送是否生效验证方法 <a class="header-anchor" href="#推送是否生效验证方法" aria-label="Permalink to &quot;推送是否生效验证方法&quot;">​</a></h2><p>注意验证推送的前提：</p><ol><li><strong>账号已登录，手动退出后不能再接收到推送</strong></li><li><strong>多台设备登录同一个账号，只有最后登陆的设备可以收到推送</strong></li></ol><p>所以验证推送的时候要重新登录下，确保不是同时登陆的其他设备收到了推送，而误认为推送不生效。</p><p>以上述条件作为前提，验证方法以iOS为例：</p><ol><li>APP位于前台：无横幅提醒，消息有显示红点</li><li>APP退到后台：有横幅提醒</li><li>杀掉APP进程：有横幅提醒</li></ol><p><strong>特殊的请注意</strong>：</p><p>由于iOS端推送配置的特殊性，bundleID与推送key是一一对应的关系。所以，如果用<strong>独立打包的iOS手机包</strong>(使用客户提供的企业证书打包)，验证时要用正式生产环境（推送服务key和secret配置已更新），不要用独立打包的去验证实施环境，同样的也不要用内部包(RC包和日更新包)去验证正式环境。</p><h2 id="推送不生效处理方案" tabindex="-1">推送不生效处理方案 <a class="header-anchor" href="#推送不生效处理方案" aria-label="Permalink to &quot;推送不生效处理方案&quot;">​</a></h2><p>在开通了推送服务和推送flycode无误的前提下，如果验证推送不生效：</p><ol><li><p><strong>找运维更新后台推送服务</strong></p><ul><li><p>原因1：推送key和secret配置有误</p><p>key和secret配置有误是最常见的不生效原因</p></li><li><p>原因2：旧的后台推送服务缺少getMsgTicketById1接口。</p><p>简单定位方法：如果推送发出后通过手机端抓包，getMsgTicketById1接口返回了404错误，可以<strong>定位到</strong>是后台推送服务没有更新。</p></li></ul></li><li><p><strong>特殊的，对于独立打包的iOS端(使用客户提供的企业证书打包)</strong></p><ul><li><p>原因3：独立打包bundleID改变，对应的推送服务key和secret配置也要配套改变，一一对应。</p><p>方案：找运维更新后台推送服务key和secret配置，key和secret可找瑞烜提供</p></li></ul></li><li><p>检查手机端设置是否允许通知；</p></li><li><p>检查APP版本：Android要8.5.2及以后版本、iOS要9.0及以后版本；</p><ul><li>原因：旧版本没有调用getMsgTicketById1接口</li></ul></li><li><p>如果上述方案都不能解决iOS端问题，可找开发或瑞烜检查推送证书配置是否过期；</p></li></ol>',13),a=[r];function s(p,n,c,_,d,g){return t(),l("div",null,a)}const P=e(o,[["render",s]]);export{u as __pageData,P as default};
