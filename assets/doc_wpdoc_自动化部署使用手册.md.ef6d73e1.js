import{_ as a,o as l,c as t,Q as e}from"./chunks/framework.b1e56e49.js";const _=JSON.parse('{"title":"自动化部署使用手册","description":"","frontmatter":{"title":"自动化部署使用手册","date":"2020-06-28T17:31:12.000Z"},"headers":[],"relativePath":"doc/wpdoc/自动化部署使用手册.md","filePath":"doc/wpdoc/自动化部署使用手册.md"}'),i={name:"doc/wpdoc/自动化部署使用手册.md"},o=e('<h1 id="自动化部署使用手册" tabindex="-1">自动化部署使用手册 <a class="header-anchor" href="#自动化部署使用手册" aria-label="Permalink to &quot;自动化部署使用手册&quot;">​</a></h1><h2 id="背景介绍" tabindex="-1">背景介绍 <a class="header-anchor" href="#背景介绍" aria-label="Permalink to &quot;背景介绍&quot;">​</a></h2><p>由于专属云、私有云、独立部署的方式出现，部署平台的事情变成更多，而且部署是个体力活。为了减轻部署工作量，快速部署，从而开发了自动化部署的功能。</p><h2 id="功能介绍" tabindex="-1">功能介绍 <a class="header-anchor" href="#功能介绍" aria-label="Permalink to &quot;功能介绍&quot;">​</a></h2><h3 id="部署步骤-以测试环境为例" tabindex="-1">部署步骤（以测试环境为例） <a class="header-anchor" href="#部署步骤-以测试环境为例" aria-label="Permalink to &quot;部署步骤（以测试环境为例）&quot;">​</a></h3><ul><li>登录<a href="http://172.16.0.163:51074" target="_blank" rel="noreferrer">http://172.16.0.163:51074</a> 进入环境管理-环境配置，如下图所示</li></ul><p><img src="http://apaas.wxchina.com:8881/wp-content/uploads/1.png" alt=""></p><ul><li>点击新建，构建一个新环境，样例如下：</li></ul><p><img src="http://apaas.wxchina.com:8881/wp-content/uploads/2.png" alt=""></p><ul><li>在列表中可以看到上一步骤新增的环境，然后点击环境部署，进入服务器的配置</li></ul><p><img src="http://apaas.wxchina.com:8881/wp-content/uploads/3.png" alt=""></p><ul><li>根据环境下的机器数据以及用途来新增服务器，在本例子中有两个机器，一台是用于数据库，一个是用于服务。我们这里只需要配置安装组件和服务的服务器即可。</li></ul><p><img src="http://apaas.wxchina.com:8881/wp-content/uploads/4.png" alt=""></p><ul><li>下一步是安排组件和服务安装在哪个服务器上。在选择安装介质的时候，可以调整安装路径、端口、配置选项。</li></ul><p><img src="http://apaas.wxchina.com:8881/wp-content/uploads/5.png" alt=""><br><img src="http://apaas.wxchina.com:8881/wp-content/uploads/6.png" alt=""></p><ul><li>配置好了之后，回到环境列表的页面，点击配置按钮，进行服务级的配置。（PS：为什么用服务级的配置呢？ 这里的配置项是启动服务用来的配置，因此而得名）。根据环境中服务的分布来修改配置项。</li></ul><p><img src="http://apaas.wxchina.com:8881/wp-content/uploads/7.png" alt=""><br><img src="http://apaas.wxchina.com:8881/wp-content/uploads/8.png" alt=""></p><ul><li>服务器配置完成后，回到环境部署页面（即配置服务器信息的页面），点击一键部署，进行环境的部署。</li></ul><p>由于目前还没有做进度条、日志等界面，所以查看部署的情况需要查看后台日志。后台日志看到这里，安装失败的组件和服务为空时，说明自动化部署成功。</p><blockquote><p>[2020-06-05 13:44:22.312] log4j2 - 36200 ERROR [http-nio-8016-exec-2] --- c.x.a.m.s.i.DeployServiceImpl: 步骤五：检测结果<br> [2020-06-05 13:44:22.312] log4j2 - 36200 DEBUG [http-nio-8016-exec-2] --- c.x.a.m.s.i.DeployServiceImpl: 环境[1262674538613837824]安装成功的组件和服务有:jdk-1.8.181,路由2.6.1,nacos服务,oss模拟器,测试后台服务,认证服务,流程引擎,导入导出服务,离线服务,资源服务,发布下载页面,用户级配置web,流程设计器,web,IDE服务<br> [2020-06-05 13:44:22.312] log4j2 - 36200 ERROR [http-nio-8016-exec-2] --- c.x.a.m.s.i.DeployServiceImpl: 环境[1262674538613837824]安装失败的组件和服务有:<br> [2020-06-05 13:44:22.313] log4j2 - 36200 INFO [http-nio-8016-exec-2] --- c.x.a.m.f.RestLoggingFilter: REST响应, 响应码:200, 总耗时:144913ms</p></blockquote><h4 id="注意事项" tabindex="-1">注意事项 <a class="header-anchor" href="#注意事项" aria-label="Permalink to &quot;注意事项&quot;">​</a></h4><ol><li>自动化部署不支持数据库的安装以及恢复</li><li>自动化部署暂不支持环境中存在重复服务，即在同一个环境下，一个服务只能部署一个。如果部署多个相同服务，路由那块会有问题，需要自行手工调整。</li><li>自动化部署暂不支持 自动设置开机启动，需要手工设置。</li><li>如果所属环境为正式环境，提供的组件介质和服务介质都是正式发布的状态的。可在基础数据管理-组件管理与介质管理中查看。</li><li>自动化部署仅支持平台v2.6以上的部署，也只包含平台的介质。opendata、工作报告服务、通知公告服务等不包含在内。</li></ol><h3 id="其他功能" tabindex="-1">其他功能 <a class="header-anchor" href="#其他功能" aria-label="Permalink to &quot;其他功能&quot;">​</a></h3><h4 id="升级服务" tabindex="-1">升级服务 <a class="header-anchor" href="#升级服务" aria-label="Permalink to &quot;升级服务&quot;">​</a></h4><p>适用场景：</p><ol><li>平台服务在某个项目中发现bug，开发人员已经修复bug，并已经通过归档流程</li><li>某个项目需要引入某个平台服务的新的特征</li></ol><p>操作步骤（以升级web为例）：</p><ol><li>找到需要升级的服务</li><li>点击更新按钮</li><li>选择要升级的版本，填写备份路径(选填)，填写无需备份文件(选填，jar包的建议填写logs)</li><li>点击升级按钮， 系统提升更新</li></ol><p>支持服务介质类型： Jar包，Web端，War包</p><h4 id="修改设置" tabindex="-1">修改设置 <a class="header-anchor" href="#修改设置" aria-label="Permalink to &quot;修改设置&quot;">​</a></h4><p>适用场景：</p><ol><li>修改某个服务的JVM</li><li>创建模拟器的bucket</li></ol><p>操作步骤</p><ol><li>选择要修改的的服务</li><li>点击编辑按钮</li><li>填写JVM配置或者bucket配置</li><li>点击确定按钮</li></ol><p>PS: 如果修改JVM，需要重启才会生效</p><p>支持服务介质类型：Jar包， backend(也叫Tomcat)，OSS</p><h4 id="启停操作" tabindex="-1">启停操作 <a class="header-anchor" href="#启停操作" aria-label="Permalink to &quot;启停操作&quot;">​</a></h4><p>操作步骤很简单，直接点击按钮即可</p><p>支持服务介质类型： router、nacos、 oss、backend(也叫Tomcat)、Jar包</p>',39),p=[o];function c(r,n,s,h,d,u){return l(),t("div",null,p)}const b=a(i,[["render",c]]);export{_ as __pageData,b as default};
