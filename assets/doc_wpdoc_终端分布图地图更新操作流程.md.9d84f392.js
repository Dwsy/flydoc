import{_ as a,o as t,c as o,Q as e}from"./chunks/framework.b1e56e49.js";const g=JSON.parse('{"title":"终端分布图地图更新操作流程","description":"","frontmatter":{"title":"终端分布图地图更新操作流程","date":"2020-10-16T14:08:21.000Z"},"headers":[],"relativePath":"doc/wpdoc/终端分布图地图更新操作流程.md","filePath":"doc/wpdoc/终端分布图地图更新操作流程.md"}'),p={name:"doc/wpdoc/终端分布图地图更新操作流程.md"},n=e('<h1 id="终端分布图地图更新操作流程" tabindex="-1">终端分布图地图更新操作流程 <a class="header-anchor" href="#终端分布图地图更新操作流程" aria-label="Permalink to &quot;终端分布图地图更新操作流程&quot;">​</a></h1><p>目前我们使用终端分布图geojson地图数据和行政区域数据比较古老，与现行的新增区域偏差较大，需要实施产品部自行更新数据，现提供更新操作流程。<br><img src="http://apaas.wxchina.com:8881/wp-content/uploads/WeChatWork%E6%88%AA%E5%9C%96_15991223842138.png" alt=""></p><p>需要更新的地方有两处，一是前端引擎包所包含的geojson地图数据，二是更新对应的行政区域表数据。</p><h2 id="一、从网上寻找较新的地图geojson数据-然后用爬虫爬下来。" tabindex="-1">一、从网上寻找较新的地图geojson数据，然后用爬虫爬下来。 <a class="header-anchor" href="#一、从网上寻找较新的地图geojson数据-然后用爬虫爬下来。" aria-label="Permalink to &quot;一、从网上寻找较新的地图geojson数据，然后用爬虫爬下来。&quot;">​</a></h2><p>这里提供阿里云的数据：<a href="http://datav.aliyun.com/tools/atlas/#&amp;lat=31.80289258670676&amp;lng=104.2822265625&amp;zoom=4" target="_blank" rel="noreferrer">http://datav.aliyun.com/tools/atlas/#&amp;lat=31.80289258670676&amp;lng=104.2822265625&amp;zoom=4</a></p><p>该链接的数据是比较新的，但不确定是否最新，或者可以自行从网上寻找，如果能找到最新的，并且经常追踪国家最新数据的就最好了。</p><h2 id="二、从国务院网站爬取行政区域最新数据。" tabindex="-1">二、从国务院网站爬取行政区域最新数据。 <a class="header-anchor" href="#二、从国务院网站爬取行政区域最新数据。" aria-label="Permalink to &quot;二、从国务院网站爬取行政区域最新数据。&quot;">​</a></h2><p><a href="http://www.stats.gov.cn/tjsj/tjbz/tjyqhdmhcxhfdm/" target="_blank" rel="noreferrer">http://www.stats.gov.cn/tjsj/tjbz/tjyqhdmhcxhfdm/</a></p><h2 id="三、对数据进行处理-处理成前端所需要的数据格式。" tabindex="-1">三、对数据进行处理，处理成前端所需要的数据格式。 <a class="header-anchor" href="#三、对数据进行处理-处理成前端所需要的数据格式。" aria-label="Permalink to &quot;三、对数据进行处理，处理成前端所需要的数据格式。&quot;">​</a></h2><p>地图geojson数据的位置：前端引擎包(V9.2.0.zip)/public/static/regionMap/map</p><p><img src="http://apaas.wxchina.com:8881/wp-content/uploads/%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_16028290514011.png" alt=""></p><p>1、因为是从两个不同的地方下载的数据源，要针对两种数据做下全面检查，保证行政区域名称与地图数据geojson的名称必须一一对应。<br> 比如有可能行政区域的名称是&quot;北京&quot;，但地图geojson数据里的名称是&quot;北京市&quot;，那么是对应不上的，需要统一成一个名字。</p><p>如果觉得这样对比麻烦的话，可以统一用地图geojson数据，从中抽取出行政区域数据，这样也能保证数据能一一对应。</p><p>2、再处理地图geojson数据文件名，统一是处理成中文，比如：中国.json 中国.广东省.json。</p><p><img src="http://apaas.wxchina.com:8881/wp-content/uploads/%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_16028326955852.png" alt=""></p><h2 id="四、把旧数据替换成整理好的新数据。" tabindex="-1">四、把旧数据替换成整理好的新数据。 <a class="header-anchor" href="#四、把旧数据替换成整理好的新数据。" aria-label="Permalink to &quot;四、把旧数据替换成整理好的新数据。&quot;">​</a></h2><p>1、更新行政区域表数据，数据库表名：pl_region</p><p>2、更新替换前端包里的地图geojson文件。<br> 地图geojson数据的位置：前端引擎包(V9.2.0.zip)/public/static/regionMap/map</p><p>3、更新之前记得备份原有数据，以防出现问题时可回滚。</p>',19),r=[n];function s(c,l,i,h,_,d){return t(),o("div",null,r)}const u=a(p,[["render",s]]);export{g as __pageData,u as default};
