import{_ as a,c as s,o as n,U as e}from"./chunks/framework.K-r7inPk.js";const d=JSON.parse('{"title":"调度监控报表使用说明","description":"","frontmatter":{"title":"调度监控报表使用说明","date":"2022-10-31T06:59:47.000Z"},"headers":[],"relativePath":"doc/wpdoc/调度监控报表使用说明.md","filePath":"doc/wpdoc/调度监控报表使用说明.md"}'),p={name:"doc/wpdoc/调度监控报表使用说明.md"},l=e(`<h1 id="调度监控报表使用说明" tabindex="-1">调度监控报表使用说明 <a class="header-anchor" href="#调度监控报表使用说明" aria-label="Permalink to &quot;调度监控报表使用说明&quot;">​</a></h1><h2 id="_1-需求背景" tabindex="-1">1. 需求背景 <a class="header-anchor" href="#_1-需求背景" aria-label="Permalink to &quot;1\\. 需求背景&quot;">​</a></h2><p>IDE 存在多种调度任务，运维同事在日常工作排查过程中，没有一个统一入口获知调度运行情况，且无法得知调度运行期间调度重叠执行情况。</p><h2 id="_2-改造方案" tabindex="-1">2. 改造方案 <a class="header-anchor" href="#_2-改造方案" aria-label="Permalink to &quot;2\\. 改造方案&quot;">​</a></h2><p>在【IDE - 工具 - 报表分析】栏新增【调度运营监控报表】一栏，用户可通过设置全部调度查询、时间范围查询，获知当前IDE调度的运行情况及相关配置。</p><h2 id="_3-部署说明" tabindex="-1">3. 部署说明 <a class="header-anchor" href="#_3-部署说明" aria-label="Permalink to &quot;3\\. 部署说明&quot;">​</a></h2><h3 id="_1-依赖说明" tabindex="-1">1) 依赖说明 <a class="header-anchor" href="#_1-依赖说明" aria-label="Permalink to &quot;1) 依赖说明&quot;">​</a></h3><p>调度服务（taskserv） v2.8.9</p><h3 id="_2-租户库-sql" tabindex="-1">2) 租户库 sql <a class="header-anchor" href="#_2-租户库-sql" aria-label="Permalink to &quot;2) 租户库 sql&quot;">​</a></h3><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>-- 在租户库中执行</span></span>
<span class="line"><span></span></span>
<span class="line"><span>ALTER TABLE &quot;public&quot;.&quot;job_info&quot;</span></span>
<span class="line"><span>ADD COLUMN &quot;inputtype&quot; int4,</span></span>
<span class="line"><span>ADD COLUMN &quot;alarmtimelimit&quot; varchar(32);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>COMMENT ON COLUMN &quot;public&quot;.&quot;job_info&quot;.&quot;inputtype&quot; IS &#39;输入方式。0表示控件输入方式，1表示表达式输入方式  &#39;;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>COMMENT ON COLUMN &quot;public&quot;.&quot;job_info&quot;.&quot;alarmtimelimit&quot; IS &#39;执行时间报警时限，&quot;1:30&quot;表示1小时30分钟&#39;;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>ALTER TABLE &quot;public&quot;.&quot;trigger_log&quot;</span></span>
<span class="line"><span>ADD COLUMN &quot;istimeout&quot; int4;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>COMMENT ON COLUMN &quot;public&quot;.&quot;trigger_log&quot;.&quot;istimeout&quot; IS &#39;是否已经被标记为超时，1：是；null：不是&#39;;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="_3-nacos-改动" tabindex="-1">3) nacos 改动 <a class="header-anchor" href="#_3-nacos-改动" aria-label="Permalink to &quot;3) nacos 改动&quot;">​</a></h3><p>//报警邮箱配置例子（按照实际填写）<br> alarm.email.host=smtp.wxchina.com<br> alarm.email.port=25<br> alarm.email.password=xxxxxxx<br><a href="mailto:alarm.email.user=xxmonitor@wxchina.com" target="_blank" rel="noreferrer">alarm.email.user=xxmonitor@wxchina.com</a></p><h2 id="_4-使用教程" tabindex="-1">4. 使用教程 <a class="header-anchor" href="#_4-使用教程" aria-label="Permalink to &quot;4\\. 使用教程&quot;">​</a></h2><p>1）报表提供全部调度、时间范围两种查询方式，默认全部调度查询，时间范围查询只支持设置4小时范围，用户可点击刷新按钮基于当前查询条件进行数据刷新</p><p>2）报表字段分别为：调度名称、启用状态、最后执行状态、调度调用频率、当前执行的代码、上次运行状态、上次运行时间、下次运行时间、时间范围重叠展示及时间重叠警告：</p><p>①点击调度名称可查看、修改对应调度配置，了解调度历史执行明细</p><p>②最后执行状态是针对查询时间范围内最后一次调度的状态</p><p>③点击当前执行的代码栏详情入口，即可查看调度对应的业务逻辑代码</p><p>④时间范围重叠展示：</p><p>用户选择全部调度查询时，不进行时间范围重叠展示；</p><p>此列时间轴的时间跨度以查询条件设置的时间范围进行展示，标注起始时间，时间跨度超过半小时，则每半小时标注时间；</p><p>时间轴内绿色表示当前调度执行过程，灰色表示当前调度未执行；</p><p>⑤时间重叠警告：</p><p>用户选择全部调度查询时，此列不显示内容；</p><p>方块颜色含义：绿色 - 没有重叠，黄色 - 任意时间点最大有2-4个重叠，红色 - 任意时间点最大有5个及以上重叠</p>`,25),t=[l];function o(r,i,c,u,b,m){return n(),s("div",null,t)}const _=a(p,[["render",o]]);export{d as __pageData,_ as default};
