import{_ as s,c as a,o as i,U as n}from"./chunks/framework.K-r7inPk.js";const u=JSON.parse('{"title":"Receipt","description":"","frontmatter":{"title":"Receipt","date":"2020-05-22T15:57:09.000Z"},"headers":[],"relativePath":"doc/wpdoc/Receipt.md","filePath":"doc/wpdoc/Receipt.md"}'),t={name:"doc/wpdoc/Receipt.md"},p=n(`<h1 id="receipt-收款" tabindex="-1">receipt 收款 <a class="header-anchor" href="#receipt-收款" aria-label="Permalink to &quot;receipt 收款&quot;">​</a></h1><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;receipt&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;amount&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;receiptname&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;exceptionhandling&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;exception_handling_event_code&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;complationhandling&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;complation_handling_event_code&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;way&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;qrcode&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;scan&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;channels&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;weixin&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;alipay&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;unionpay&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;qq&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;jd&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;service&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;qufuba&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;interfaces&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;getreceipturl&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;receiptwithcode&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;getstatus&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;orderinfo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;orderinfor&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;datatype&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;ctrl&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            &quot;code&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            &quot;scope&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;properties&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;storename&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                &quot;value&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                &quot;ctrl&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                    &quot;code&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ctrl_filtertextinput_storename&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                    &quot;component&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><h2 id="属性说明" tabindex="-1">属性说明 <a class="header-anchor" href="#属性说明" aria-label="Permalink to &quot;属性说明&quot;">​</a></h2><h3 id="amount-金额" tabindex="-1">amount 金额 <a class="header-anchor" href="#amount-金额" aria-label="Permalink to &quot;amount 金额&quot;">​</a></h3><p>支持配置一个控件的code，或者也一个内存值得key，用于获取付款金额</p><h3 id="receiptname-收款方名称" tabindex="-1">receiptname 收款方名称 <a class="header-anchor" href="#receiptname-收款方名称" aria-label="Permalink to &quot;receiptname 收款方名称&quot;">​</a></h3><p>支持配置一个控件的code，或者也一个内存值得key，用于获取收款方名称</p><h3 id="way-收款方式" tabindex="-1">way 收款方式 <a class="header-anchor" href="#way-收款方式" aria-label="Permalink to &quot;way 收款方式&quot;">​</a></h3><p>收款方式目前支持两种，可以选择其中的一种或者两种都支持（目前只需要实现两种都支持）</p><table><thead><tr><th>value</th><th>中文</th><th>说明</th></tr></thead><tbody><tr><td>qrcode</td><td>收款码</td><td>收款方提供收款二维码，由支付方扫码付钱</td></tr><tr><td>scan</td><td>扫码</td><td>由支付方提供付款码，收款方扫码收钱</td></tr></tbody></table><h3 id="channels-付款渠道" tabindex="-1">channels 付款渠道 <a class="header-anchor" href="#channels-付款渠道" aria-label="Permalink to &quot;channels 付款渠道&quot;">​</a></h3><p>用于配置可用的付款渠道，主要用于提供可用的收款码，默认先使用第一个方式生成收款码。</p><table><thead><tr><th>value</th><th>中文</th></tr></thead><tbody><tr><td>weixin</td><td>微信</td></tr><tr><td>alipay</td><td>支付宝</td></tr><tr><td>unionpay</td><td>银联</td></tr><tr><td>qq</td><td>QQ</td></tr><tr><td>jd</td><td>京东</td></tr></tbody></table><h3 id="service-服务提供商" tabindex="-1">service 服务提供商 <a class="header-anchor" href="#service-服务提供商" aria-label="Permalink to &quot;service 服务提供商&quot;">​</a></h3><p>用于配置内置服务提供商，目前只支持第三方聚合支付。</p><p>当为空的时候，支付接口会根据interfaces字段属性进行调用；不为空时，则使用内置约定的行为。</p><table><thead><tr><th>value</th><th>中文</th></tr></thead><tbody><tr><td>qufuba</td><td>趣付吧</td></tr></tbody></table><h3 id="interfaces-接口" tabindex="-1">interfaces 接口 <a class="header-anchor" href="#interfaces-接口" aria-label="Permalink to &quot;interfaces 接口&quot;">​</a></h3><p>用于指定支付调用的业务行为，如果设置了 service ，则会忽略该属性。</p><p>目前需要设置的接口有三个，分别用于<strong>获取收款链接</strong>，<strong>付款码收款</strong>，以及<strong>获取支付状态</strong>，这些接口分别对应一个业务行为，这些业务行为必须满足以下约定进行出入参设置：</p><h4 id="getreceipturl-获取收款链接" tabindex="-1">getreceipturl 获取收款链接 <a class="header-anchor" href="#getreceipturl-获取收款链接" aria-label="Permalink to &quot;getreceipturl 获取收款链接&quot;">​</a></h4><p>用于指定获取收款链接的业务行为的code。</p><p><strong>入参约定</strong></p><p>入参将由两个对象组成，一个是在 <strong>orderinfo</strong> 属性中定义的参数，用于上传必要的附加业务信息；另一个是约定的 <strong>__receipt_param</strong> 对象，用于传递获取收款链接的相关参数。</p><table><thead><tr><th>参数</th><th>说明</th><th>说明</th></tr></thead><tbody><tr><td>receipt_amount</td><td>收款金额</td><td>支持最多两位小数</td></tr><tr><td>receipt_channel</td><td>收款渠道</td><td>即 channels 属性指定的值</td></tr></tbody></table><p><strong>出参约定</strong></p><table><thead><tr><th>参数</th><th>名字</th><th>说明</th></tr></thead><tbody><tr><td>receipt_url</td><td>收款链接</td><td>用于生产收款二维码</td></tr><tr><td>receipt_id</td><td>交易id</td><td>用于查询交易状态</td></tr></tbody></table><p><strong>示例</strong></p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 入参</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;orderinfor&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;datetime&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        ......</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;receipt_param&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            &quot;receipt_amount&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;188.05&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;receipt_channel&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;weixin&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 出参</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;receipt_url&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://......&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;receipt_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;123456&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h4 id="receiptwithcode-付款码收款" tabindex="-1">receiptwithcode 付款码收款 <a class="header-anchor" href="#receiptwithcode-付款码收款" aria-label="Permalink to &quot;receiptwithcode 付款码收款&quot;">​</a></h4><p>用于指定扫描付款码后调用的收款的业务行为的code。</p><p><strong>入参约定</strong></p><p>入参将由两个对象组成，一个是在 <strong>orderinfo</strong> 属性中定义的参数，用于上传必要的附加业务信息；另一个是约定的 <strong>__receipt_param</strong> 对象，用于传递获取收款链接的相关参数。</p><table><thead><tr><th>参数</th><th>名字</th><th>说明</th></tr></thead><tbody><tr><td>receipt_amount</td><td>收款金额</td><td>支持最多两位小数</td></tr><tr><td>receipt_paycode</td><td>付款码</td><td>扫描获取到的收款码信息</td></tr></tbody></table><p><strong>出参约定</strong></p><table><thead><tr><th>参数</th><th>名字</th><th>说明</th></tr></thead><tbody><tr><td>receipt_id</td><td>交易id</td><td>用于查询交易状态</td></tr><tr><td>receipt_status</td><td>交易状态</td><td>参看状态说明</td></tr><tr><td>receipt_status_info</td><td>交易状态说明</td><td></td></tr></tbody></table><p><strong>示例</strong></p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 入参</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;orderinfor&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;datetime&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        ......</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;receipt_param&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            &quot;receipt_amount&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;188.05&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;receipt_paycode&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;......&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 出参</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;receipt_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;123456&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;receipt_status&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;receipt_status_info&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h4 id="getstatus-获取付款状态" tabindex="-1">getstatus 获取付款状态 <a class="header-anchor" href="#getstatus-获取付款状态" aria-label="Permalink to &quot;getstatus 获取付款状态&quot;">​</a></h4><p>用于指定获取付款状态的业务行为的code。该行为需要前端进行主动轮询。</p><p><strong>入参约定</strong></p><p>入参将由两个对象组成，一个是在 <strong>orderinfo</strong> 属性中定义的参数，用于上传必要的附加业务信息；另一个是约定的 <strong>__receipt_param</strong> 对象，用于传递获取收款链接的相关参数。</p><table><thead><tr><th>参数</th><th>名字</th><th>说明</th></tr></thead><tbody><tr><td>__receipt_id</td><td>交易id</td><td>用于查询交易状态</td></tr></tbody></table><p><strong>出参约定</strong></p><table><thead><tr><th>参数</th><th>名字</th><th>说明</th></tr></thead><tbody><tr><td>receipt_status</td><td>交易状态</td><td>用于查询交易状态</td></tr><tr><td>receipt_status_info</td><td>交易状态说明</td><td></td></tr></tbody></table><p><strong>示例</strong></p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 入参</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;orderinfor&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;datetime&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">        ......</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;receipt_param&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                &quot;receipt_amount&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;188.05&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;receipt_paycode&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;......&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 出参</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;receipt_status&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;4&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;receipt_status_info&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;支付超时&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h4 id="支付状态" tabindex="-1">支付状态 <a class="header-anchor" href="#支付状态" aria-label="Permalink to &quot;支付状态&quot;">​</a></h4><table><thead><tr><th>value</th><th>说明</th></tr></thead><tbody><tr><td>0</td><td>支付成功</td></tr><tr><td>1</td><td>未支付</td></tr><tr><td>2</td><td>支付中</td></tr><tr><td>3</td><td>支付失败</td></tr><tr><td>4</td><td>支付失效</td></tr></tbody></table><h1 id="趣付吧" tabindex="-1">趣付吧 <a class="header-anchor" href="#趣付吧" aria-label="Permalink to &quot;趣付吧&quot;">​</a></h1><table><thead><tr><th>接口</th><th>code</th></tr></thead><tbody><tr><td>getreceipturl</td><td></td></tr><tr><td>receiptwithcode</td><td></td></tr><tr><td>getstatus</td><td></td></tr></tbody></table><h2 id="付款状态检查说明" tabindex="-1">付款状态检查说明 <a class="header-anchor" href="#付款状态检查说明" aria-label="Permalink to &quot;付款状态检查说明&quot;">​</a></h2><ul><li><p>使用收款码</p><p>由于没办法直接受到对方已经扫码的通知，因此，在这个模式下，一旦收款码生成就要立即开始轮询支付状态，当支付状态不再是待支付时，即可进入支付处理的相关界面。</p></li><li><p>使用扫码收款</p><p>同样需要轮询支付状态，只不过一旦扫码成功，并调用了收款接口后，就可以立即进入支付处理的相关界面。</p></li></ul><h1 id="ui-示例" tabindex="-1">UI 示例 <a class="header-anchor" href="#ui-示例" aria-label="Permalink to &quot;UI 示例&quot;">​</a></h1><p>触发收款行为后，将会自动跳转到使用收款码，点击 <strong>返回</strong> 按钮将会关闭收款界面。</p><p><img src="http://apaas.wxchina.com:8881/wp-content/uploads/pay_code.png" alt=""></p><p>点击 <strong>更换收款方式</strong> 可以选择不同的收款渠道，选中某一个之后，立刻生成对应的二维码并展示</p><p><img src="http://apaas.wxchina.com:8881/wp-content/uploads/pay_selways.png" alt="pay_selways"></p><p>点击 <strong>切换为扫码收款</strong> 可以切换为B扫C模式，扫码收款，点击 <strong>切换回收款码</strong> 将会返回收款码界面</p><p><img src="http://apaas.wxchina.com:8881/wp-content/uploads/pay_scan.png" alt="pay_scan"></p><p>检测到开始付款时显示付款中的界面。</p><p><img src="http://apaas.wxchina.com:8881/wp-content/uploads/pay_ing.png" alt="pay_ing"></p><p>支付出现异常时，显示失败界面，并告知异常信息。</p><p>此时用户可以选择 <strong>重试</strong> ，将会再次进入收款码或者扫码界面。</p><p>如果配置了 exceptionhandling ，则会显示 <strong>异常处理</strong> 按钮，否则显示为 <strong>取消支付</strong> 。点击 <strong>异常处理</strong> 将会进入配置的对应的异常处理事件，并关闭支付界面；点击 <strong>取消支付</strong> ，将会直接关闭支付界面。</p><p><img src="http://apaas.wxchina.com:8881/wp-content/uploads/pay_fail.png" alt="pay_fail"></p><p>当支付成功后将会显示成功的界面，此时点击 <strong>收款成功</strong> 按钮，将会自动关闭支付界面，此时如果配置了 complationhandling 属性，则会自动触发对应的事件。</p><p><img src="http://apaas.wxchina.com:8881/wp-content/uploads/pay_success.png" alt="pay_success"></p>`,68),l=[p];function e(h,r,k,d,E,o){return i(),a("div",null,l)}const g=s(t,[["render",e]]);export{u as __pageData,g as default};
