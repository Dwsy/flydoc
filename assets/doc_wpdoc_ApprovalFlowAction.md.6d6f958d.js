import{_ as s,o as n,c as a,Q as p}from"./chunks/framework.b1e56e49.js";const d=JSON.parse('{"title":"ApprovalFlowAction","description":"","frontmatter":{"title":"ApprovalFlowAction","date":"2020-05-22T16:03:47.000Z"},"headers":[],"relativePath":"doc/wpdoc/ApprovalFlowAction.md","filePath":"doc/wpdoc/ApprovalFlowAction.md"}'),l={name:"doc/wpdoc/ApprovalFlowAction.md"},o=p(`<h1 id="approval-flow-流程管理相关事件" tabindex="-1">Approval Flow 流程管理相关事件 <a class="header-anchor" href="#approval-flow-流程管理相关事件" aria-label="Permalink to &quot;Approval Flow 流程管理相关事件&quot;">​</a></h1><p>用时实现定制的审批流程配置的事件。</p><h2 id="approval-list-action-获取审批列表行为" tabindex="-1">Approval List Action 获取审批列表行为 <a class="header-anchor" href="#approval-list-action-获取审批列表行为" aria-label="Permalink to &quot;Approval List Action 获取审批列表行为&quot;">​</a></h2><p>获取待办、已办列表的接口，该行为调用的接口已经对应的出入参约定与内建审批列表的数据获取一致，请参看其中关于 <a href="./../../Page/ApprovalList.html">审批列表数据获取</a> 的说明。</p><h3 id="protocol" tabindex="-1">Protocol <a class="header-anchor" href="#protocol" aria-label="Permalink to &quot;Protocol&quot;">​</a></h3><div class="language-Json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">Json</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">&quot;type&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;af_getflowlist&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">&quot;pagesize&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;20&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">&quot;querytype&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;0&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">&quot;querycondition&quot;</span><span style="color:#E1E4E8;">: [</span></span>
<span class="line"><span style="color:#E1E4E8;">        {</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#79B8FF;">&quot;name&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;categoryname&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#79B8FF;">&quot;value&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#79B8FF;">&quot;ctrl&quot;</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#79B8FF;">&quot;code&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#79B8FF;">&quot;component&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">            }</span></span>
<span class="line"><span style="color:#E1E4E8;">        }</span></span>
<span class="line"><span style="color:#E1E4E8;">    ],</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">&quot;targetctrlcode&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;order_list&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">&quot;targetproperties&quot;</span><span style="color:#E1E4E8;">: [</span></span>
<span class="line"><span style="color:#E1E4E8;">        {</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#79B8FF;">&quot;name&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;af_processinstancename&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#79B8FF;">&quot;ctrl&quot;</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#79B8FF;">&quot;code&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;name&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#79B8FF;">&quot;component&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">            }</span></span>
<span class="line"><span style="color:#E1E4E8;">        }</span></span>
<span class="line"><span style="color:#E1E4E8;">    ]</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;type&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;af_getflowlist&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;pagesize&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;20&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;querytype&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;0&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;querycondition&quot;</span><span style="color:#24292E;">: [</span></span>
<span class="line"><span style="color:#24292E;">        {</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#005CC5;">&quot;name&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;categoryname&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#005CC5;">&quot;value&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#005CC5;">&quot;ctrl&quot;</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#005CC5;">&quot;code&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#005CC5;">&quot;component&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;&quot;</span></span>
<span class="line"><span style="color:#24292E;">            }</span></span>
<span class="line"><span style="color:#24292E;">        }</span></span>
<span class="line"><span style="color:#24292E;">    ],</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;targetctrlcode&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;order_list&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;targetproperties&quot;</span><span style="color:#24292E;">: [</span></span>
<span class="line"><span style="color:#24292E;">        {</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#005CC5;">&quot;name&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;af_processinstancename&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#005CC5;">&quot;ctrl&quot;</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#005CC5;">&quot;code&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;name&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#005CC5;">&quot;component&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;&quot;</span></span>
<span class="line"><span style="color:#24292E;">            }</span></span>
<span class="line"><span style="color:#24292E;">        }</span></span>
<span class="line"><span style="color:#24292E;">    ]</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><ul><li><p>pagesize</p><p>分页大小，默认为20</p></li><li><p>querytype</p><p>请求的列表的种类</p></li></ul><table><thead><tr><th>值</th><th>含义</th></tr></thead><tbody><tr><td>0</td><td>待办</td></tr><tr><td>1</td><td>已办</td></tr></tbody></table><ul><li><p>querycondition</p><p>请求的附加条件，可以为空，表示没有附加搜索条件。</p><p>支持的条件参数名称如下</p></li></ul><table><thead><tr><th>名称</th><th>含义</th></tr></thead><tbody><tr><td>processinstancename</td><td>流程实例名</td></tr><tr><td>processdefinename</td><td>流程定义名称</td></tr><tr><td>applyusername</td><td>发起人</td></tr><tr><td>startdate</td><td>流程开始时间</td></tr><tr><td>enddate</td><td>流程结束时间</td></tr><tr><td>categorycode</td><td>分类的code</td></tr><tr><td>categoryname</td><td>分类的名称</td></tr></tbody></table><ul><li><p>targetctrlcode</p><p>请求回来的数据所赋值到的控件的code，通常是一个列表控件</p></li><li><p>targetproperties</p><p>数据赋值所使用的属性映射关系，与datarequest的setter属性中properties的含义一致</p><p>返回的数据的key值，请参看接口说明 <a href="./ApprovalList.html">Approval List</a></p><blockquote><p>为了简化配置，此处属性的配置中，配置人员可以只配需要显示，或者明确下一个页面需要的参数；但由于通常下一个页面为处理流程的页面，而处理流程有几个必填的 <code>processinfo</code> 参数的需求，因此在实现中，前端应该去检测 <code>targetproperties</code> 中是否有这几个参数，没有的话，应该自动添加上去，方便之后的获取。</p></blockquote></li></ul><h3 id="request" tabindex="-1">Request <a class="header-anchor" href="#request" aria-label="Permalink to &quot;Request&quot;">​</a></h3><p>POST API：<em><strong>~/workflow/flow/getmyprocesslist</strong></em></p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">&quot;af_pageindex&quot;</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">,            </span><span style="color:#6A737D;">//页码</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">&quot;af_pagesize&quot;</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;">,            </span><span style="color:#6A737D;">//页大小</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">&quot;af_querytype&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;">//查询类型，待办:0, 已办:1, 默认查待办</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;af_pageindex&quot;</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">,            </span><span style="color:#6A737D;">//页码</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;af_pagesize&quot;</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">10</span><span style="color:#24292E;">,            </span><span style="color:#6A737D;">//页大小</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;af_querytype&quot;</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">            </span><span style="color:#6A737D;">//查询类型，待办:0, 已办:1, 默认查待办</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="response" tabindex="-1">Response <a class="header-anchor" href="#response" aria-label="Permalink to &quot;Response&quot;">​</a></h3><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">&quot;resp_data&quot;</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">&quot;af_pagecount&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">//总页数</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">&quot;af_pagesize&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">//页大小</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">&quot;af_itemcount&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">//记录总条数</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">&quot;af_items&quot;</span><span style="color:#E1E4E8;">: [</span></span>
<span class="line"><span style="color:#E1E4E8;">            {</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#79B8FF;">&quot;af_assigned&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">//    是否已设置处理人</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#79B8FF;">&quot;af_processdefineid&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;expenseflow:1:72504&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">//    流程定义Id</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#79B8FF;">&quot;af_processinstanceid&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;75001&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">//    流程实例Id</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#79B8FF;">&quot;af_processinstancename&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;小王的费用&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">//    流程实例名称</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#79B8FF;">&quot;af_processdefinekey&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;expenseflow&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">//    流程定义Key</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#79B8FF;">&quot;af_processdefinename&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;费用报销流程&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">//    流程定义名称</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#79B8FF;">&quot;af_taskid&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;75006&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">//    任务Id</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#79B8FF;">&quot;af_taskkey&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;usertask1&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">//    任务Key</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#79B8FF;">&quot;af_taskname&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;渠道业务员发起&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">//    任务名称</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#79B8FF;">&quot;af_createtime&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;2017-03-24 15:46:03&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">//    任务创建时间</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#79B8FF;">&quot;af_applyusercode&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;831025515799248802&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">//    流程发起人Id</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#79B8FF;">&quot;af_applyusername&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;渠道业务员&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">//  流程发起人姓名</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#79B8FF;">&quot;af_applytime&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;2017-03-24 15:46:03&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">//    流程发起时间</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#79B8FF;">&quot;af_statusname&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;待处理&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">//    状态</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#79B8FF;">&quot;af_operator&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;处理&quot;</span><span style="color:#E1E4E8;">     </span><span style="color:#6A737D;">// 处理</span></span>
<span class="line"><span style="color:#E1E4E8;">            }</span></span>
<span class="line"><span style="color:#E1E4E8;">        ]</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;resp_data&quot;</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">&quot;af_pagecount&quot;</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">//总页数</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">&quot;af_pagesize&quot;</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">10</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">//页大小</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">&quot;af_itemcount&quot;</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">//记录总条数</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">&quot;af_items&quot;</span><span style="color:#24292E;">: [</span></span>
<span class="line"><span style="color:#24292E;">            {</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#005CC5;">&quot;af_assigned&quot;</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">true</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">//    是否已设置处理人</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#005CC5;">&quot;af_processdefineid&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;expenseflow:1:72504&quot;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">//    流程定义Id</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#005CC5;">&quot;af_processinstanceid&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;75001&quot;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">//    流程实例Id</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#005CC5;">&quot;af_processinstancename&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;小王的费用&quot;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">//    流程实例名称</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#005CC5;">&quot;af_processdefinekey&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;expenseflow&quot;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">//    流程定义Key</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#005CC5;">&quot;af_processdefinename&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;费用报销流程&quot;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">//    流程定义名称</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#005CC5;">&quot;af_taskid&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;75006&quot;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">//    任务Id</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#005CC5;">&quot;af_taskkey&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;usertask1&quot;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">//    任务Key</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#005CC5;">&quot;af_taskname&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;渠道业务员发起&quot;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">//    任务名称</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#005CC5;">&quot;af_createtime&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;2017-03-24 15:46:03&quot;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">//    任务创建时间</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#005CC5;">&quot;af_applyusercode&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;831025515799248802&quot;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">//    流程发起人Id</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#005CC5;">&quot;af_applyusername&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;渠道业务员&quot;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">//  流程发起人姓名</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#005CC5;">&quot;af_applytime&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;2017-03-24 15:46:03&quot;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">//    流程发起时间</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#005CC5;">&quot;af_statusname&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;待处理&quot;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">//    状态</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#005CC5;">&quot;af_operator&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;处理&quot;</span><span style="color:#24292E;">     </span><span style="color:#6A737D;">// 处理</span></span>
<span class="line"><span style="color:#24292E;">            }</span></span>
<span class="line"><span style="color:#24292E;">        ]</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h2 id="approval-pre-add-action-发起审批行为" tabindex="-1">Approval Pre Add Action 发起审批行为 <a class="header-anchor" href="#approval-pre-add-action-发起审批行为" aria-label="Permalink to &quot;Approval Pre Add Action 发起审批行为&quot;">​</a></h2><p>通过指定需要发起的流程种类，来获取流程的基础信息。</p><h3 id="protocol-1" tabindex="-1">Protocol <a class="header-anchor" href="#protocol-1" aria-label="Permalink to &quot;Protocol&quot;">​</a></h3><div class="language-Json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">Json</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">&quot;type&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;af_preaddflow&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">&quot;af_processdefinekey&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;expenseflow&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 用于指定需要发起的流程种类</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">&quot;mode&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;popup&quot;</span><span style="color:#E1E4E8;">,    </span><span style="color:#6A737D;">// 与link事件相同</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">&quot;pagesize&quot;</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">&quot;width&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;800&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">&quot;height&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">&quot;param&quot;</span><span style="color:#E1E4E8;">: {}          </span><span style="color:#6A737D;">// 与link事件相同</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;type&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;af_preaddflow&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;af_processdefinekey&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;expenseflow&quot;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 用于指定需要发起的流程种类</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;mode&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;popup&quot;</span><span style="color:#24292E;">,    </span><span style="color:#6A737D;">// 与link事件相同</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;pagesize&quot;</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">&quot;width&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;800&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">&quot;height&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;&quot;</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;param&quot;</span><span style="color:#24292E;">: {}          </span><span style="color:#6A737D;">// 与link事件相同</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ul><li><p>af_processdefinekey</p><p>需要发起的流程的种类</p></li></ul><blockquote><p>调用接口：~/workflow/flow/preaddflow</p></blockquote><p><strong>Request</strong></p><p>POST API：<em><strong>~/workflow/flow/preaddflow</strong></em></p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">&quot;af_processdefinekey&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;expenseflow&quot;</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">//流程定义Key</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;af_processdefinekey&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;expenseflow&quot;</span><span style="color:#24292E;">  </span><span style="color:#6A737D;">//流程定义Key</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li><p>af_processdefinekey</p><p>直接使用action的 <code>processdefinekey</code> 属性即可</p></li></ul><p><strong>Response</strong></p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">&quot;resp_data&quot;</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">&quot;af_processdefineid&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;expenseflow:1:72504&quot;</span><span style="color:#E1E4E8;">,      </span><span style="color:#6A737D;">//流程定义Id</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">&quot;af_processdefinekey&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;expenseflow&quot;</span><span style="color:#E1E4E8;">,             </span><span style="color:#6A737D;">//流程定义Key</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">&quot;af_processdefinename&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;费用报销流程&quot;</span><span style="color:#E1E4E8;">,             </span><span style="color:#6A737D;">//流程定义名称</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">&quot;af_applyuicode&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;firstForm&quot;</span><span style="color:#E1E4E8;">                     </span><span style="color:#6A737D;">//流程发起UI对象编码</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;resp_data&quot;</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">&quot;af_processdefineid&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;expenseflow:1:72504&quot;</span><span style="color:#24292E;">,      </span><span style="color:#6A737D;">//流程定义Id</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">&quot;af_processdefinekey&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;expenseflow&quot;</span><span style="color:#24292E;">,             </span><span style="color:#6A737D;">//流程定义Key</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">&quot;af_processdefinename&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;费用报销流程&quot;</span><span style="color:#24292E;">,             </span><span style="color:#6A737D;">//流程定义名称</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">&quot;af_applyuicode&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;firstForm&quot;</span><span style="color:#24292E;">                     </span><span style="color:#6A737D;">//流程发起UI对象编码</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>与在内建[审批种类列表中发起]()的传参一致</p><h2 id="approval-handle-action-处理审批行为" tabindex="-1">Approval Handle Action 处理审批行为 <a class="header-anchor" href="#approval-handle-action-处理审批行为" aria-label="Permalink to &quot;Approval Handle Action 处理审批行为&quot;">​</a></h2><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">&quot;type&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;af_handleflow&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">&quot;processinfo&quot;</span><span style="color:#E1E4E8;">: [</span></span>
<span class="line"><span style="color:#E1E4E8;">        {</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#79B8FF;">&quot;name&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;af_processdefineid&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#79B8FF;">&quot;value&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#79B8FF;">&quot;ctrl&quot;</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#79B8FF;">&quot;code&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#79B8FF;">&quot;component&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">            }</span></span>
<span class="line"><span style="color:#E1E4E8;">        }</span></span>
<span class="line"><span style="color:#E1E4E8;">    ],</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">&quot;businesskey&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;orderid&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;param&quot;</span><span style="color:#FDAEB7;font-style:italic;">:</span><span style="color:#E1E4E8;"> {}          </span><span style="color:#6A737D;">// 与link事件相同</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;type&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;af_handleflow&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;processinfo&quot;</span><span style="color:#24292E;">: [</span></span>
<span class="line"><span style="color:#24292E;">        {</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#005CC5;">&quot;name&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;af_processdefineid&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#005CC5;">&quot;value&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#005CC5;">&quot;ctrl&quot;</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#005CC5;">&quot;code&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#005CC5;">&quot;component&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;&quot;</span></span>
<span class="line"><span style="color:#24292E;">            }</span></span>
<span class="line"><span style="color:#24292E;">        }</span></span>
<span class="line"><span style="color:#24292E;">    ],</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;businesskey&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;orderid&quot;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&quot;param&quot;</span><span style="color:#B31D28;font-style:italic;">:</span><span style="color:#24292E;"> {}          </span><span style="color:#6A737D;">// 与link事件相同</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><ul><li><p>processinfo</p><p>流程的基本信息，共有4个参数需要填写，而且是必须每个都要填写</p></li></ul><table><thead><tr><th>key</th><th>说明</th></tr></thead><tbody><tr><td>af_processdefineid</td><td>流程定义ID</td></tr><tr><td>af_processinstanceid</td><td>流程实例ID</td></tr><tr><td>af_taskid</td><td>任务ID</td></tr><tr><td>af_taskkey</td><td>任务key</td></tr></tbody></table><ul><li><p>businesskey</p><p>用于指定业务数据的主键的key，该行为会将从流程服务接口中获取到的业务主键，赋值给businesskey，并以传参形式传递给下一个页面。</p></li></ul>`,34),e=[o];function t(c,r,E,y,u,i){return n(),a("div",null,e)}const F=s(l,[["render",t]]);export{d as __pageData,F as default};
